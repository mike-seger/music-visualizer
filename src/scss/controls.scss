@use 'includes/reset';
@use 'includes/lil-gui';
@use 'includes/fv3-controls';

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #0f1219;
  color: #e6e9f0;
  font-family: system-ui, -apple-system, sans-serif;
  min-width: 320px;
  overflow: hidden;
}

/* In the popup window, the lil-gui sits at the top and fills the width */
.lil-gui.lil-root {
  --width: 100% !important;
  width: 100% !important;
  position: relative !important;
  top: auto !important;
  right: auto !important;
  z-index: auto !important;
  border-radius: 0 !important;
  border: none !important;
  box-shadow: none !important;
  max-height: none !important;
  overflow: visible !important;
  padding: 0 !important;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Root children: flex column so the last folder can grow */
.lil-gui.lil-root > .lil-children {
  flex: 1 1 auto;
  display: flex !important;
  flex-direction: column;
  overflow: hidden !important;
  max-height: none !important;
}

/* FV3 controls folder fills remaining space */
.lil-gui .fv3-controls {
  flex: 1 1 auto !important;
  display: flex !important;
  flex-direction: column;
  overflow: hidden !important;
  min-height: 0;
}

.lil-gui .fv3-controls > .lil-children {
  flex: 1 1 auto;
  display: flex !important;
  flex-direction: column;
  overflow: hidden !important;
  max-height: none !important;
}

/* The scroll container fills remaining space and scrolls */
.lil-gui .fv3-controls .fv3-scroll {
  flex: 1 1 auto;
  max-height: none !important;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
}

/* Hide the root title bar but keep children visible */
.lil-gui.lil-root > .lil-title {
  display: none !important;
}

/* Hide popout hotzone in popup window (not needed) */
// .gui-popout-btn {
//   display: none !important;
// }

/* lil-gui (visualizer dropdown) layout fixes */
.lil-gui {
  /* Ensure widgets fill available horizontal space */
  .lil-controller .lil-widget {
    flex: 1 1 auto;
    min-width: 0;
  }

  /* Ensure select display fills widget space */
  .lil-controller.lil-option .lil-display {
    width: 100%;
  }

  /* Dark mode for select elements */
  select {
    box-sizing: border-box;
    display: block;
    width: 100%;
    min-width: 0;
    margin: 0;
    background-color: #2b2c2d !important;
    color: white !important;
    border: 1px solid #3a3a3a !important;
    padding: 4px 8px;
    border-radius: 3px;
    text-overflow: ellipsis;

    option {
      background-color: #2b2c2d !important;
      color: white !important;
    }
  }

  /* Dark mode styling for input fields */
  input[type="text"],
  input[type="number"] {
    background-color: #2b2c2d !important;
    color: white !important;
    border: 1px solid #3a3a3a !important;
    padding: 4px 8px;
    border-radius: 3px;
  }

  /* Dark mode styling for checkboxes */
  input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background-color: #2b2c2d !important;
    border: 1px solid #3a3a3a !important;
    border-radius: 3px;
    cursor: pointer;
    position: relative;

    &:checked::after {
      content: 'âœ“';
      position: absolute;
      top: -2px;
      left: 2px;
      color: white;
      font-size: 14px;
    }
  }

  /* Host row for the injected close X inside the VISUALIZER TYPE title */
  .title.gui-close-host {
    position: relative;
    padding-right: 34px;
  }

  .title.gui-close-host .gui-close-x {
    position: absolute;
    right: 10px;
    top: 0;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 0;
    background: transparent;
    color: inherit;
    font: inherit;
    line-height: 1;
    cursor: pointer;
    padding: 0;
  }

  .title.gui-close-host .gui-close-x:hover {
    color: #fff;
  }
}

.fv3-edit-row {
  display: flex;
  align-items: center;
  font-size: 11px;
  line-height: 16px;
  padding: 4px 5px;

  .property-name {
    width: 40%;
    padding-right: 4px;
    text-align: left;
    color: #e0e0e0;
  }

  .c {
    width: 60%;
  }

  button {
    width: 100%;
    padding: 4px 8px;
    font-size: 11px;
    border: 1px solid #1a1a1a;
    background: linear-gradient(#3c3c3c, #2b2b2b);
    color: #f0f0f0;
    border-radius: 2px;
    cursor: pointer;
    transition: background 0.12s ease, border-color 0.12s ease, color 0.12s ease;

    &:hover {
      background: linear-gradient(#4a4a4a, #333);
    }

    &:active {
      background: linear-gradient(#2e2e2e, #222);
      border-color: #000;
    }
  }
}
