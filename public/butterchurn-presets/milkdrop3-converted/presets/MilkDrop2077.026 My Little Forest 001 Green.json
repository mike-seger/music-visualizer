{"version":2,"baseVals":{"rating":4,"gammaadj":1.9,"echo_zoom":1.169,"wave_mode":5,"additivewave":1,"wave_thick":1,"modwavealphabyvolume":1,"wave_a":0.001,"wave_scale":1.286,"wave_smoothing":0.9,"modwavealphastart":0.71,"modwavealphaend":1.3,"warpanimspeed":9.861,"warpscale":16.217,"zoomexp":1.50374,"wave_r":0.65,"wave_g":0.65,"wave_b":0.65,"ob_size":0,"ob_r":1,"ob_g":0.1,"ob_a":1,"ib_size":0,"ib_r":0,"ib_g":0,"ib_b":0,"ib_a":1,"mv_x":64,"mv_y":48,"mv_l":0,"mv_a":0},"shapes":[{"baseVals":{"enabled":1,"sides":3,"textured":1,"rad":1.97883,"tex_ang":0.06283,"tex_zoom":0.2584,"g":1,"b":1,"a":0.7,"g2":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['ang']=Math.sin((a['time']*0.4));}());","init_eqs_eel":"","frame_eqs_eel":"ang=sin(time*.4);\n;"},{"baseVals":{"enabled":1,"sides":3,"additive":1,"thickoutline":1,"num_inst":421,"rad":0.03347,"g":1,"b":1,"r2":1,"g2":0,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 1)*3.1415)*0.01)*a['bass'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0002*Math.cos(a['ma']))); a['my']=(a['my']+(0.0002*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.8);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(bass,1)*3.1415*.01*bass);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0002*cos(ma));\nmy=my+(.0002*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.8));"},{"baseVals":{"sides":3,"additive":1,"thickoutline":1,"num_inst":681,"rad":0.03347,"g":1,"b":1,"r2":1,"g2":0,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"(function(){ma=ma+(above(bass,1)*3.1415*.05*bass);\nma=ma-(above(mid,1)*3.1415*.05*mid);\n\nmx=mx+(.0001*cos(ma));\nmy=my+(.0001*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.1));}());","init_eqs_eel":"","frame_eqs_eel":"(function(){ma=ma+(above(bass,1)*3.1415*.05*bass);\nma=ma-(above(mid,1)*3.1415*.05*mid);\n\nmx=mx+(.0001*cos(ma));\nmy=my+(.0001*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.1));}());"},{"baseVals":{"enabled":1,"sides":3,"additive":1,"thickoutline":1,"num_inst":441,"rad":0.03347,"g":1,"b":1,"r2":1,"g2":0,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['mid'], 1)*3.1415)*0.01)*a['mid'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0004*Math.cos(a['ma']))); a['my']=(a['my']+(0.0004*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.3);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(mid,1)*3.1415*.01*mid);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0004*cos(ma));\nmy=my+(.0004*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.3));"}],"waves":[{"baseVals":{"enabled":1,"thick":1,"r":0.8},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"","point_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 1)*3.1415)*0.01)*a['bass'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0002*Math.cos(a['ma']))); a['my']=(a['my']+(0.0002*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.8);}());","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"ma=ma+(above(bass,1)*3.1415*.01*bass);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0002*cos(ma));\nmy=my+(.0002*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.8));"},{"baseVals":{"enabled":1,"thick":1,"g":0.8},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"","point_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 1)*3.1415)*0.05)*a['bass'])); a['ma']=(a['ma']-(((above(a['mid'], 1)*3.1415)*0.05)*a['mid'])); a['mx']=(a['mx']+(0.0001*Math.cos(a['ma']))); a['my']=(a['my']+(0.0001*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.1);}());","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"ma=ma+(above(bass,1)*3.1415*.05*bass);\nma=ma-(above(mid,1)*3.1415*.05*mid);\n\nmx=mx+(.0001*cos(ma));\nmy=my+(.0001*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.1));"},{"baseVals":{"enabled":1,"thick":1,"b":0.8},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"","point_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['mid'], 1)*3.1415)*0.01)*a['mid'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0004*Math.cos(a['ma']))); a['my']=(a['my']+(0.0004*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.3);}());","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"ma=ma+(above(mid,1)*3.1415*.01*mid);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0004*cos(ma));\nmy=my+(.0004*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.3));"},{"baseVals":{"enabled":1,"thick":1},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"","point_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 0.5)*3.1415)*0.02)*a['bass'])); a['ma']=(a['ma']-(((above(a['treb'], 0.5)*3.1415)*0.02)*a['treb'])); a['mx']=(a['mx']+(0.0008*Math.cos(a['ma']))); a['my']=(a['my']+(0.0008*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.2);}());","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"ma=ma+(above(bass,.5)*3.1415*.02*bass);\nma=ma-(above(treb,.5)*3.1415*.02*treb);\n\nmx=mx+(.0008*cos(ma));\nmy=my+(.0008*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.2));"}],"init_eqs_str":"(function(){a['xpos'] = 0; a['yamptarg'] = 0; a['y_pos'] = 0; a['ydir'] = 0; a['meanbass_att'] = 0; a['q1'] = 0; a['myx'] = 0; a['myy'] = 0; a['lastbeat'] = 0; a['beatrate'] = 0; a['peakbass_att'] = 0; a['xamptarg'] = 0; a['xamp'] = 0; a['xspeed'] = 0; a['ypos'] = 0; a['movement'] = 0; a['att'] = 0; a['volume'] = 0; a['beat'] = 0; a['q2'] = 0; a['yamp'] = 0; a['q3'] = 0; a['xdir'] = 0; a['q8'] = 0; a['yspeed'] = 0;}());","frame_eqs_str":"(function(){a['warp']=0; a['volume']=(0.3*((a['bass']+a['mid'])+a['att'])); a['xamptarg']=((Math.abs(equal(mod(a['frame'],15), 0))>0.00001)?(Math.min(((0.25*a['volume'])*a['bass_att']), 0.5)):(a['xamptarg'])); a['xamp']=(a['xamp']+(0.5*(a['xamptarg']-a['xamp']))); a['xdir']=((Math.abs(above(Math.abs(a['xpos']), a['xamp']))>0.00001)?(-sign(a['xpos'])):(((Math.abs(below(Math.abs(a['xspeed']), 0.1))>0.00001)?(((2*above(a['xpos'], 0))-1)):(a['xdir'])))); a['xspeed']=(((a['xspeed']+(a['xdir']*a['xamp']))-a['xpos'])-((a['xspeed']*0.055)*below(Math.abs(a['xpos']), a['xamp']))); a['xpos']=(a['xpos']+(0.001*a['xspeed'])); a['yamptarg']=((Math.abs(equal(mod(a['frame'],15), 0))>0.00001)?(Math.min(((0.15*a['volume'])*a['treb_att']), 0.5)):(a['yamptarg'])); a['yamp']=(a['yamp']+(0.5*(a['yamptarg']-a['yamp']))); a['ydir']=((Math.abs(above(Math.abs(a['ypos']), a['yamp']))>0.00001)?(-sign(a['ypos'])):(((Math.abs(below(Math.abs(a['yspeed']), 0.1))>0.00001)?(((2*above(a['ypos'], 0))-1)):(a['ydir'])))); a['yspeed']=(((a['yspeed']+(a['ydir']*a['yamp']))-a['ypos'])-((a['yspeed']*0.055)*below(Math.abs(a['ypos']), a['yamp']))); a['ypos']=(a['ypos']+(0.001*a['yspeed'])); a['beatrate']=(equal(a['beatrate'], 0)+((1-equal(a['beatrate'], 0))*(below(a['volume'], 0.01)+((1-below(a['volume'], 0.01))*a['beatrate'])))); a['lastbeat']=(a['lastbeat']+(equal(a['lastbeat'], 0)*a['time'])); a['meanbass_att']=(0.1*((a['meanbass_att']*9)+a['bass_att'])); a['peakbass_att']=Math.max(a['bass_att'], a['peakbass_att']); a['beat']=((above(a['volume'], 0.8)*below((a['peakbass_att']-a['bass_att']), (0.05*a['peakbass_att'])))*above((a['time']-a['lastbeat']), (0.1+(0.5*(a['beatrate']-0.1))))); a['beatrate']=Math.max(((Math.abs(a['beat'])>0.00001)?(((Math.abs(below((a['time']-a['lastbeat']), (2*a['beatrate'])))>0.00001)?((0.1*(((a['beatrate']*9)+a['time'])-a['lastbeat']))):(a['beatrate']))):(a['beatrate'])), 0.1); a['peakbass_att']=((a['beat']*a['bass_att'])+(((1-a['beat'])*a['peakbass_att'])*((above((a['time']-a['lastbeat']), (2*a['beatrate']))*0.95)+((1-above((a['time']-a['lastbeat']), (2*a['beatrate'])))*0.995)))); a['lastbeat']=((a['beat']*a['time'])+((1-a['beat'])*a['lastbeat'])); a['peakbass_att']=Math.max(a['peakbass_att'], (1.1*a['meanbass_att'])); a['wave_r']=(0.5+(0.499*((0.60*Math.sin((0.980*a['time'])))+(0.40*Math.sin((1.047*a['time'])))))); a['wave_g']=(0.5+(0.499*((0.60*Math.sin((0.835*a['time'])))+(0.40*Math.sin((1.081*a['time'])))))); a['wave_b']=(0.5+(0.499*((0.60*Math.sin((0.814*a['time'])))+(0.40*Math.sin((1.011*a['time'])))))); a['wave_mystery']=(-0.17+(0.03*((0.6*Math.sin((0.637*a['time'])))+(0.4*Math.sin((0.949*a['time'])))))); a['mv_r']=((Math.abs(a['beat'])>0.00001)?(1):(a['ib_r'])); a['mv_b']=((Math.abs(a['beat'])>0.00001)?(a['wave_b']):(a['ib_b'])); a['q3']=a['wave_mystery']; a['q1']=a['wave_x']; a['q2']=(1-a['wave_y']); a['q2']=(a['ypos']+0.5); a['warp']=0; a['ob_r']=(1-a['wave_g']); a['ob_b']=(1-a['wave_r']); a['ob_g']=(1-a['wave_b']); a['monitor']=a['wave_y']; a['movement']=(a['movement']+(0.4*div(((a['bass']+a['bass_att'])+(0.1*pow(((a['bass']+(0.6*a['bass_att']))+(0.2*a['treb_att'])), 3))),a['fps']))); a['movement']=((Math.abs(above(a['movement'], 10000))>0.00001)?(0):(a['movement'])); a['rot']=(1*Math.sin(a['movement'])); a['cx']=a['wave_x']; a['cy']=(a['y_pos']+0.5); a['q8']=a['movement'];}());","pixel_eqs_str":"(function(){a['myy']=(a['x']-a['q1']); a['myx']=((a['y']-a['q2'])+0.1); a['dx']=((3*Math.sin((a['q8']*0.675)))*((2*a['myx'])*a['myy'])); a['dy']=((3*Math.sin((a['q8']*0.675)))*((a['myx']*a['myx'])-(a['myy']*a['myy'])));}());","init_eqs_eel":"","frame_eqs_eel":"warp = 0;\nvolume = 0.3*(bass+mid+att);\nxamptarg = if(equal(frame%15,0),min(0.25*volume*bass_att,0.5),xamptarg);\nxamp = xamp + 0.5*(xamptarg-xamp);\nxdir = if(above(abs(xpos),xamp),-sign(xpos),if(below(abs(xspeed),0.1),2*above(xpos,0)-1,xdir));\nxspeed = xspeed + xdir*xamp - xpos - xspeed*0.055*below(abs(xpos),xamp);\nxpos = xpos + 0.001*xspeed;\nyamptarg = if(equal(frame%15,0),min(0.15*volume*treb_att,0.5),yamptarg);\nyamp = yamp + 0.5*(yamptarg-yamp);\nydir = if(above(abs(ypos),yamp),-sign(ypos),if(below(abs(yspeed),0.1),2*above(ypos,0)-1,ydir));\nyspeed = yspeed + ydir*yamp - ypos - yspeed*0.055*below(abs(ypos),yamp);\nypos = ypos + 0.001*yspeed;\nbeatrate = equal(beatrate,0) + (1-equal(beatrate,0))*(below(volume,0.01) + (1-below(volume,0.01))*beatrate);\nlastbeat = lastbeat + equal(lastbeat,0)*time;\nmeanbass_att = 0.1*(meanbass_att*9 + bass_att);\npeakbass_att = max(bass_att,peakbass_att);\nbeat = above(volume,0.8)*below(peakbass_att - bass_att, 0.05*peakbass_att)*above(time - lastbeat, 0.1 + 0.5*(beatrate - 0.1));\nbeatrate = max(if(beat,if(below(time-lastbeat,2*beatrate),0.1*(beatrate*9 + time - lastbeat),beatrate),beatrate),0.1);\npeakbass_att = beat*bass_att + (1-beat)*peakbass_att*(above(time - lastbeat, 2*beatrate)*0.95 + (1-above(time - lastbeat, 2*beatrate))*0.995);\nlastbeat = beat*time + (1-beat)*lastbeat;\npeakbass_att = max(peakbass_att,1.1*meanbass_att);\n//wave_x = xpos + 0.5;\n//wave_y = 1-(ypos + 0.5);\nwave_r = 0.5 + 0.499*( 0.60*sin(0.980*time) + 0.40*sin(1.047*time) );\nwave_g = 0.5 + 0.499*( 0.60*sin(0.835*time) + 0.40*sin(1.081*time) );\nwave_b = 0.5 + 0.499*( 0.60*sin(0.814*time) + 0.40*sin(1.011*time) );\nwave_mystery = -0.17 + 0.03*(0.6*sin(0.637*time) + 0.4*sin(0.949*time));\nmv_r = if(beat, 1, ib_r);\nmv_b = if(beat, wave_b, ib_b);\n//mv_a = if(beat, 0.1, ib_a);\n//ib_a = 0.015;\nq3 = wave_mystery;\nq1 = wave_x;\nq2 = 1-wave_y;\nq2 = ypos+0.5;\nwarp=0;\n\n//q2 = 1-(ypos + 0.5);\n//q1 = 0.5;\n//q2=0.5;\nob_r = 1-wave_g;\nob_b = 1-wave_r;\nob_g = 1-wave_b;\n\nmonitor = wave_y;\nmovement =movement + 0.4*(((bass+bass_att + 0.1*pow((bass+0.6*bass_att+0.2*treb_att),3)))/fps);\nmovement = if(above(movement,10000), 0, movement);\nrot =1*sin(movement);\ncx = wave_x;\ncy = y_pos+0.5;\n\nq8 = movement;","pixel_eqs_eel":"myy = x-q1;\nmyx = y-q2+0.1;\ndx = 3*sin(q8*0.675)*(2*myx*myy);\ndy = 3*sin(q8*0.675)*((myx*myx) - (myy*myy));","warp":"#define tex sampler_Pattern_030\nsampler tex;\n\nshader_body\n{\n\nvec2 xy1=0;\nvec2 xymod=uv-.5;\n\nxy1.x=sin(time/5)*xymod.x-cos(time/5)*xymod.y;\nxy1.y=cos(time/5)*xymod.x+sin(time/5)*xymod.y;\n\nuv=xy1*3+aspect.xy;\n\n\n    float t = clamp((0.9)*3, 0.0, 1.0);\n    uv = mix(uv_orig, uv, t*0.3);\n\n    vec2 v1 = normalize(uv_orig-0.5);\n    vec2 v2 = v1.yx * vec2(1,-1);\n    \n    float z = length(texsize.zw)*450;\n\n    uv.xy += v1*texsize.zw * cos(rad*170 )/22;\n    uv.xy += v2*texsize.zw * cos(ang*170 )/22;\n\n    // sample previous frame\n    ret = texture( sampler_main, uv ).xyz;\n\n    \n    \n    // darken (decay) over time\n    ret = (ret - 0.004)*2.83;\n    // sample previous frame\n    ret = texture( sampler_pw_main, uv ).xyz;\n\n    // darken over time\n    ret -= 0.004;//*= 0.95; //or try: ret -= 0.004;\n\n\n\nret = texture(tex, uv ).xyz;\n\n\n}","comp":"#define sat saturate\nuniform sampler2D sampler_pw_noise_lq;\nfloat mask1, gmask, bsize, rad1, slot, grid, anz, bcentre;\nfloat glow, tmp, lamp, dist, bdist, b2dist, dist_c, smask, z;\nvec2 rs, rs0, uv0, uv1, uv2, uv3,uv4, rsk, bubble, dz;\nvec3 noise, bubbles;\n\nconst vec2 pix = texsize.zw, center = vec2 (q1,q2);\nconst vec3 CamPos = vec3(q4,q5,q6);\nconst float myzoom = q7;\nconst mat3 RotMat = mat3(q20,q21,q22,q23,q24,q25,q26,q27,q28);\nconst vec3 col_struc =  vec3(1,.4,.1)/4;\n\nvec3 GetBlurX (vec2 uvi, float x) {return mix (texture(sampler_main, uvi).xyz, ((texture(sampler_blur1, uvi).xyz * scale1) + bias1), x);}\nfloat GetDist(vec2 uvi)   {return 1-texture(sampler_main, uvi).xyz.b;}\nfloat GetDistB(vec2 uvi)  {return 1-((texture(sampler_blur1, uvi).xyz * scale1) + bias1).b;}\nfloat GetDistB2(vec2 uvi) {return 1-((texture(sampler_blur2, uvi).xyz * scale2) + bias2).b;}\n\nfloat MinDistB (vec2 uvi) {float tmp; vec4 nb; //##nicht ideal\n  tmp = GetDist(uvi);\n  return min(tmp,GetDistB(uvi)) ;}\n\nfloat shadow (vec2 uvi) {int n; float dark; vec2 uvc, dx;\n  dark = 0; n = 1;\n  while ( (n <= 2)) \n     {dx = .04*n * (center-.5); \n      uvc = (uvi+dx); \n      dark = dark + sat(4*(((texture(sampler_blur1, uvi).xyz * scale1) + bias1).b-((texture(sampler_blur1, uvc).xyz * scale1) + bias1).b) -dx*4); \n      n++;}\n  return (dark/2);}\n\nshader_body {\nuv = (uv-.5)*.9 + .5;\nuv0 = uv;\n\ndist = MinDistB(uv);\nbdist = mix(dist,GetDistB(uv),.2);\nfloat focus = sat(abs(GetDistB(uv)-dist_c)*3);\n\nvec2 noise = texture (sampler_noise_mq,vec2(uv.x,uv.y/4-.1*time)).xy;\nuv += .004*bdist*noise ;\nvec2 uv5 = (uv-.5)*aspect.xy  - vec2(q11,q12);\nbubbles = 0; gmask = 0; anz = 3; bcentre = 0;\nfor (int m= 1; m<= anz; m++)\n{\n  z = 1-fract(1.0/anz*m+q9); \n  uv1 = uv5/3;\n//  uv1 = (mat2(.7,.7,-.7,.7) * uv1);\n  \n  grid = 16.0*m/512;\n  \n  slot = texture(sampler_pw_noise_lq,uv1.x*grid).xyz+.5;\n  uv1.y += slot*time*.06;\n  bsize = texture(sampler_pw_noise_lq,uv1*grid).xyz;\n  rsk = fract(8*m*uv1)-.5 ;\n  dz = normalize(rsk);\n  rad1 = 3*length (rsk) *(2+m);\n  uv4 =  (rad1*rad1)*dz;\n  mask1 = clamp(20-8*rad1, 0.0, 1.0) * (bsize > .15) ;\n  gmask = gmask || mask1;\n  bubbles += vec3 (uv4,.1/(rad1)) * (1-z) * mask1;\n}\ngmask *= sat (bdist*16-8*z);\n//uv +=  .1*bubbles*gmask;\n\ndist = MinDistB(uv);\nbdist = mix(dist,GetDistB(uv),.2);\ndist_c = clamp(GetDistB2 (center),.1,.4); //center distance\n\nfloat struc = GetBlurX(uv,focus).r;\n\nret = struc* col_struc *vec3(1-bdist,1,1)+ pow(sat(struc),4) * vec3 (0,1,.2);\nvec4 noise9 = texture(sampler_noisevol_hq, \n                      ((uv.xyy*q28\n                       )*texsize.xyy*texsize_noisevol_hq.zww\n                      ).xyz*\n                      vec3(1,1,0)*0.05 + \n                      time*vec3(0,0,1)*q31\n                     ).xyz;\nif(ret.x> q26*q13         && ret.x<= q23*q11        )ret.z -= (noise9).x*.5; \nif(ret.y> q25*q11         && ret.y<= q22*q12        )ret.x -= (noise9).y*.5; \nif(ret.z> q24*q12         && ret.z<= q21*q13        )ret.y -= (noise9).z*.5; \n\n\n//distant light\nret += gmask*bubbles.z * (1+slow_roam_cos);\n\nret = mix(ret, vec3(0,.05,.1)*4*q19, sat(pow(bdist,1.5)));\n\nfloat moon = (.5/length(sin(3*(uv5))));\nret += sat(MinDistB(uv)*6-5)*moon*vec3(0,.1,.1);\n\n//Lamp\nuv3 = uv-center; \nfloat ddd = texture(sampler_main, uv).xyz.r - texture(sampler_main, (uv-.5)*(1.01)+.5).xyz.r;\nlamp = clamp(1-4*length(uv3), 0.0, 1.0) * (.1+struc+ddd);\nret += lamp*(clamp(1-bdist/2, 0.0, 1.0))*(1-0*shadow(uv)) * vec3(1,.8,.3);\n\nret = 1-exp((-6)*ret);\n//ret += shadow(uv);\n//ret = texture(sampler_main, uv0).xyz.r;\n}\n\n//-------------------------------------------\n//Written by martin\n","warp_hlsl":"#define tex sampler_Pattern_030\nsampler tex;\n\nshader_body\n{\n\nfloat2 xy1=0;\nfloat2 xymod=uv-.5;\n\nxy1.x=sin(time/5)*xymod.x-cos(time/5)*xymod.y;\nxy1.y=cos(time/5)*xymod.x+sin(time/5)*xymod.y;\n\nuv=xy1*3+aspect.xy;\n\n\n    float t = saturate((0.9)*3);\n    uv = lerp(uv_orig, uv, t*0.3);\n\n    float2 v1 = normalize(uv_orig-0.5);\n    float2 v2 = v1.yx * float2(1,-1);\n    \n    float z = length(texsize.zw)*450;\n\n    uv.xy += v1*texsize.zw * cos(rad*170 )/22;\n    uv.xy += v2*texsize.zw * cos(ang*170 )/22;\n\n    // sample previous frame\n    ret = tex2D( sampler_main, uv ).xyz;\n\n    \n    \n    // darken (decay) over time\n    ret = (ret - 0.004)*2.83;\n    // sample previous frame\n    ret = tex2D( sampler_pw_main, uv ).xyz;\n\n    // darken over time\n    ret -= 0.004;//*= 0.95; //or try: ret -= 0.004;\n\n\n\nret = tex2D(tex, uv ).xyz;\n\n\n}","comp_hlsl":"#define sat saturate\nsampler sampler_pw_noise_lq;\nfloat mask1, gmask, bsize, rad1, slot, grid, anz, bcentre;\nfloat glow, tmp, lamp, dist, bdist, b2dist, dist_c, smask, z;\nfloat2 rs, rs0, uv0, uv1, uv2, uv3,uv4, rsk, bubble, dz;\nfloat3 noise, bubbles;\n\nstatic const float2 pix = texsize.zw, center = float2 (q1,q2);\nstatic const float3 CamPos = float3(q4,q5,q6);\nstatic const float myzoom = q7;\nstatic const float3x3 RotMat = float3x3(q20,q21,q22,q23,q24,q25,q26,q27,q28);\nstatic const float3 col_struc =  float3(1,.4,.1)/4;\n\nfloat3 GetBlurX (float2 uvi, float x) {return lerp (GetPixel(uvi), GetBlur1(uvi), x);}\nfloat GetDist(float2 uvi)   {return 1-GetPixel(uvi).b;}\nfloat GetDistB(float2 uvi)  {return 1-GetBlur1(uvi).b;}\nfloat GetDistB2(float2 uvi) {return 1-GetBlur2(uvi).b;}\n\nfloat MinDistB (float2 uvi) {float tmp; float4 nb; //##nicht ideal\n  tmp = GetDist(uvi);\n  return min(tmp,GetDistB(uvi)) ;}\n\nfloat shadow (float2 uvi) {int n; float dark; float2 uvc, dx;\n  dark = 0; n = 1;\n  while ( (n <= 2)) \n     {dx = .04*n * (center-.5); \n      uvc = (uvi+dx); \n      dark = dark + sat(4*(GetBlur1(uvi).b-GetBlur1(uvc).b) -dx*4); \n      n++;}\n  return (dark/2);}\n\nshader_body {\nuv = (uv-.5)*.9 + .5;\nuv0 = uv;\n\ndist = MinDistB(uv);\nbdist = lerp(dist,GetDistB(uv),.2);\nfloat focus = sat(abs(GetDistB(uv)-dist_c)*3);\n\nfloat2 noise = tex2D (sampler_noise_mq,float2(uv.x,uv.y/4-.1*time)).xy;\nuv += .004*bdist*noise ;\nfloat2 uv5 = (uv-.5)*aspect.xy  - float2(q11,q12);\nbubbles = 0; gmask = 0; anz = 3; bcentre = 0;\nfor (int m= 1; m<= anz; m++)\n{\n  z = 1-frac(1.0/anz*m+q9); \n  uv1 = uv5/3;\n//  uv1 = mul(uv1, float2x2(.7,.7,-.7,.7));\n  \n  grid = 16.0*m/512;\n  \n  slot = tex2D(sampler_pw_noise_lq,uv1.x*grid)+.5;\n  uv1.y += slot*time*.06;\n  bsize = tex2D(sampler_pw_noise_lq,uv1*grid);\n  rsk = frac(8*m*uv1)-.5 ;\n  dz = normalize(rsk);\n  rad1 = 3*length (rsk) *(2+m);\n  uv4 =  (rad1*rad1)*dz;\n  mask1 = saturate(20-8*rad1) * (bsize > .15) ;\n  gmask = gmask || mask1;\n  bubbles += float3 (uv4,.1/(rad1)) * (1-z) * mask1;\n}\ngmask *= sat (bdist*16-8*z);\n//uv +=  .1*bubbles*gmask;\n\ndist = MinDistB(uv);\nbdist = lerp(dist,GetDistB(uv),.2);\ndist_c = clamp(GetDistB2 (center),.1,.4); //center distance\n\nfloat struc = GetBlurX(uv,focus).r;\n\nret = struc* col_struc *float3(1-bdist,1,1)+ pow(sat(struc),4) * float3 (0,1,.2);\nfloat4 noise9 = tex3D(sampler_noisevol_hq, \n                      ((uv.xyy*q28\n                       )*texsize.xyy*texsize_noisevol_hq.zww\n                      ).xyz*\n                      float3(1,1,0)*0.05 + \n                      time*float3(0,0,1)*q31\n                     );\nif(ret.x> q26*q13         && ret.x<= q23*q11        )ret.z -= (noise9).x*.5; \nif(ret.y> q25*q11         && ret.y<= q22*q12        )ret.x -= (noise9).y*.5; \nif(ret.z> q24*q12         && ret.z<= q21*q13        )ret.y -= (noise9).z*.5; \n\n\n//distant light\nret += gmask*bubbles.z * (1+slow_roam_cos);\n\nret = lerp(ret, float3(0,.05,.1)*4*q19, sat(pow(bdist,1.5)));\n\nfloat moon = (.5/length(sin(3*(uv5))));\nret += sat(MinDistB(uv)*6-5)*moon*float3(0,.1,.1);\n\n//Lamp\nuv3 = uv-center; \nfloat ddd = GetPixel(uv).r - GetPixel((uv-.5)*(1.01)+.5).r;\nlamp = saturate(1-4*length(uv3)) * (.1+struc+ddd);\nret += lamp*(saturate(1-bdist/2))*(1-0*shadow(uv)) * float3(1,.8,.3);\n\nret = 1-exp((-6)*ret);\n//ret += shadow(uv);\n//ret = GetPixel(uv0).r;\n}\n\n//-------------------------------------------\n//Written by martin\n"}