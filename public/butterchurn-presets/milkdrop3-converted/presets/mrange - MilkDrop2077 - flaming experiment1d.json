{"version":2,"baseVals":{"rating":5,"gammaadj":1.46,"decay":0.935,"echo_zoom":1.007,"echo_alpha":0.5,"echo_orient":2,"wave_mode":6,"additivewave":1,"wave_thick":1,"wave_brighten":0,"wrap":0,"brighten":1,"darken":1,"wave_a":3.2,"wave_scale":1.768,"wave_smoothing":0.63,"wave_mystery":-1,"modwavealphastart":0.71,"modwavealphaend":1.3,"warpanimspeed":1.459,"warpscale":2.007,"fshader":1,"zoom":0.9999,"warp":0.01,"sx":0.9999,"ob_size":0.105,"ib_r":0.7,"ib_g":0,"ib_b":1,"mv_x":64,"mv_y":1.248,"mv_l":5,"mv_b":0,"mv_a":0},"shapes":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['maxpts'] = 0; a['n'] = 0; a['z'] = 0; a['tvol'] = 0; a['newpts'] = 0; a['sfree'] = 0; a['pbase1'] = 0; a['s'] = 0; a['q12'] = 0; a['t1'] = 0; a['age'] = 0; a['tht'] = 0; a['dz0'] = 0; a['scale'] = 0; a['q15'] = 0; a['dt'] = 0; a['smooth'] = 0; a['p'] = 0; a['q1'] = 0; a['r1'] = 0; a['j'] = 0; a['q9'] = 0; a['r02'] = 0; a['pbase2'] = 0; a['k1'] = 0; a['q11'] = 0; a['ibase'] = 0; a['pi'] = 0; a['pbase'] = 0; a['q10'] = 0; a['dist0'] = 0; a['bal'] = 0; a['dx0'] = 0; a['q4'] = 0; a['start'] = 0; a['r01'] = 0; a['delpts'] = 0; a['ivol'] = 0; a['gf'] = 0; a['sz'] = 0; a['pfree'] = 0; a['i'] = 0; a['vol'] = 0; a['p1'] = 0; a['prog'] = 0; a['len'] = 0; a['dy0'] = 0; a['q3'] = 0; a['vol_'] = 0; a['dec'] = 0; a['maxstrings'] = 0; a['q32'] = 0; a['maxssize'] = 0; a['phi'] = 0; a['pvol'] = 0; a['recsize'] = 0; a['q8'] = 0; a['n']=0; for(var mdparser_idx510=0;mdparser_idx510<100000;mdparser_idx510++){a['megabuf'][Math.floor(a['n'])]=0; a['gmegabuf'][Math.floor(a['n'])]=0; a['n']+=1;} a['n']=90000; a['t']=0; for(var mdparser_idx511=0;mdparser_idx511<5000;mdparser_idx511++){a['t']+=div((2+Math.cos(div(a['n'],21))),5); a['megabuf'][Math.floor(a['n'])]=(Math.sin(a['t'])*0.5); a['n']+=1;} a['fov']=1; a['reg05']=a['fov']; a['maxstrings']=150; a['maxssize']=37; a['maxpts']=1600; a['maxshapes']=300; a['pfree']=a['maxpts']; a['sfree']=a['maxstrings']; a['recsize']=8; a['reg01']=a['recsize']; a['dist0']=0.8; a['reg02']=a['dist0']; a['pi']=3.1416; a['sptr']=0; a['r01']=rand(12); a['r02']=rand(12);}())","frame_eqs_str":"(function(){a['dt']=div(1,a['fps']); a['vol']=div(sqrt(((a['bass_att']+a['mid_att'])+a['treb_att'])),3); a['vol_']=((a['vol_']*0.9)+(0.1*a['vol'])); a['gf']=div((0.35*a['vol']),a['maxssize']); a['prog']+=((a['vol']*30)*a['dt']); a['s']=0; a['sfree']=a['maxstrings']; a['pfree']=a['maxpts']; for(var mdparser_idx512=0;mdparser_idx512<a['maxstrings'];mdparser_idx512++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+3))]>0)?1:0))>0.00001)?((function(){a['sfree']-=1; return a['pfree']-=a['megabuf'][Math.floor((a['ibase']+2))];})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx513=0;mdparser_idx513<a['maxstrings'];mdparser_idx513++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((((((Math.abs((a['megabuf'][Math.floor((a['ibase']+3))])-(0))<0.00001)?1:0)&&((a['vol']>(a['vol_']*1))?1:0))?1:0)&&((rand(100)<20)?1:0))?1:0))>0.00001)?((function(){a['sfree']-=1; a['tht']=(rand(1)*(2.9+((a['vol']>(a['vol_']*1.7))?1:0))); a['phi']=(((rand(1)-0.5)*4)+div(a['pi'],2)); a['pbase']=(5000+((a['s']*a['maxssize'])*a['recsize'])); a['megabuf'][Math.floor(a['ibase'])]=0; a['megabuf'][Math.floor((a['ibase']+1))]=0; a['megabuf'][Math.floor((a['ibase']+2))]=0; a['megabuf'][Math.floor((a['ibase']+3))]=1; a['megabuf'][Math.floor((a['ibase']+4))]=(Math.sin(a['tht'])*Math.cos(a['phi'])); a['megabuf'][Math.floor((a['ibase']+5))]=(Math.sin(a['tht'])*Math.sin(a['phi'])); return a['megabuf'][Math.floor((a['ibase']+6))]=-Math.abs(Math.cos(a['tht']));})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx514=0;mdparser_idx514<a['maxstrings'];mdparser_idx514++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+3))]>0)?1:0))>0.00001)?((function(){a['megabuf'][Math.floor(a['ibase'])]+=(a['dt']*rand(2)); a['age']=a['megabuf'][Math.floor(a['ibase'])]; a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['newpts']=Math.floor((div(((5*a['vol'])*a['maxssize']),40)*((a['age']<0.7)?1:0))); a['newpts']=Math.max(0, Math.min(a['newpts'], Math.min(a['pfree'], ((a['maxssize']-a['start'])-a['len'])))); a['dx0']=a['megabuf'][Math.floor((a['ibase']+4))]; a['dy0']=a['megabuf'][Math.floor((a['ibase']+5))]; a['dz0']=a['megabuf'][Math.floor((a['ibase']+6))]; a['p']=(a['start']+a['len']); for(var mdparser_idx515=0;mdparser_idx515<a['newpts'];mdparser_idx515++){a['pbase']=(5000+((a['p']+(a['s']*a['maxssize']))*a['recsize'])); a['k1']=((((Math.abs(((Math.abs((mod(a['s'],3))-(0))<0.00001)?1:0))>0.00001)?(a['p']):((((a['p']-a['start'])-a['len'])*16)))+3)+div(a['s'],16)); ((Math.abs(((Math.abs((mod(a['frame'],5))-(0))<0.00001)?1:0))>0.00001)?(a['k1']=(20*a['vol'])):(0)); a['megabuf'][Math.floor(a['pbase'])]=((a['k1']*a['dx0'])*a['gf']); a['megabuf'][Math.floor((a['pbase']+1))]=((a['k1']*a['dy0'])*a['gf']); a['megabuf'][Math.floor((a['pbase']+2))]=((a['k1']*a['dz0'])*a['gf']); a['p']+=1;} a['megabuf'][Math.floor((a['ibase']+2))]+=a['newpts']; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['pfree']-=a['newpts']; a['ivol']=((Math.abs(((a['vol']<0.35)?1:0))>0.00001)?(3):(((Math.abs(((a['vol']<0.5)?1:0))>0.00001)?(2):(1)))); a['delpts']=(Math.min(((a['megabuf'][Math.floor(a['ibase'])]>0.7)?1:0), a['len'])*((Math.abs((mod(a['frame'],a['ivol']))-(0))<0.00001)?1:0)); a['megabuf'][Math.floor((a['ibase']+1))]=(a['megabuf'][Math.floor((a['ibase']+1))]+a['delpts']); a['megabuf'][Math.floor((a['ibase']+2))]-=a['delpts']; a['pfree']+=a['delpts']; return ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+2))]<=0)?1:0))>0.00001)?(a['megabuf'][Math.floor((a['ibase']+3))]=0):(0));})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx516=0;mdparser_idx516<a['maxstrings'];mdparser_idx516++){a['ibase']=(a['s']*a['recsize']); a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; ((Math.abs(((a['len']>0)?1:0))>0.00001)?((function(){a['p']=a['start']; a['i']=0; for(var mdparser_idx517=0;mdparser_idx517<a['len'];mdparser_idx517++){a['pbase']=(5000+((mod(a['p'],a['maxssize'])+(a['s']*a['maxssize']))*a['recsize'])); a['scale']=(pow(div(a['i'],a['len']), 2)*0.005); a['r1']=((pow(a['megabuf'][Math.floor(a['pbase'])], 2)+pow(a['megabuf'][Math.floor((a['pbase']+1))], 2))+pow(a['megabuf'][Math.floor((a['pbase']+2))], 2)); a['scale']*=Math.min((sqrt(a['r1'])*10), 1); a['p1']=(5000-Math.floor(((3*a['p'])+a['prog']))); a['megabuf'][Math.floor(a['pbase'])]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*57)),5000)))]*a['scale']); a['megabuf'][Math.floor((a['pbase']+1))]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*91)),5000)))]*a['scale']); a['megabuf'][Math.floor((a['pbase']+2))]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*113)),5000)))]*a['scale']); a['p']+=1; a['i']+=1;} a['p']=(a['start']+1); a['smooth']=8; a['sz']=div(1,(1.93+a['smooth'])); return for(var mdparser_idx518=0;mdparser_idx518<(a['len']-2);mdparser_idx518++){a['pbase']=(5000+((a['p']+(a['s']*a['maxssize']))*a['recsize'])); a['pbase1']=(5000+(((a['p']-1)+(a['s']*a['maxssize']))*a['recsize'])); a['pbase2']=(5000+(((a['p']+1)+(a['s']*a['maxssize']))*a['recsize'])); a['megabuf'][Math.floor(a['pbase'])]=((((a['smooth']*a['megabuf'][Math.floor(a['pbase'])])+a['megabuf'][Math.floor(a['pbase1'])])+a['megabuf'][Math.floor(a['pbase2'])])*a['sz']); a['megabuf'][Math.floor((a['pbase']+1))]=((((a['smooth']*a['megabuf'][Math.floor((a['pbase']+1))])+a['megabuf'][Math.floor((a['pbase1']+1))])+a['megabuf'][Math.floor((a['pbase2']+1))])*a['sz']); a['megabuf'][Math.floor((a['pbase']+2))]=((((a['smooth']*a['megabuf'][Math.floor((a['pbase']+2))])+a['megabuf'][Math.floor((a['pbase1']+2))])+a['megabuf'][Math.floor((a['pbase2']+2))])*a['sz']); a['p']+=1;}})()):(0)); a['s']+=1;} a['n']=0; for(var mdparser_idx519=0;mdparser_idx519<a['maxpts'];mdparser_idx519++){a['gmegabuf'][Math.floor((a['n']+6))]=0; a['n']+=a['recsize'];} a['s']=0; a['i']=0; for(var mdparser_idx520=0;mdparser_idx520<a['maxstrings'];mdparser_idx520++){a['ibase']=(a['s']*a['recsize']); a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['p']=a['start']; a['j']=0; for(var mdparser_idx521=0;mdparser_idx521<(a['len']+1);mdparser_idx521++){a['pbase']=(5000+((mod(a['p'],a['maxssize'])+(a['s']*a['maxssize']))*a['recsize'])); a['z']=(a['megabuf'][Math.floor((a['pbase']+2))]+a['dist0']); a['gmegabuf'][Math.floor((a['i']*a['recsize']))]=a['megabuf'][Math.floor(a['pbase'])]; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+1))]=a['megabuf'][Math.floor((a['pbase']+1))]; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+2))]=a['z']; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+3))]=((Math.abs(((a['z']>0)?1:0))>0.00001)?(div(0.027,a['z'])):(0)); a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+5))]=1; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+6))]=((((a['z']>0.3)?1:0)*((a['j']>1)?1:0))*((a['j']<(a['len']-1))?1:0)); ((Math.abs(((a['j']>1)?1:0))>0.00001)?(a['p']+=1):(0)); a['i']+=1; a['j']+=1;} a['s']+=1;} a['tvol']=((a['tvol']*0.8)+(0.2*(a['vol']-a['vol_']))); a['n']=50030; for(var mdparser_idx522=0;mdparser_idx522<30;mdparser_idx522++){a['gmegabuf'][Math.floor(a['n'])]=a['gmegabuf'][Math.floor((a['n']-1))]; a['n']-=1;} a['gmegabuf'][Math.floor(50000)]=a['tvol']; a['dec']=((Math.abs(((a['vol']>a['pvol'])?1:0))>0.00001)?(0.5):((1-((a['dt']*40)*0.05)))); a['pvol']=((a['pvol']*a['dec'])+(a['vol']*(1-a['dec']))); a['q1']=a['pvol']; a['q10']=0.5; a['q11']=0.5; a['q32']=a['aspecty']; a['q3']=(a['gmegabuf'][Math.floor(50000)]+1); a['q4']=(a['gmegabuf'][Math.floor(50005)]+1); a['t1']=(div(a['time'],12)+a['r01']); a['q15']=(0.5-(0.35*Math.tan(a['t1']))); a['q8']=((1.7+Math.sin(((a['time']*0.02)+a['r02'])))*0.16); a['q9']=((1.7+Math.sin(((a['time']*0.0157)-a['r02'])))*0.16); a['bal']=Math.min(0.85, Math.max(0.15, (a['bal']+((a['dt']*0.1)*Math.atan(((a['treb']-a['bass'])-((a['bal']-0.5)*0.1))))))); a['q12']=a['bal']; a['monitor']=a['q12'];}())","pixel_eqs_str":"","init_eqs_eel":"n = 0;\nloop (100000,megabuf(n)=0;gmegabuf(n)=0;n += 1;);\n\n//rand chain\nn = 90000; t=0; loop (5000, t+= (2+cos(n/21))/5; megabuf(n)= sin(t)*0.5; n+= 1);\n\n\nfov = 1; reg05 = fov;\nmaxstrings = 150;\nmaxssize   = 37; //Pkte pro String\nmaxpts     = 1600;\nmaxshapes  = 300;\npfree = maxpts; //freie Pkte\nsfree = maxstrings;  //freie Strings\n\nrecsize = 8; reg01 = recsize; //pro Punkt\ndist0 =  0.8; reg02 = dist0;\npi=3.1416;\n\n\n//bei 0 starten die String-Inforecords\n//0 : Age\n//1 : start index\n//2 : Len\n//3: Alive\n//4,5,6: dx0,dy0,dz0\n\n//bei 5000 starten die Punkt-records\n//es folgen die ppstring Punkte; pro punkt\n  //0..2: Pos. x,y,z\n// ende pro punkt\n\n//2D-Records in gmegabuf\n  //0..2: Pos. x,y,z\n  //3: rad\n  //5: a\n  //6: mask\n\n//Shape-Records in gmegabuf, optional\n  //0..2: r0, theta, phi\n  //3: speed\n  //4,5,6: x,y,z\n  //\nsPtr = 0;\nr01 = rand(12);\nr02 = rand(12);","frame_eqs_eel":"dt = 1/fps;\nvol = sqrt (bass_att+mid_att+treb_att)/3; vol_ = vol_*0.9 + 0.1*vol; gf = 0.35*vol/maxssize;\nprog += vol*30*dt; \n\n// Count sfree and pfree; pfree = len=0\ns = 0; sfree = maxstrings; pfree = maxpts;\nloop (maxstrings, ibase = s*recsize; if (megabuf(ibase+3) > 0, sfree -=1; pfree -=megabuf(ibase+2), 0); s+= 1);\n\ns = 0; loop (maxstrings, //NEW STRING ?\n  ibase = s*recsize;\n  if ((megabuf(ibase+3)==0) && (vol > vol_*1) && (rand(100) < 20),\n    sfree -= 1;\n    tht = rand(1)*(2.9 + (vol>vol_*1.7)); phi = (rand(1)-0.5)*4+pi/2;;\n    pbase = 5000 + (s*maxssize)*recsize; //erster Punkt startet bei 0\n    megabuf (ibase  ) = 0;//Age\n    megabuf (ibase+1) = 0;//start ind\n    megabuf (ibase+2) = 0;//len  \n    megabuf (ibase+3) = 1;// am Leben\n    megabuf (ibase+4) = sin(tht)*cos(phi);\n    megabuf (ibase+5) = sin(tht)*sin(phi);\n    megabuf (ibase+6) = -abs(cos(tht)); \n  ,0); //END NEW STRING\ns+=1;);\n\ns = 0; loop (maxstrings, //GROW and SHRINK\n  ibase = s*recsize;\n  if (megabuf(ibase+3) > 0, //am Leben ?\n    megabuf(ibase  ) += dt*rand(2) ; //Age\n//EXPAND\n    age   = megabuf (ibase);\n    start = megabuf (ibase+1);\n    len   = megabuf (ibase+2);\n    newpts = int (5*vol*maxssize/40*(age < 0.7)) ; \n    newpts = max (0, min (newpts, min (pfree,maxssize-start-len))); \n    dx0 = megabuf (ibase+4);\n    dy0 = megabuf (ibase+5);\n    dz0 = megabuf (ibase+6);\n    p = start+len;\n    loop (newpts,\n      pbase  = 5000 + (p+s*maxssize)*recsize;\nk1 = if (s%3==0, p, (p-start-len)*16)+3+s/16;\nif (frame%5==0,k1 = 20*vol,0);\n//k1 = max(k1,p);\n      megabuf (pbase) = k1*dx0*gf; megabuf (pbase+1) = k1*dy0*gf; megabuf (pbase+2) = k1*dz0*gf;      \n      p+=1; ); \n    megabuf(ibase +2) += newpts;  len   = megabuf (ibase+2);  pfree -= newpts;\n//SHRINK\n    ivol = if (vol<0.35,3, if (vol<0.5,2,1));\n    delpts = min ((megabuf(ibase)>.7),len) * (frame%ivol==0);\n    megabuf(ibase+1) = (megabuf(ibase+1)+delpts); \n    megabuf(ibase+2) -= delpts;  pfree += delpts;\n    if (megabuf(ibase+2) <= 0, megabuf(ibase+3)=0, 0);\n  ,0);\ns+=1);\n\n//MOVE\ns = 0; loop (maxstrings,\n  ibase = s*recsize;  start = megabuf (ibase+1); len = megabuf (ibase+2);\n  if (len > 0, \n    p=start; i=0;\n    loop (len,\n      pbase  = 5000 + (p%maxssize+s*maxssize)*recsize;\n      scale = pow(i/len,2)*0.005 ;\n      r1 = pow(megabuf(pbase),2)+pow(megabuf(pbase+1),2)+pow(megabuf(pbase+2),2);\n      scale *= min(sqrt(r1)*10,1) ; //##mit vol skalieren\n      p1 = 5000-int(3*p+prog);\n      megabuf (pbase)   += megabuf(90000+(p1+s*57)%5000)*scale;      \n      megabuf (pbase+1) += megabuf(90000+(p1+s*91)%5000)*scale;      \n      megabuf (pbase+2) += megabuf(90000+(p1+s*113)%5000)*scale;       \n      p+=1; i+=1;   ); \n\n//STRAIGHTEN\n    p=start+1; smooth = 8;\n    sz = 1/(1.93+smooth);\n    loop (len-2,\n      pbase  =  5000 + (p    +s*maxssize)*recsize;\n      pbase1  = 5000 + ((p-1)+s*maxssize)*recsize;\n      pbase2  = 5000 + ((p+1)+s*maxssize)*recsize;\n      megabuf (pbase  ) = (smooth*megabuf(pbase  ) +megabuf(pbase1  )+megabuf(pbase2 ))*sz;      \n      megabuf (pbase+1) = (smooth*megabuf(pbase+1) +megabuf(pbase1+1)+megabuf(pbase2+1))*sz;      \n      megabuf (pbase+2) = (smooth*megabuf(pbase+2) +megabuf(pbase1+2)+megabuf(pbase2+2))*sz;      \n     p+=1; ); \n\n  ,0);\ns+=1);\n\n//Projektion waves\nn=0; loop (maxpts, gmegabuf(n+6)=0; n+=recsize); \ns = 0; i = 0;\nloop (maxstrings,\n  ibase = s*recsize;\n  start = megabuf (ibase+1);\n  len   = megabuf (ibase+2);\n  p = start;  j=0;\n//  if (len==0, len=-1, 0);\n  loop (len+1, //ersten Pkt verdoppeln wegen waves\n    pbase = 5000 + (p%maxssize + s*maxssize)*recsize;\n    z    = megabuf (pbase+2)+dist0;\n    gmegabuf (i*recsize)   = megabuf(pbase  );    \n    gmegabuf (i*recsize+1) = megabuf(pbase+1);    \n    gmegabuf (i*recsize+2) = z;    \n    gmegabuf (i*recsize+3) = if (z>0, 0.027/z, 0) ;    //rad\n    gmegabuf (i*recsize+5) = 1; //a\n    gmegabuf (i*recsize+6) = (z>0.3)*(j>1) * (j<len-1); //mask\n    if (j>1, p += 1,0);  i += 1; j+=1;\n  );  \n  s+=1;\n);\n\n//Vol delay chain \ntvol = tvol*0.8 + 0.2*(vol-vol_);\nn = 50030; loop (30, gmegabuf (n) = gmegabuf (n-1); n -= 1; ); gmegabuf (50000) = tvol;\n\n\ndec = if (vol>pvol,0.5, 1-dt*40*0.05);\npvol = pvol*dec + vol*(1-dec);\nq1 = pvol;\n\n//Zentrum\nq10 = 0.5; \nq11 = 0.5;\nq32 = aspecty;\n\nq3 = gmegabuf(50000)+1; \nq4 = gmegabuf(50005)+1; \n\n//planet pos\nt1 = time/12 +r01;\nq15 = 0.5-0.35*tan(t1);\n//q16 = 0.5- (0.05+0.24*cos(t1) * (0.7+0.3*sin(t1/7))); \n\nq8 = (1.7+sin(time*.02+r02))*.16;\nq9 = (1.7+sin(time*.0157-r02))*.16;\n\nbal = min(0.85,max(0.15,bal+ dt*0.1 * atan(treb -bass - (bal-0.5)*0.1)));\nq12 = bal;\n\nmonitor = q12;","pixel_eqs_eel":"","warp":"shader_body{\n\n//Shader from https://www.shadertoy.com/view/wX33zX\n//Ported to MilkDrop by MilkDrop2077\n//license: CC0 \n\n    vec3 o = vec3(0,0,0);\n    float t = time*3;\n    vec2 r = vec2(1.0, 1.0/aspect.x);\n    \n    for(float i=0.0, z=0.0, d=0.0, j=0.0; i<34.0; i+=1.0) {\n        // Ray setup\n        vec2 centered_uv = (uv-0.5)*r*1.5;\n        vec3 p = z*normalize(vec3(centered_uv,1.0));\n        p.z -= 4.0;\n        vec3 P = p;\n        \n        // Space transformation\n        float angle = P.y*P.y/4.0 + 3.0*P.y - t;\n        mat2 rot = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        p.xz = vec2(p.x*rot[0][0] + p.z*rot[0][1], p.x*rot[1][0] + p.z*rot[1][1]);\n        p.x += sin(0.1*t - p.x);\n        \n        // Turbulence (fractal noise)\n        float turbulence = 12.0;\n        for(j=8.0; j>5.0; j-=1.0) {\n            turbulence /= 0.8+q1;\n            p += 0.1*(p.y+2.0)*cos(p.zxy*turbulence - 3.0*t)/turbulence;\n        }\n        \n        // Distance field\n        j = length(p-P);\n        p = abs(p*2);\n        d = abs(min(\n            max(p.z-0.1, p.x-1.0-0.3*P.y),\n            max(p.x-0.2, p.z-1.0-0.3*P.y)\n        )) + 9e-3;\n        \n        // Color calculation\n        vec3 P_color = 1.0 + sin(0.5 + j - P.y + P.z + vec3(2,3,4));\n        \n        // Volumetric rendering\n        o += P_color.x/d * P_color;\n        \n        // Ray marching step\n        z += d/8.0;\n    }\n    \n    // Tone mapping with music reactivity\n    float brightness = 0.8 + 0.2*bass_att;\n    ret = vec4(tanh(o/2e3 * brightness), 1.0);\n}","comp":"shader_body\n{//MilkDrop3 Rotate Mode:\nuv = uv.yx;\n\n    vec2 d = texsize.zw*4;\n    vec3 dx = ( ((texture(sampler_blur1, uv+vec2(1,0)*d).xyz * scale1) + bias1)-((texture(sampler_blur1, uv-vec2(1,0)*d).xyz * scale1) + bias1) );\n    vec3 dy = ( ((texture(sampler_blur1, uv+vec2(0,1)*d).xyz * scale1) + bias1)-((texture(sampler_blur1, uv-vec2(0,1)*d).xyz * scale1) + bias1) );\nvec2 uv_bg = uv - vec2(dx.y,dy.y)*texsize.zw*16;\nret = (((texture(sampler_blur2, uv_bg).xyz * scale2) + bias2)-((texture(sampler_blur1, uv_bg).xyz * scale1) + bias1)*1+texture(sampler_main, uv_bg).xyz*0.9 + (-dx.y + dy.y)*0.4).y*0.8*vec3(1,1.1,1.2);\n\nvec2 uv_m = uv - vec2(dx.x,dy.x)*texsize.zw*8;\nret = mix(ret, 2*vec3(0,0.5,1), ((texture(sampler_blur3, uv_m - vec2(dx.y,dy.y)*0.4).xyz * scale3) + bias3).x*0.4);\nret = mix(ret, 2*vec3(0.5,1,1), ((texture(sampler_blur2, uv_m - vec2(dx.y,dy.y)*0.2).xyz * scale2) + bias2).x*0.4);\nret = mix(ret, 2*vec3(1,1,0.8), ((texture(sampler_blur1, uv_m - vec2(dx.y,dy.y)*0.1).xyz * scale1) + bias1).x*0.2);\n//ret = mix(ret, vec3(0.5,0,1), texture(sampler_main, uv_m).xyz.x*0.4);\n//MilkDrop3 Color Mode:\nret /= vec3(0.0,-3.0,-1.6);\n//MilkDrop3 Blow Mode:\nvec3 avg_col = ((texture(sampler_blur2, uv).xyz * scale2) + bias2);ret = abs(avg_col - ret)*2;\n//MilkDrop3 Burn Mode:\nret = mix(ret,2,texture(sampler_main, uv).xyz.z*1.36);\n}","warp_hlsl":"shader_body{\n\n//Shader from https://www.shadertoy.com/view/wX33zX\n//Ported to MilkDrop by MilkDrop2077\n//license: CC0 \n\n    float3 o = float3(0,0,0);\n    float t = time*3;\n    float2 r = float2(1.0, 1.0/aspect.x);\n    \n    for(float i=0.0, z=0.0, d=0.0, j=0.0; i<34.0; i+=1.0) {\n        // Ray setup\n        float2 centered_uv = (uv-0.5)*r*1.5;\n        float3 p = z*normalize(float3(centered_uv,1.0));\n        p.z -= 4.0;\n        float3 P = p;\n        \n        // Space transformation\n        float angle = P.y*P.y/4.0 + 3.0*P.y - t;\n        float2x2 rot = float2x2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        p.xz = float2(p.x*rot[0][0] + p.z*rot[0][1], p.x*rot[1][0] + p.z*rot[1][1]);\n        p.x += sin(0.1*t - p.x);\n        \n        // Turbulence (fractal noise)\n        float turbulence = 12.0;\n        for(j=8.0; j>5.0; j-=1.0) {\n            turbulence /= 0.8+q1;\n            p += 0.1*(p.y+2.0)*cos(p.zxy*turbulence - 3.0*t)/turbulence;\n        }\n        \n        // Distance field\n        j = length(p-P);\n        p = abs(p*2);\n        d = abs(min(\n            max(p.z-0.1, p.x-1.0-0.3*P.y),\n            max(p.x-0.2, p.z-1.0-0.3*P.y)\n        )) + 9e-3;\n        \n        // Color calculation\n        float3 P_color = 1.0 + sin(0.5 + j - P.y + P.z + float3(2,3,4));\n        \n        // Volumetric rendering\n        o += P_color.x/d * P_color;\n        \n        // Ray marching step\n        z += d/8.0;\n    }\n    \n    // Tone mapping with music reactivity\n    float brightness = 0.8 + 0.2*bass_att;\n    ret = float4(tanh(o/2e3 * brightness), 1.0);\n}","comp_hlsl":"shader_body\n{//MilkDrop3 Rotate Mode:\nuv = uv.yx;\n\n    float2 d = texsize.zw*4;\n    float3 dx = ( GetBlur1(uv+float2(1,0)*d)-GetBlur1(uv-float2(1,0)*d) );\n    float3 dy = ( GetBlur1(uv+float2(0,1)*d)-GetBlur1(uv-float2(0,1)*d) );\nfloat2 uv_bg = uv - float2(dx.y,dy.y)*texsize.zw*16;\nret = (GetBlur2(uv_bg)-GetBlur1(uv_bg)*1+GetPixel(uv_bg)*0.9 + (-dx.y + dy.y)*0.4).y*0.8*float3(1,1.1,1.2);\n\nfloat2 uv_m = uv - float2(dx.x,dy.x)*texsize.zw*8;\nret = lerp(ret, 2*float3(0,0.5,1), GetBlur3(uv_m - float2(dx.y,dy.y)*0.4).x*0.4);\nret = lerp(ret, 2*float3(0.5,1,1), GetBlur2(uv_m - float2(dx.y,dy.y)*0.2).x*0.4);\nret = lerp(ret, 2*float3(1,1,0.8), GetBlur1(uv_m - float2(dx.y,dy.y)*0.1).x*0.2);\n//ret = lerp(ret, float3(0.5,0,1), GetPixel(uv_m).x*0.4);\n//MilkDrop3 Color Mode:\nret /= float3(0.0,-3.0,-1.6);\n//MilkDrop3 Blow Mode:\nfloat3 avg_col = GetBlur2(uv);ret = abs(avg_col - ret)*2;\n//MilkDrop3 Burn Mode:\nret = lerp(ret,2,GetPixel(uv).z*1.36);\n}"}