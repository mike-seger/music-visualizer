{"version":2,"baseVals":{"rating":4,"gammaadj":1.98,"decay":0.5,"echo_zoom":1,"echo_alpha":0.5,"echo_orient":3,"wave_mode":6,"wrap":0,"darken":1,"wave_a":0.001,"wave_scale":0.166,"wave_smoothing":0,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0,"wave_g":0,"wave_b":0,"ob_size":0,"ob_a":1,"ib_size":0,"ib_r":0,"ib_g":0,"ib_b":0,"mv_a":0,"b1ed":0},"shapes":[{"baseVals":{"textured":1,"x":0.75,"y":0.75,"rad":0.7418,"tex_zoom":0.22746,"g":1,"b":1,"r2":1,"b2":1,"border_r":0,"border_g":0,"border_a":0,"enabled":0},"init_eqs_str":"(function(){tex_saw = 0.4;}())","frame_eqs_str":"(function(){ang = q1*0.2;\n\ntex_capture = above(q3,2);\ntex_zoom = 0.6;}())","init_eqs_eel":"(function(){tex_saw = 0.4;}())","frame_eqs_eel":"(function(){ang = q1*0.2;\n\ntex_capture = above(q3,2);\ntex_zoom = 0.6;}())"},{"baseVals":{"textured":1,"x":0.25,"y":0.75,"rad":0.7418,"tex_zoom":0.22746,"g":1,"b":1,"r2":1,"b2":1,"border_r":0,"border_g":0,"border_a":0,"enabled":0},"init_eqs_str":"(function(){tex_saw = 0.4;}())","frame_eqs_str":"(function(){ang = q1*0.2;\n//x = 0.5 + 0.2*sin(q2);\n//y = 0.5 + (0.3*sin(q2));\n\ntex_capture = above(q3,2);\ntex_zoom = 0.6;}())","init_eqs_eel":"(function(){tex_saw = 0.4;}())","frame_eqs_eel":"(function(){ang = q1*0.2;\n//x = 0.5 + 0.2*sin(q2);\n//y = 0.5 + (0.3*sin(q2));\n\ntex_capture = above(q3,2);\ntex_zoom = 0.6;}())"},{"baseVals":{"sides":100,"rad":0.22167,"border_a":1,"enabled":0},"init_eqs_str":"","frame_eqs_str":"(function(){border_r = 0.5 + 0.5*sin(q1*10);}())","init_eqs_eel":"","frame_eqs_eel":"(function(){border_r = 0.5 + 0.5*sin(q1*10);}())"},{"baseVals":{"enabled":1,"sides":100,"g":1,"b":1,"r2":1,"b2":1,"border_a":0},"init_eqs_str":"(function(){a['q3'] = 0; a['xx'] = 0; a['yy'] = 0; a['radi'] = 0; a['q1'] = 0; }())","frame_eqs_str":"(function(){a['a']=above(a['q3'], 2); a['a2']=(above(a['q3'], 2)*0.8); a['xx']=((Math.abs(above(a['q3'], 6))>0.00001)?(a['xx']):((rand(100)*0.01))); a['yy']=((Math.abs(above(a['q3'], 6))>0.00001)?(a['yy']):((rand(100)*0.01))); a['radi']=((Math.abs(above(a['q3'], 5))>0.00001)?(a['radi']):((rand(100)*0.01))); a['rad']=a['radi']; a['x']=a['xx']; a['y']=a['yy']; a['r']=((0.5+(0.5*Math.sin((a['q1']*1.22))))+0.1); a['g']=(0.4+(0.4*Math.sin((a['q1']*1.307)))); a['b']=(0.4+(0.4*Math.sin((a['q1']*1.959)))); a['r2']=((0.5+(0.5*Math.sin((a['q1']*1.622))))+0.1); a['g2']=(0.4+(0.4*Math.sin((a['q1']*1.507)))); a['b2']=(0.4+(0.4*Math.sin((a['q1']*1.6559))));}())","init_eqs_eel":"","frame_eqs_eel":"a = above(q3,2);\na2 = above(q3,2)*0.8;\n\nxx = if(above(q3,6),xx,rand(100)*0.01);\nyy = if(above(q3,6),yy,rand(100)*0.01);\nradi = if(above(q3,5),radi,rand(100)*0.01);\n\nrad = radi;\n\nx = xx;\ny = yy;\n\n\nr = 0.5 + 0.5*sin(q1*1.22) + 0.1;\ng = 0.4 + 0.4*sin(q1*1.307);\nb = 0.4 + 0.4*sin(q1*1.959);\n\n\nr2 = 0.5 + 0.5*sin(q1*1.622) + 0.1;\ng2 = 0.4 + 0.4*sin(q1*1.507);\nb2 = 0.4 + 0.4*sin(q1*1.6559);"}],"waves":[{"baseVals":{"enabled":1,"thick":1,"additive":1,"scaling":2.0231,"smoothing":0},"init_eqs_str":"(function(){a['tt3'] = 0; a['tt2'] = 0; a['tt1'] = 0; a['d'] = 0; a['t2']=0; a['t3']=0; a['t4']=0; a['cl']=0;}())","frame_eqs_str":"","point_eqs_str":"(function(){a['tt3']=((a['tt3']*0.6)+(a['value1']*1)); a['tt2']=((a['tt2']*0.7)+(a['tt3']*0.2)); a['tt1']=((a['tt1']*0.8)+(a['tt2']*0.1)); a['d']=((a['d']*0.9)+(a['tt1']*0.2)); a['y']=(0.5+(((a['d']*a['sample'])*(1-a['sample']))*6)); a['x']=(-0.05+(a['sample']*1.1));}())","init_eqs_eel":"t2 = 0;\nt3 = 0;\nt4 = 0;\ncl = 0;","frame_eqs_eel":"","point_eqs_eel":"tt3 = tt3*0.6 + (value1)*1;\ntt2 = tt2*0.7 + tt3*0.2;\ntt1 = tt1*0.8 + tt2*0.1;\nd = d*0.9 + tt1*0.2;\n\ny = 0.5 + d*sample*(1-sample)*6;\nx =  -0.05 + sample*1.1;"},{"baseVals":{"enabled":1,"usedots":1,"thick":1},"init_eqs_str":"(function(){a['n'] = 0; a['yq'] = 0; a['xp'] = 0; a['xs'] = 0; a['q25'] = 0; a['yp'] = 0; a['xq'] = 0; a['flip'] = 0; a['ca'] = 0; a['ys'] = 0; a['sa'] = 0; a['zq'] = 0; a['phs'] = 0; a['ang'] = 0; a['tm'] = 0; a['zp'] = 0; }())","frame_eqs_str":"","point_eqs_str":"(function(){a['n']=(a['sample']*6.283); a['phs']=(-a['sample']*0.2); a['tm']=(a['q25']+a['phs']); a['flip']=(a['flip']+1); a['flip']=(a['flip']*below(a['flip'], 2)); a['xp']=0; a['yp']=((((a['flip']*0.05)*a['sample'])+(((Math.sin(a['tm'])*0.5)+0.5)*0.2))+0.05); a['zp']=0; a['ang']=((Math.sin((a['tm']*2))*0.5)+0.5); a['xq']=a['xp']; a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['yq']=((a['yp']*a['sa'])+(a['zp']*a['ca'])); a['zq']=((a['yp']*a['ca'])-(a['zp']*a['sa'])); a['yq']=a['yp']; a['zq']=a['zp']; a['ang']=(a['tm']*8); a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['xp']=((a['xq']*a['sa'])+(a['yq']*a['ca'])); a['yp']=((a['xq']*a['ca'])-(a['yq']*a['sa'])); a['zp']=a['zq']; a['zp']=(a['zp']-0.3); a['ang']=(3.14+(Math.sin(((a['tm']*2)-0.5))*1.5)); a['xq']=a['xp']; a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['yq']=((a['yp']*a['sa'])+(a['zp']*a['ca'])); a['zq']=((a['yp']*a['ca'])-(a['zp']*a['sa'])); a['ang']=(-1.0+Math.cos(((a['tm']*3)+0.5))); a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['xp']=((a['xq']*a['sa'])+(a['yq']*a['ca'])); a['yp']=((a['xq']*a['ca'])-(a['yq']*a['sa'])); a['zp']=a['zq']; a['zp']=(a['zp']-0.35); a['ang']=((Math.cos((a['tm']*2))*0.75)-1.05); a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['xq']=((a['xp']*a['sa'])+(a['zp']*a['ca'])); a['yq']=a['yp']; a['zq']=((a['xp']*a['ca'])-(a['zp']*a['sa'])); a['ang']=((Math.cos(a['tm'])*0.5)-0.5); a['xp']=a['xq']; a['sa']=Math.sin(a['ang']); a['ca']=Math.cos(a['ang']); a['yp']=((a['yq']*a['ca'])-(a['zq']*a['sa'])); a['zp']=((a['yq']*a['sa'])+(a['zq']*a['ca'])); a['zp']=(a['zp']+2); a['xs']=div(a['xp'],a['zp']); a['ys']=div(a['yp'],a['zp']); a['x']=(a['xs']+0.5); a['y']=((a['ys']*1.3)+0.5); a['a']=(1-a['sample']);}())","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":"n=sample*6.283;\nphs=-sample * 0.2;\ntm=q25 + phs;\n\nflip=flip+1;\nflip=flip*below(flip,2);\n\nxp=0;\nyp=flip*0.05*sample + (sin(tm)*0.5 + 0.5)*0.2 + 0.05;\nzp=0;\n\n//wrist movement;\nang=sin(tm*2)*0.5 +0.5;\n\nxq=xp;\nsa=sin(ang);ca=cos(ang);\nyq=yp*sa + zp*ca;\nzq=yp*ca - zp*sa;\nyq=yp;\nzq=zp;\n\nang=tm*8;\nsa=sin(ang);ca=cos(ang);\nxp=xq*sa + yq*ca;\nyp=xq*ca - yq*sa;\nzp=zq;\n\n//forearm movement;\nzp=zp-0.3;\nang=3.14 + sin(tm*2 - 0.5)*1.5;\nxq=xp;\nsa=sin(ang);ca=cos(ang);\nyq=yp*sa + zp*ca;\nzq=yp*ca - zp*sa;\n\n//upper arm twist\nang=-1.0 + cos(tm*3 + 0.5);\nsa=sin(ang);ca=cos(ang);\nxp=xq*sa + yq*ca;\nyp=xq*ca - yq*sa;\nzp=zq;\n\n//upper arm outward;\nzp=zp-0.35;\nang=cos(tm*2)*0.75 - 1.05;\nsa=sin(ang);ca=cos(ang);\nxq=xp*sa + zp*ca;\nyq=yp;\nzq=xp*ca - zp*sa;\n\n//upper arm up down;\nang=cos(tm)*0.5 - 0.5;\nxp=xq;\nsa=sin(ang);ca=cos(ang);\nyp=yq*ca - zq*sa;\nzp=yq*sa + zq*ca;\n\n//xp=xq;yp=yq;zp=zq;\n\n\n//project into screenspace and draw on screen\nzp=zp+2;\nxs=xp/zp;\nys=yp/zp;\n\nx=xs+0.5;\ny=ys*1.3+0.5;\n\n\na=(1-sample);\n"},{"baseVals":{"thick":1,"additive":1,"scaling":0.89152,"smoothing":0.82,"a":0.9,"enabled":0},"init_eqs_str":"(function(){t1 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt2 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt3 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt4 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt5 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt6 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt7 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt8 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\n}())","frame_eqs_str":"(function(){t2 = t2 + bass_att/2;}())","point_eqs_str":"(function(){//Alle Funktionen muessen rel. zu t_rel sein\n\nk1 = cos(time/2.4);\nk2 = sin(time/2);\n\nt_abs = sample;\nt_rel = sample-time/2.12;\nampl =  cos(t_rel)*5; \n//ampl = 3;\n\nox = sin (t_rel*8) + ampl*sin (t_rel*12) ;\noy = cos (t_rel*13) + ampl*cos (t_rel*11);\noz =  ampl/2.3;\n\n\n\n\n//r = sqr(sin(t_rel*3.4));\n//g = sqr(sin(t_rel*2.3));\n//b = sqr (cos(t_rel*1.9));\n\nr = 1;\ng = 0.5;\nb = 0.2;\n\na=0.25*(cos(t_abs*3.14/2)) + 0.2 *below (abs(1-t_abs- t1),0.0);\n//a=0.25*(sin(t_abs*3.14)) + 0.4 *below (abs(1-t_abs-t1), bass_att/1);\na=0.25*(cos(t_abs*1.5)) + 0.7 *below (abs(t_abs),0.0);\n\nxang = k1*3;\nyang = 1;\nzang = 3*k1;\nfov = 0.22;\n\nmonitor = t2;\n\n// Rotation um x,y,z\n\nmx = ox*cos(zang) - oy*sin(zang);\nmy = ox*sin(zang) + oy*cos(zang);\n\nox = mx;\noy = my;\nmx = ox*cos(yang) + oz*sin(yang);\nmz = - ox*sin(yang) + oz*cos(yang);\nox = mx;\noz = mz;\nmy = oy*cos(xang) - oz*sin(xang);\nmz = oy*sin(xang) + oz*cos(xang);\noy = my;\noz = mz;\n\noz = oz - 6;\nx = ox*fov/oz +0.5;\n//x = (x-.5)*0.75 + 0.5;\ny = oy*fov/oz + 0.5;\n}())","init_eqs_eel":"(function(){t1 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt2 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt3 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt4 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt5 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt6 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt7 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\nt8 = 1 + (rand(101)*.01 - rand(101)*.01)*.3;\n}())","frame_eqs_eel":"(function(){t2 = t2 + bass_att/2;}())","point_eqs_eel":"(function(){//Alle Funktionen muessen rel. zu t_rel sein\n\nk1 = cos(time/2.4);\nk2 = sin(time/2);\n\nt_abs = sample;\nt_rel = sample-time/2.12;\nampl =  cos(t_rel)*5; \n//ampl = 3;\n\nox = sin (t_rel*8) + ampl*sin (t_rel*12) ;\noy = cos (t_rel*13) + ampl*cos (t_rel*11);\noz =  ampl/2.3;\n\n\n\n\n//r = sqr(sin(t_rel*3.4));\n//g = sqr(sin(t_rel*2.3));\n//b = sqr (cos(t_rel*1.9));\n\nr = 1;\ng = 0.5;\nb = 0.2;\n\na=0.25*(cos(t_abs*3.14/2)) + 0.2 *below (abs(1-t_abs- t1),0.0);\n//a=0.25*(sin(t_abs*3.14)) + 0.4 *below (abs(1-t_abs-t1), bass_att/1);\na=0.25*(cos(t_abs*1.5)) + 0.7 *below (abs(t_abs),0.0);\n\nxang = k1*3;\nyang = 1;\nzang = 3*k1;\nfov = 0.22;\n\nmonitor = t2;\n\n// Rotation um x,y,z\n\nmx = ox*cos(zang) - oy*sin(zang);\nmy = ox*sin(zang) + oy*cos(zang);\n\nox = mx;\noy = my;\nmx = ox*cos(yang) + oz*sin(yang);\nmz = - ox*sin(yang) + oz*cos(yang);\nox = mx;\noz = mz;\nmy = oy*cos(xang) - oz*sin(xang);\nmz = oy*sin(xang) + oz*cos(xang);\noy = my;\noz = mz;\n\noz = oz - 6;\nx = ox*fov/oz +0.5;\n//x = (x-.5)*0.75 + 0.5;\ny = oy*fov/oz + 0.5;\n}())"},{"baseVals":{"thick":1,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['st'] = 0; a['q25'] = 0; a['ranx'] = 0; a['q12'] = 0; a['q22'] = 0; a['q21'] = 0; a['q13'] = 0; a['ranh'] = 0; a['q15'] = 0; a['q6'] = 0; a['posx'] = 0; a['dpx'] = 0; a['st_'] = 0; a['dpy'] = 0; a['q10'] = 0; a['posy'] = 0; a['q4'] = 0; a['rany'] = 0; a['dir'] = 0; a['q16'] = 0; a['vol'] = 0; a['q2'] = 0; a['q3'] = 0; a['t0'] = 0; a['dec'] = 0; a['view'] = 0; a['q7'] = 0; a['test'] = 0; a['q20'] = 0; a['mtime'] = 0; a['q8'] = 0; a['n']=0; for(var mdparser_idx574=0;mdparser_idx574<10000;mdparser_idx574++){a['megabuf'][Math.floor(a['n'])]=0; a['gmegabuf'][Math.floor(a['n'])]=0; a['n']+=1;} a['posx']=0; a['posy']=rand(1000); a['ranx']=rand(1); a['rany']=rand(1); a['ranh']=rand(10); a['t0']=a['time']; a['st']=0.5; a['st_']=0.5;}())","frame_eqs_str":"(function(){a['st']=Math.max(0, (a['st']-div(0.2,a['fps']))); a['dec']=(1-div(0.5,a['fps'])); a['st_']=((a['st_']*a['dec'])+((1-a['dec'])*a['st'])); a['dir']=(0.3*Math.tan(((a['time']*0.0262)+(a['rany']*6)))); a['q2']=(a['dir']+1.5); a['q3']=Math.sin(a['dir']); a['q4']=Math.cos(a['dir']); a['q7']=(0.002*0.37); a['dpx']=0; a['dpy']=div(0.012,a['q7']); a['posy']+=div(a['dpy'],a['fps']); a['q10']=a['posx']; a['q2']=a['posy']; a['q12']=div(div(a['dpx'],a['fps']),3); a['q13']=div(a['dpy'],a['fps']); a['q15']=(a['ranx']+div(a['time'],122)); a['q16']=(a['rany']+div(a['time'],122)); a['test']=(((a['t0']-a['time'])*0.047)-div(3.14,2)); a['view']=(0.7+(Math.min(1, Math.max(-1, (2*Math.sin(a['test']))))*0.17)); a['q8']=3; a['q6']=0; a['q20']=(-0.05*Math.abs(Math.sin((a['ranh']+(a['posy']*0.0005))))); a['q21']=(1+(0.3*Math.cos((a['ranh']+(a['posy']*0.0063))))); a['q22']=(0.15+(0.05*Math.cos((a['ranh']+(a['posy']*0.0028))))); a['vol']=(((a['bass_att']+a['mid_att'])+a['treb_att'])*0.20); a['vol']=(a['vol']*a['vol']); a['mtime']=(a['mtime']+((a['vol']*0.1)*div(75,a['fps']))); a['q25']=(a['mtime']*0.4);}())","pixel_eqs_str":"","init_eqs_eel":"n = 0;\nloop (10000,megabuf(n)=0;gmegabuf(n)=0;n += 1;);\n\nposx = 0; posy = rand(1000);;\nranx = rand (1); rany = rand(1);\nranh = rand(10);\nt0 = time;\nst = 0.5; st_=0.5;","frame_eqs_eel":"st = max (0, st-0.2/fps);\ndec = 1-0.5/fps;\nst_ = st_* (dec) + (1-dec)*st;\n\n//dir\ndir = .3*tan(time*.0262+rany*6);\nq2 = dir+1.5; \nq3 = sin(dir);\nq4 = cos(dir);\n\n//scaling plane\nq7 = 0.002*0.37;\n\n//movement\ndpx = 0;\ndpy = 0.012/q7;\nposy += dpy/fps;\nq10 = posx; q2 = posy;\nq12 = dpx/fps/3 ; q13 = dpy/fps;\n\n//start ran for warp mod \nq15 = ranx+time/122;\nq16 = rany+time/122;\n\ntest = (t0-time)*0.047-3.14/2;\nview = 0.7 + min(1, max (-1, 2*sin(test)))*0.17;\n\n//Alti\nq8 = 3;\nq6  = 0;\n\nq20 = -0.05 * abs (sin(ranh+posy*0.0005));\nq21 = 1 + 0.3*  cos(ranh+posy*0.0063); \nq22 = 0.15 + 0.05*  cos(ranh+posy*0.0028);\n\n\nvol=(bass_att+mid_att+treb_att)*0.20;\nvol=vol*vol;\nmtime=mtime+vol*0.1*(75/fps);\n\nq25=mtime*0.4;","pixel_eqs_eel":"","warp":"#define sat saturate\n#define snl sampler_noise_lq\nconst float quality = 3, a = aspect.x/aspect.y, k1=16, k2 = 0.04, smod = q20, xmod=q22;\nvec3 rsl, rsl3, ret1, sky, mod,mod2;\nvec2 dz, uv0, uv1, uv2, uv3, uv4, uvc, dz1;\nfloat  lav_gnd,lav_gnd2, smask, ripple, l,d,i,p;\nconst float hory = q6, xyscale = q7, alti = q8;\nconst vec2 hor = texsize.zw*vec2 (1.5,0), dir = vec2 (q3,q4), modran = vec2 (q15,q16);\nconst vec2 dpxy = vec2 (q12, q13);\nconst vec3 mov = vec3 (q10,q11,0);\n\nvec2 noise2 (vec2 uvi) {vec2 tmp = 1; float s = 1; uvi*=xyscale*32;\n  for (int n = 1; n <= 2; n +=1 ) {tmp *= 1-texture(snl,uvi*s).xyz; s*= 3;} return tmp;}\n\nvec2 noise3 (vec3 uvi, vec3 mod) {float tmp = 1; float s = 2; float diff,path;\n\n tmp = (texture(sampler_noise_mq,uvi*xyscale*vec2(1,.5)+modran.x).r-0.6)*mod.z*2.5; \n  diff = tmp;\n  for (int n = 1; n <= 4; n +=1 ) {tmp += texture(snl,uvi.xy*s*xyscale).xyz/s/2; s*= 3;}\n  tmp = mix (0.3,tmp,clamp(+pow(uvi.x*xmod,2), 0.0, 1.0));\n  tmp = mix (0.2,tmp,1-pow(sin(smod*abs(uvi.x)+(uvi.y*.02+(1-tmp)*mod.x)),8));\n return 1-pow (tmp,0.8+mod.y);}\n\nvec3 rs_lav (vec2 uvi, float berg) {  float z; vec2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return vec3(rs,z)+mov; }\n\n\nshader_body {\nuv = uv_orig; uv1 = uv-0.5;\nlav_gnd=  -min (texture(sampler_fc_main,uv).b, texture(sampler_fc_main,uv+hor.yx*1.5).b);\nrsl = rs_lav(uv1,lav_gnd); \nmod = texture(sampler_noise_hq,rsl.xy*xyscale+modran).xyz;\ni=0, p=0;\nfor (int n=1; n <= quality; n++) {\n  p =  ((lav_gnd+noise3 (rsl, mod))/quality);\n  i += p;  lav_gnd -= p*0.1+i*0.02; rsl = rs_lav(uv1,lav_gnd);}\n\nl = clamp(-lav_gnd, 0.0, 1.0);\nd= 3;\ndz = -1/rsl.z*d*dir;\nripple = (noise3 (rsl,mod) - noise3 (rsl+vec3 (dz,0),mod))*sat(rsl.z/16)*42;\nripple += ((noise2 (rsl-dz) - noise2 (rsl+dz))* (1-l))+0.05;\nripple = 1-exp(-ripple*2);\n\nret = vec3 (ripple, sqrt (rsl.z)*0.05, l);\n\nfloat tmp = dpxy.y + rsl.z;\nuv.x += -(uv.x-0.5)*dpxy.y / tmp;\nuv.y += (alti+l*k1) * (sqrt(k2/(tmp))-sqrt(k2/rsl.z));\n\nret = mix (ret, texture(sampler_fc_main,uv).xyz-0.004, vec3 (0.75,0,.2));\n}","comp":"#define sat saturate\nfloat fog, lav_gnd;\nvec2 dz, dz1, uv0, uv1, uv3;\nvec3 rsl, mod, ret0, mod2, lake;\nconst float a = aspect.x/aspect.y, k1=16, k2 = 0.04, gmod = q21;\nconst float hory = q6, xyscale = q7, alti = q8, dir = q2;\nconst vec2 modran = vec2 (q15,q16);\n\nconst vec2 hor = texsize.zw*vec2 (1,0),ver = texsize.zw*vec2 (0,1);\nconst vec3 mov = vec3 (q10,q11,0);\n\nvec3 rs_lav (vec2 uvi, float berg) {  float z; vec2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return vec3(rs,z)+mov; }\n\nshader_body {\nret0 = texture(sampler_main, uv).xyz;\nrsl = rs_lav (uv-0.5,ret0.b*0.5+.5);\nmod = texture(sampler_noise_mq, rsl*0.00007+modran.yx).xyz;\nmod2 = texture(sampler_noise_mq, rsl*0.00005+modran).xyz;\nfog = 3.2 + 0.5*mod2.x;\nret = ret0;;;\nret = mix (((texture(sampler_blur1, uv).xyz * scale1) + bias1),ret0.r,ret0.g*3) ;\nret = ret.r;\n\nret = mix (ret, ret0,sat(ret0.g*ret0.g*gmod));\n//lake = max(sat (16*(ret0.b -0.9)) * pow (texture(sampler_noisevol_lq,0.05*rsl*vec3 (1,1,0.2)).xyz,4)*4*sat(50/abs(rsl.z)),\n//            sat (4*ret0.b-fog))*normalize(mod);\n\n\n//ret = max (lake,ret);\nret += lake;\n//ret = ret0.g;\nret /= vec3(0.5,-1.9,1.1);\nret /= vec3(1.2,2.1,1.8);\nret /= vec3(1.4,1.4,0.8);\n}","warp_hlsl":"#define sat saturate\n#define snl sampler_noise_lq\nstatic const float quality = 3, a = aspect.x/aspect.y, k1=16, k2 = 0.04, smod = q20, xmod=q22;\nfloat3 rsl, rsl3, ret1, sky, mod,mod2;\nfloat2 dz, uv0, uv1, uv2, uv3, uv4, uvc, dz1;\nfloat  lav_gnd,lav_gnd2, smask, ripple, l,d,i,p;\nstatic const float hory = q6, xyscale = q7, alti = q8;\nstatic const float2 hor = texsize.zw*float2 (1.5,0), dir = float2 (q3,q4), modran = float2 (q15,q16);\nstatic const float2 dpxy = float2 (q12, q13);\nstatic const float3 mov = float3 (q10,q11,0);\n\nfloat2 noise2 (float2 uvi) {float2 tmp = 1; float s = 1; uvi*=xyscale*32;\n  for (int n = 1; n <= 2; n +=1 ) {tmp *= 1-tex2D(snl,uvi*s); s*= 3;} return tmp;}\n\nfloat2 noise3 (float3 uvi, float3 mod) {float tmp = 1; float s = 2; float diff,path;\n\n tmp = (tex2D(sampler_noise_mq,uvi*xyscale*float2(1,.5)+modran.x).r-0.6)*mod.z*2.5; \n  diff = tmp;\n  for (int n = 1; n <= 4; n +=1 ) {tmp += tex2D(snl,uvi.xy*s*xyscale)/s/2; s*= 3;}\n  tmp = lerp (0.3,tmp,saturate(+pow(uvi.x*xmod,2)));\n  tmp = lerp (0.2,tmp,1-pow(sin(smod*abs(uvi.x)+(uvi.y*.02+(1-tmp)*mod.x)),8));\n return 1-pow (tmp,0.8+mod.y);}\n\nfloat3 rs_lav (float2 uvi, float berg) {  float z; float2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return float3(rs,z)+mov; }\n\n\nshader_body {\nuv = uv_orig; uv1 = uv-0.5;\nlav_gnd=  -min (tex2D(sampler_fc_main,uv).b, tex2D(sampler_fc_main,uv+hor.yx*1.5).b);\nrsl = rs_lav(uv1,lav_gnd); \nmod = tex2D(sampler_noise_hq,rsl.xy*xyscale+modran);\ni=0, p=0;\nfor (int n=1; n <= quality; n++) {\n  p =  ((lav_gnd+noise3 (rsl, mod))/quality);\n  i += p;  lav_gnd -= p*0.1+i*0.02; rsl = rs_lav(uv1,lav_gnd);}\n\nl = saturate(-lav_gnd);\nd= 3;\ndz = -1/rsl.z*d*dir;\nripple = (noise3 (rsl,mod) - noise3 (rsl+float3 (dz,0),mod))*sat(rsl.z/16)*42;\nripple += ((noise2 (rsl-dz) - noise2 (rsl+dz))* (1-l))+0.05;\nripple = 1-exp(-ripple*2);\n\nret = float3 (ripple, sqrt (rsl.z)*0.05, l);\n\nfloat tmp = dpxy.y + rsl.z;\nuv.x += -(uv.x-0.5)*dpxy.y / tmp;\nuv.y += (alti+l*k1) * (sqrt(k2/(tmp))-sqrt(k2/rsl.z));\n\nret = lerp (ret, tex2D(sampler_fc_main,uv)-0.004, float3 (0.75,0,.2));\n}","comp_hlsl":"#define sat saturate\nfloat fog, lav_gnd;\nfloat2 dz, dz1, uv0, uv1, uv3;\nfloat3 rsl, mod, ret0, mod2, lake;\nstatic const float a = aspect.x/aspect.y, k1=16, k2 = 0.04, gmod = q21;\nstatic const float hory = q6, xyscale = q7, alti = q8, dir = q2;\nstatic const float2 modran = float2 (q15,q16);\n\nstatic const float2 hor = texsize.zw*float2 (1,0),ver = texsize.zw*float2 (0,1);\nstatic const float3 mov = float3 (q10,q11,0);\n\nfloat3 rs_lav (float2 uvi, float berg) {  float z; float2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return float3(rs,z)+mov; }\n\nshader_body {\nret0 = GetPixel(uv);\nrsl = rs_lav (uv-0.5,ret0.b*0.5+.5);\nmod = tex2D(sampler_noise_mq, rsl*0.00007+modran.yx);\nmod2 = tex2D(sampler_noise_mq, rsl*0.00005+modran);\nfog = 3.2 + 0.5*mod2.x;\nret = ret0;;;\nret = lerp (GetBlur1(uv),ret0.r,ret0.g*3) ;\nret = ret.r;\n\nret = lerp (ret, ret0,sat(ret0.g*ret0.g*gmod));\n//lake = max(sat (16*(ret0.b -0.9)) * pow (tex3D(sampler_noisevol_lq,0.05*rsl*float3 (1,1,0.2)),4)*4*sat(50/abs(rsl.z)),\n//            sat (4*ret0.b-fog))*normalize(mod);\n\n\n//ret = max (lake,ret);\nret += lake;\n//ret = ret0.g;\nret /= float3(0.5,-1.9,1.1);\nret /= float3(1.2,2.1,1.8);\nret /= float3(1.4,1.4,0.8);\n}"}