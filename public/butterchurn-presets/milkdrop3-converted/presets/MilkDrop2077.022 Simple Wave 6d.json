{"version":2,"baseVals":{"rating":5,"gammaadj":1,"decay":0.925,"echo_zoom":1.002,"wave_mode":11,"wave_thick":1,"modwavealphabyvolume":1,"darken":1,"wave_a":100,"wave_scale":1.69,"wave_smoothing":0,"modwavealphastart":1.5,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0.7,"wave_g":0.406,"wave_b":0.62,"ob_size":0,"ob_r":1,"ob_b":1,"ob_a":1,"ib_size":0.26,"mv_x":64,"mv_y":48,"mv_l":6.05,"mv_r":0.451,"mv_g":0.357,"mv_b":0.35,"mv_a":0},"shapes":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['max_age'] = 0; a['zcam'] = 0; a['n'] = 0; a['y1'] = 0; a['n2'] = 0; a['cmovy'] = 0; a['free'] = 0; a['sharp'] = 0; a['index2'] = 0; a['reg07'] = 0; a['reg34'] = 0; a['g0'] = 0; a['right'] = 0; a['reg43'] = 0; a['tbase'] = 0; a['y0_'] = 0; a['q25'] = 0; a['vx0'] = 0; a['reg05'] = 0; a['brake'] = 0; a['index'] = 0; a['q12'] = 0; a['reg04'] = 0; a['up'] = 0; a['v3'] = 0; a['dzcam'] = 0; a['z0_'] = 0; a['q18'] = 0; a['x1'] = 0; a['q22'] = 0; a['age'] = 0; a['q21'] = 0; a['obj_num'] = 0; a['fac'] = 0; a['cw'] = 0; a['q13'] = 0; a['reg08'] = 0; a['q15'] = 0; a['sp0'] = 0; a['q29'] = 0; a['q6'] = 0; a['posx'] = 0; a['dt'] = 0; a['y0'] = 0; a['gg'] = 0; a['reg48'] = 0; a['hspeed'] = 0; a['q1'] = 0; a['posz'] = 0; a['q5'] = 0; a['dxcam'] = 0; a['n1'] = 0; a['reg52'] = 0; a['dec_f'] = 0; a['q9'] = 0; a['self2'] = 0; a['head_ptr'] = 0; a['x0'] = 0; a['new'] = 0; a['dec_s'] = 0; a['camdist'] = 0; a['vx1'] = 0; a['reg36'] = 0; a['reg50'] = 0; a['num2'] = 0; a['crot'] = 0; a['vol_att'] = 0; a['reg58'] = 0; a['reg09'] = 0; a['reg45'] = 0; a['new_'] = 0; a['is_beat'] = 0; a['q31'] = 0; a['cal'] = 0; a['q23'] = 0; a['k1'] = 0; a['q24'] = 0; a['vx'] = 0; a['q11'] = 0; a['vy0'] = 0; a['z0'] = 0; a['hlock'] = 0; a['style'] = 0; a['x0_'] = 0; a['q10'] = 0; a['reg53'] = 0; a['xcam'] = 0; a['vy'] = 0; a['vz'] = 0; a['reg31'] = 0; a['reg06'] = 0; a['v0'] = 0; a['dec_m'] = 0; a['q4'] = 0; a['ran'] = 0; a['t_age'] = 0; a['cfwd'] = 0; a['pspeed'] = 0; a['t_ptr'] = 0; a['t_num'] = 0; a['reg54'] = 0; a['c2'] = 0; a['reg37'] = 0; a['s3'] = 0; a['self'] = 0; a['reg55'] = 0; a['vz0'] = 0; a['q16'] = 0; a['q26'] = 0; a['mage2'] = 0; a['reg57'] = 0; a['reg38'] = 0; a['colg'] = 0; a['reg35'] = 0; a['reg56'] = 0; a['reg46'] = 0; a['camspeed'] = 0; a['reg41'] = 0; a['avg'] = 0; a['csum'] = 0; a['reg44'] = 0; a['colr'] = 0; a['c3'] = 0; a['ptr2'] = 0; a['q19'] = 0; a['theta'] = 0; a['tspeed'] = 0; a['q17'] = 0; a['cmovx'] = 0; a['reg32'] = 0; a['free2'] = 0; a['peak'] = 0; a['reg47'] = 0; a['base2'] = 0; a['dt2'] = 0; a['vy1'] = 0; a['reg30'] = 0; a['q2'] = 0; a['q27'] = 0; a['q14'] = 0; a['dist'] = 0; a['reg51'] = 0; a['v1'] = 0; a['reg42'] = 0; a['z1'] = 0; a['gspeed'] = 0; a['speed'] = 0; a['q3'] = 0; a['s1'] = 0; a['vz1'] = 0; a['t0'] = 0; a['dec'] = 0; a['s2'] = 0; a['m'] = 0; a['reg40'] = 0; a['camlock'] = 0; a['q32'] = 0; a['reg33'] = 0; a['phi'] = 0; a['q7'] = 0; a['q28'] = 0; a['point'] = 0; a['t_free'] = 0; a['dycam'] = 0; a['q30'] = 0; a['ycam'] = 0; a['c1'] = 0; a['v2'] = 0; a['colb'] = 0; a['q20'] = 0; a['q8'] = 0; a['obj_size'] = 0; a['gspeed']=1; a['hspeed']=0.03; a['pspeed']=0.08; a['tspeed']=(a['hspeed']*4); a['camdist']=0.01; a['camspeed']=0.4; a['camlock']=8; a['hlock']=0.1; a['sharp']=140; a['g0']=0.04; a['cw']=10; a['n']=0; for(var mdparser_idx221=0;mdparser_idx221<2000000;mdparser_idx221++){a['gmegabuf'][Math.floor(a['n'])]=0; a['n']+=1;} a['fac']=0.4; a['reg19']=a['fac']; a['obj_num']=800; a['reg00']=a['obj_num']; a['obj_size']=16; a['reg01']=a['obj_size']; a['max_age']=2; a['reg02']=a['max_age']; a['head_ptr']=0; a['free']=0; a['num2']=2000; a['free2']=0; a['ptr2']=0; a['mage2']=1.4; a['reg22']=a['mage2']; a['base2']=200000; a['t_num']=500; a['reg10']=a['t_num']; a['t_age']=0.7; a['reg12']=a['t_age']; a['tbase']=(a['obj_num']*a['obj_size']); a['reg13']=a['tbase']; a['t_ptr']=0; a['t_free']=0; a['x0']=((rand(10)-5)*0.05); a['y0']=((rand(10)-5)*0.05); a['z0']=((rand(10)-5)*0.05); a['xcam']=0; a['ycam']=0.0; a['zcam']=-0; a['c1']=Math.cos(0); a['c2']=Math.cos(0); a['c3']=Math.cos(0); a['s1']=Math.sin(0); a['s2']=Math.sin(0); a['s3']=Math.sin(0); a['reg30']=(a['c2']*a['c1']); a['reg31']=(a['c2']*a['s1']); a['reg32']=-a['s2']; a['reg33']=(((a['s3']*a['s2'])*a['c1'])-(a['c3']*a['s1'])); a['reg34']=(((a['s3']*a['s2'])*a['s1'])+(a['c3']*a['c1'])); a['reg35']=(a['s3']*a['c2']); a['reg36']=(((a['c3']*a['s2'])*a['c1'])+(a['s3']*a['s1'])); a['reg37']=(((a['c3']*a['s2'])*a['s1'])-(a['s3']*a['c1'])); a['reg38']=(a['c3']*a['c2']); a['reg50']=(a['c2']*a['c1']); a['reg51']=(a['c2']*a['s1']); a['reg52']=-a['s2']; a['reg53']=(((a['s3']*a['s2'])*a['c1'])-(a['c3']*a['s1'])); a['reg54']=(((a['s3']*a['s2'])*a['s1'])+(a['c3']*a['c1'])); a['reg55']=(a['s3']*a['c2']); a['reg56']=(((a['c3']*a['s2'])*a['c1'])+(a['s3']*a['s1'])); a['reg57']=(((a['c3']*a['s2'])*a['s1'])-(a['s3']*a['c1'])); a['reg58']=(a['c3']*a['c2']); a['colr']=div(rand(10),11); a['colg']=div(rand(10),11); a['colb']=div(rand(10),11); a['posx']=div(rand(10),10); a['posz']=div(rand(10),10); a['n1']=div(rand(10),20); a['n2']=div(rand(10),20);}())","frame_eqs_str":"(function(){a['dt']=div(a['gspeed'],a['fps']); a['dec_s']=(1-div((0.015*30),a['fps'])); a['dec_m']=pow(0.95, div(30,a['fps'])); a['dec_f']=pow(0.8, div(30,a['fps'])); a['dt2']=a['dt']; a['vol_att']=div(((a['bass']+a['mid'])+a['treb']),3); a['avg']=((a['avg']*a['dec_s'])+(((1-a['dec_s'])*a['vol_att'])*(1.2-div(0.2,a['cal'])))); a['is_beat']=(above(a['vol_att'], (1.5*a['peak']))*above(a['time'], (a['t0']+0.2))); a['t0']=((Math.abs(a['is_beat'])>0.00001)?(a['time']):(a['t0'])); a['peak']=((a['peak']*a['dec_m'])+((1-a['dec_m'])*a['vol_att'])); a['index']=mod((a['index']+a['is_beat']),16); a['index2']=mod((a['index2']+(a['is_beat']*bnot(a['index']))),12); a['right']=div(((((pow((a['bass_att']-a['avg']), 1)*((a['bass_att']>a['avg'])?1:0))*a['sharp'])*a['n1'])*Math.sin((a['time']*3))),a['cal']); a['up']=div(((((pow((a['treb_att']-a['avg']), 1)*((a['treb_att']>a['avg'])?1:0))*a['sharp'])*a['n2'])*Math.cos((a['time']*1))),a['cal']); a['right']=(pow(a['bass_att'], 3)*2); a['up']=(pow(a['treb_att'], 3)*2); a['cal']=((a['cal']*a['dec_s'])+div(((1-a['dec_s'])*sqrt(((a['up']*a['up'])+(a['right']*a['right'])))),4)); a['cal']=Math.max(a['cal'], 0.3); ((Math.abs((((Math.abs((mod(a['index'],2))-(0))<0.00001)?1:0)*a['is_beat']))>0.00001)?((function(){((Math.abs(((a['bass_att']<(a['avg']+11))?1:0))>0.00001)?(a['n1']=(div(rand(100),100)-0.5)):(0)); return ((Math.abs(((a['treb_att']<(a['avg']+11))?1:0))>0.00001)?(a['n2']=(div(rand(100),100)-0.5)):(0));})()):(0)); a['sp0']=((0.5+sqrt((a['vol_att']*2)))*a['hspeed']); a['sp0']=0.1; a['dec']=((Math.abs(((a['sp0']>a['speed'])?1:0))>0.00001)?(a['dec_f']):(a['dec_m'])); a['speed']=((a['speed']*a['dec'])+((1-a['dec'])*a['sp0'])); a['c1']=Math.cos((a['up']*a['dt'])); a['c2']=Math.cos((a['right']*a['dt'])); a['c3']=1; a['s1']=Math.sin((a['up']*a['dt'])); a['s2']=Math.sin((a['right']*a['dt'])); a['s3']=0; a['reg40']=(a['c2']*a['c3']); a['reg41']=(a['c2']*a['s3']); a['reg42']=-a['s2']; a['reg43']=(((a['s1']*a['s2'])*a['c3'])-(a['c1']*a['s3'])); a['reg44']=(((a['s1']*a['s2'])*a['s3'])+(a['c1']*a['c3'])); a['reg45']=(a['s1']*a['c2']); a['reg46']=(((a['c1']*a['s2'])*a['c3'])+(a['s1']*a['s3'])); a['reg47']=(((a['c1']*a['s2'])*a['s3'])-(a['s1']*a['c3'])); a['reg48']=(a['c1']*a['c2']); a['q20']=(((a['reg40']*a['reg50'])+(a['reg41']*a['reg53']))+(a['reg42']*a['reg56'])); a['q21']=(((a['reg40']*a['reg51'])+(a['reg41']*a['reg54']))+(a['reg42']*a['reg57'])); a['q22']=(((a['reg40']*a['reg52'])+(a['reg41']*a['reg55']))+(a['reg42']*a['reg58'])); a['q23']=(((a['reg43']*a['reg50'])+(a['reg44']*a['reg53']))+(a['reg45']*a['reg56'])); a['q24']=(((a['reg43']*a['reg51'])+(a['reg44']*a['reg54']))+(a['reg45']*a['reg57'])); a['q25']=(((a['reg43']*a['reg52'])+(a['reg44']*a['reg55']))+(a['reg45']*a['reg58'])); a['q26']=(((a['reg46']*a['reg50'])+(a['reg47']*a['reg53']))+(a['reg48']*a['reg56'])); a['q27']=(((a['reg46']*a['reg51'])+(a['reg47']*a['reg54']))+(a['reg48']*a['reg57'])); a['q28']=(((a['reg46']*a['reg52'])+(a['reg47']*a['reg55']))+(a['reg48']*a['reg58'])); a['reg50']=a['q20']; a['reg51']=a['q21']; a['reg52']=a['q22']; a['reg53']=a['q23']; a['reg54']=a['q24']; a['reg55']=a['q25']; a['reg56']=a['q26']; a['reg57']=a['q27']; a['reg58']=a['q28']; a['vx0']=(a['reg56']*a['speed']); a['vy0']=(a['reg57']*a['speed']); a['vz0']=(a['reg58']*a['speed']); a['x0']=(a['x0']+(a['vx0']*a['dt'])); a['reg04']=a['x0']; a['y0']=Math.max(-0.5, Math.min(0.5, (a['y0']+(a['vy0']*a['dt'])))); a['reg05']=a['y0']; a['z0']=(a['z0']+(a['vz0']*a['dt'])); a['reg06']=a['z0']; a['style']=((a['n1']>0)?1:0); ((Math.abs(((Math.abs((a['style'])-(0))<0.00001)?1:0))>0.00001)?(a['new']=Math.max(0, Math.min((32*((a['mid']>1.2)?1:0)), a['free']))):(0)); ((Math.abs(((Math.abs((a['style'])-(1))<0.00001)?1:0))>0.00001)?(a['new']=Math.max(0, Math.min((250*(((a['vol_att']*200)>((200+a['obj_num'])-a['free']))?1:0)), a['free']))):(0)); ((Math.abs(((a['new']<8)?1:0))>0.00001)?(a['new']=0):(0)); a['n']=0; a['m']=a['new']; a['dec']=((Math.abs(((a['new']>0)?1:0))>0.00001)?(0.2):(a['dec_f'])); a['new_']=((a['new_']*a['dec'])+((1-a['dec'])*a['new'])); a['q29']=a['new_']; ((Math.abs(((a['new']>0)?1:0))>0.00001)?((function(){((Math.abs(((Math.abs((mod(a['index'],4))-(0))<0.00001)?1:0))>0.00001)?((function(){a['csum']=sqrt((((a['bass_att']*a['bass_att'])+(a['mid_att']*a['mid_att']))+(a['treb_att']*a['treb_att']))); a['colr']=div(a['bass_att'],a['csum']); a['colb']=div(a['mid_att'],a['csum']); return a['colg']=div(a['treb_att'],a['csum']);})()):(0)); return (function(){var mdparser_idx222;var mdparser_count223=0;do{mdparser_count223+=1;mdparser_idx222=(function(){a['self']=(mod(a['head_ptr'],a['obj_num'])*a['obj_size']); ((Math.abs(((a['gmegabuf'][Math.floor((a['self']+12))]<=0)?1:0))>0.00001)?((function(){a['theta']=((a['n2']*4)-(a['n1']*rand(12))); a['phi']=rand(12); a['v0']=((1+(0.1*(div(rand(100),100)-0.5)))*a['pspeed']); a['vx']=((Math.sin(a['theta'])*Math.cos(a['phi']))*a['v0']); a['vy']=((Math.sin(a['theta'])*Math.sin(a['phi']))*a['v0']); a['vz']=(Math.cos(a['theta'])*a['v0']); a['vx1']=(((a['vx']*a['reg50'])+(a['vy']*a['reg53']))+(a['vz']*a['reg56'])); a['vy1']=(((a['vx']*a['reg51'])+(a['vy']*a['reg54']))+(a['vz']*a['reg57'])); a['vz1']=(((a['vx']*a['reg52'])+(a['vy']*a['reg55']))+(a['vz']*a['reg58'])); a['vx']=a['vx1']; a['vy']=a['vy1']; a['vz']=a['vz1']; a['gmegabuf'][Math.floor(a['self'])]=a['x0']; a['gmegabuf'][Math.floor((a['self']+1))]=a['y0']; a['gmegabuf'][Math.floor((a['self']+2))]=a['z0']; a['gmegabuf'][Math.floor((a['self']+3))]=(a['vx']+a['vx0']); a['gmegabuf'][Math.floor((a['self']+4))]=(a['vy']+a['vy0']); a['gmegabuf'][Math.floor((a['self']+5))]=(a['vz']+a['vz0']); a['gmegabuf'][Math.floor((a['self']+9))]=a['colr']; a['gmegabuf'][Math.floor((a['self']+10))]=a['colg']; a['gmegabuf'][Math.floor((a['self']+11))]=a['colb']; a['gmegabuf'][Math.floor((a['self']+12))]=a['dt2']; a['gmegabuf'][Math.floor((a['self']+13))]=(div(rand(100),200)+0.5); a['gmegabuf'][Math.floor((a['self']+14))]=(Math.min(a['free2'], (3*((Math.abs((mod(a['n'],6))-(0))<0.00001)?1:0)))*mod(a['index2'],2)); a['n']+=1; return a['m']-=1;})()):(0)); a['head_ptr']=mod((a['head_ptr']+1),a['obj_num']); return ((a['m']>0)?1:0)})()}while(Math.abs(mdparser_idx222)>0.000010&&mdparser_count223<1048576);}());})()):(0)); a['n']=0; a['free']=0; for(var mdparser_idx224=0;mdparser_idx224<a['obj_num'];mdparser_idx224++){a['self']=(a['n']*a['obj_size']); a['age']=a['gmegabuf'][Math.floor((a['self']+12))]; ((Math.abs(((a['age']>0)?1:0))>0.00001)?((function(){((Math.abs(((a['age']>a['max_age'])?1:0))>0.00001)?(a['age']=0):(a['age']+=a['dt2'])); a['new']=Math.min(a['free2'], a['gmegabuf'][Math.floor((a['self']+14))]); ((Math.abs(((a['new']>0)?1:0))>0.00001)?((function(){var mdparser_idx225;var mdparser_count226=0;do{mdparser_count226+=1;mdparser_idx225=(function(){a['self2']=((mod(a['ptr2'],a['num2'])*a['obj_size'])+a['base2']); ((Math.abs(((a['gmegabuf'][Math.floor((a['self2']+12))]<=0)?1:0))>0.00001)?((function(){a['gmegabuf'][Math.floor(a['self2'])]=a['gmegabuf'][Math.floor(a['self'])]; a['gmegabuf'][Math.floor((a['self2']+1))]=a['gmegabuf'][Math.floor((a['self']+1))]; a['gmegabuf'][Math.floor((a['self2']+2))]=a['gmegabuf'][Math.floor((a['self']+2))]; a['gmegabuf'][Math.floor((a['self2']+3))]=(a['gmegabuf'][Math.floor((a['self']+3))]+(((a['pspeed']*(div(rand(100),100)-0.5))*1)*a['bass'])); a['gmegabuf'][Math.floor((a['self2']+4))]=(a['gmegabuf'][Math.floor((a['self']+4))]+(((a['pspeed']*(div(rand(100),100)-0.5))*1)*a['bass'])); a['gmegabuf'][Math.floor((a['self2']+5))]=(a['gmegabuf'][Math.floor((a['self']+5))]+(((a['pspeed']*(div(rand(100),100)-0.5))*1)*a['bass'])); a['gmegabuf'][Math.floor((a['self2']+9))]=pow(a['gmegabuf'][Math.floor((a['self']+9))], 2); a['gmegabuf'][Math.floor((a['self2']+10))]=pow(a['gmegabuf'][Math.floor((a['self']+10))], 2); a['gmegabuf'][Math.floor((a['self2']+11))]=pow(a['gmegabuf'][Math.floor((a['self']+11))], 2); a['gmegabuf'][Math.floor((a['self2']+12))]=a['dt2']; a['gmegabuf'][Math.floor((a['self2']+13))]=(div(rand(100),200)+0.5); a['new']-=1; return a['free2']-=1;})()):(0)); a['ptr2']=mod((a['ptr2']+1),a['num2']); return ((a['new']>0)?1:0)})()}while(Math.abs(mdparser_idx225)>0.000010&&mdparser_count226<1048576);}())):(a['gmegabuf'][Math.floor((a['self']+14))]=0)); a['v2']=((pow(a['gmegabuf'][Math.floor((a['self']+3))], 2)+pow(a['gmegabuf'][Math.floor((a['self']+4))], 2))+pow(a['gmegabuf'][Math.floor((a['self']+5))], 2)); a['brake']=Math.max(0.5, (1-((div(a['dt'],(1+a['gmegabuf'][Math.floor((a['self']+14))]))*a['cw'])*a['v2']))); a['gmegabuf'][Math.floor(a['self'])]+=(a['gmegabuf'][Math.floor((a['self']+3))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+1))]+=(a['gmegabuf'][Math.floor((a['self']+4))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+2))]+=(a['gmegabuf'][Math.floor((a['self']+5))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+3))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+4))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+5))]*=a['brake']; return a['gmegabuf'][Math.floor((a['self']+4))]+=((a['g0']*a['dt'])*a['gmegabuf'][Math.floor((a['self']+13))]);})()):(a['free']+=1)); a['gmegabuf'][Math.floor((a['self']+12))]=a['age']; a['n']+=1;} a['n']=0; a['free2']=0; for(var mdparser_idx227=0;mdparser_idx227<a['num2'];mdparser_idx227++){a['self']=((a['n']*a['obj_size'])+a['base2']); a['age']=a['gmegabuf'][Math.floor((a['self']+12))]; ((Math.abs(((a['age']>0)?1:0))>0.00001)?((function(){((Math.abs(((a['age']>a['mage2'])?1:0))>0.00001)?(a['age']=0):(a['age']+=a['dt2'])); a['v2']=((pow(a['gmegabuf'][Math.floor((a['self']+3))], 2)+pow(a['gmegabuf'][Math.floor((a['self']+4))], 2))+pow(a['gmegabuf'][Math.floor((a['self']+5))], 2)); a['brake']=Math.max(0.1, (1-(((300*a['dt'])*a['cw'])*a['v2']))); a['gmegabuf'][Math.floor(a['self'])]+=(a['gmegabuf'][Math.floor((a['self']+3))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+1))]+=(a['gmegabuf'][Math.floor((a['self']+4))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+2))]+=(a['gmegabuf'][Math.floor((a['self']+5))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+3))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+4))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+5))]*=a['brake']; return a['gmegabuf'][Math.floor((a['self']+4))]+=(a['g0']*a['dt']);})()):(a['free2']+=1)); a['gmegabuf'][Math.floor((a['self']+12))]=a['age']; a['n']+=1;} a['new']=Math.floor((div(a['t_free'],8)*a['vol_att'])); a['new']=Math.min(a['new'], a['t_free']); ((Math.abs(((a['new']>0)?1:0))>0.00001)?((function(){var mdparser_idx228;var mdparser_count229=0;do{mdparser_count229+=1;mdparser_idx228=(function(){a['self']=((mod(a['t_ptr'],a['t_num'])*a['obj_size'])+a['tbase']); ((Math.abs(((a['gmegabuf'][Math.floor((a['self']+12))]<=0)?1:0))>0.00001)?((function(){a['theta']=(0.006*rand(12)); a['phi']=rand(12); a['v0']=((1+(0.3*(div(rand(100),100)-0.5)))*-a['tspeed']); a['vx']=((Math.sin(a['theta'])*Math.cos(a['phi']))*a['v0']); a['vy']=((Math.sin(a['theta'])*Math.sin(a['phi']))*a['v0']); a['vz']=(Math.cos(a['theta'])*a['v0']); a['vx1']=(((a['vx']*a['reg50'])+(a['vy']*a['reg53']))+(a['vz']*a['reg56'])); a['vy1']=(((a['vx']*a['reg51'])+(a['vy']*a['reg54']))+(a['vz']*a['reg57'])); a['vz1']=(((a['vx']*a['reg52'])+(a['vy']*a['reg55']))+(a['vz']*a['reg58'])); a['vx']=a['vx1']; a['vy']=a['vy1']; a['vz']=a['vz1']; a['ran']=div(((-a['v0']*a['dt'])*rand(100)),100); a['gmegabuf'][Math.floor(a['self'])]=(a['x0']+(a['ran']*a['reg56'])); a['gmegabuf'][Math.floor((a['self']+1))]=(a['y0']+(a['ran']*a['reg57'])); a['gmegabuf'][Math.floor((a['self']+2))]=(a['z0']+(a['ran']*a['reg58'])); a['gmegabuf'][Math.floor((a['self']+3))]=(a['vx']+a['vx0']); a['gmegabuf'][Math.floor((a['self']+4))]=(a['vy']+a['vy0']); a['gmegabuf'][Math.floor((a['self']+5))]=(a['vz']+a['vz0']); a['gmegabuf'][Math.floor((a['self']+12))]=a['dt2']; a['gmegabuf'][Math.floor((a['self']+13))]=(0.5+div(rand(100),200)); return a['new']-=1;})()):(0)); a['t_ptr']=mod((a['t_ptr']+1),a['t_num']); return ((a['new']>0)?1:0)})()}while(Math.abs(mdparser_idx228)>0.000010&&mdparser_count229<1048576);}())):(0)); a['n']=0; a['t_free']=0; for(var mdparser_idx230=0;mdparser_idx230<a['t_num'];mdparser_idx230++){a['self']=((a['n']*a['obj_size'])+a['tbase']); a['age']=a['gmegabuf'][Math.floor((a['self']+12))]; ((Math.abs(((a['age']>0)?1:0))>0.00001)?((function(){((Math.abs(((a['age']>a['t_age'])?1:0))>0.00001)?(a['age']=0):(a['age']+=a['dt2'])); a['v2']=((pow(a['gmegabuf'][Math.floor((a['self']+3))], 2)+pow(a['gmegabuf'][Math.floor((a['self']+4))], 2))+pow(a['gmegabuf'][Math.floor((a['self']+5))], 2)); a['brake']=Math.max(0.5, (1-((a['dt']*a['cw'])*a['v2']))); a['gmegabuf'][Math.floor(a['self'])]+=(a['gmegabuf'][Math.floor((a['self']+3))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+1))]+=(a['gmegabuf'][Math.floor((a['self']+4))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+2))]+=(a['gmegabuf'][Math.floor((a['self']+5))]*a['dt']); a['gmegabuf'][Math.floor((a['self']+3))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+4))]*=a['brake']; a['gmegabuf'][Math.floor((a['self']+5))]*=a['brake']; return a['gmegabuf'][Math.floor((a['self']+4))]+=(a['g0']*a['dt']);})()):(a['t_free']+=1)); a['gmegabuf'][Math.floor((a['self']+12))]=a['age']; a['n']+=1;} a['point']=(mod(((a['head_ptr']+a['obj_num'])-Math.floor(rand(div(a['obj_num'],4)))),a['obj_num'])*a['obj_size']); a['x0_']=(a['gmegabuf'][Math.floor(a['point'])]-a['reg07']); a['y0_']=(a['gmegabuf'][Math.floor((a['point']+1))]-a['reg08']); a['z0_']=(a['gmegabuf'][Math.floor((a['point']+2))]-a['reg09']); a['x1']=(((a['x0_']*a['reg30'])+(a['y0_']*a['reg31']))+(a['z0_']*a['reg32'])); a['y1']=(((a['x0_']*a['reg33'])+(a['y0_']*a['reg34']))+(a['z0_']*a['reg35'])); a['z1']=(((a['x0_']*a['reg36'])+(a['y0_']*a['reg37']))+(a['z0_']*a['reg38'])); a['q11']=(0.5+(div(a['x1'],a['z1'])*a['fac'])); a['q12']=(0.5+(div(a['y1'],a['z1'])*a['fac'])); a['q13']=(((((Math.abs(((a['z1']>0)?1:0))>0.00001)?(div(1,a['z1'])):(0))*Math.max(0, (1-div((1.2*Math.max(0, a['gmegabuf'][Math.floor((a['point']+12))])),a['max_age']))))*sqrt(a['treb_att']))*1.5); a['x0_']=(a['x0']-a['reg07']); a['y0_']=(a['y0']-a['reg08']); a['z0_']=(a['z0']-a['reg09']); a['x1']=(((a['x0_']*a['reg30'])+(a['y0_']*a['reg31']))+(a['z0_']*a['reg32'])); a['y1']=(((a['x0_']*a['reg33'])+(a['y0_']*a['reg34']))+(a['z0_']*a['reg35'])); a['z1']=(((a['x0_']*a['reg36'])+(a['y0_']*a['reg37']))+(a['z0_']*a['reg38'])); a['q14']=(0.5+(div(a['x1'],a['z1'])*a['fac'])); a['q15']=(0.5+(div(a['y1'],a['z1'])*a['fac'])); a['q16']=(div((((Math.abs(((a['z1']>0)?1:0))>0.00001)?(div(1,a['z1'])):(0))*Math.min(a['q29'], 200)),2)+10); a['dxcam']=(((a['x0']-a['xcam'])*a['dt'])*a['camspeed']); a['dycam']=((((a['y0']-a['ycam'])-0.01)*a['dt'])*a['camspeed']); a['dzcam']=((((a['z0']-a['zcam'])-a['camdist'])*a['dt'])*a['camspeed']); a['xcam']=(a['xcam']+a['dxcam']); a['ycam']=(a['ycam']+a['dycam']); a['zcam']=(a['zcam']+a['dzcam']); a['reg07']=a['xcam']; a['reg08']=a['ycam']; a['reg09']=a['zcam']; a['x1']=((((a['x0']-a['xcam'])*a['reg30'])+((a['y0']-a['ycam'])*a['reg31']))+((a['z0']-a['zcam'])*a['reg32'])); a['y1']=((((a['x0']-a['xcam'])*a['reg33'])+((a['y0']-a['ycam'])*a['reg34']))+((a['z0']-a['zcam'])*a['reg35'])); a['dist']=sqrt(((pow((a['x0']-a['xcam']), 2)+pow((a['y0']-a['ycam']), 2))+pow((a['z0']-a['zcam']), 2))); a['k1']=(div(a['dt'],Math.max(a['dist'], 0.06))*a['camlock']); a['v1']=(-a['k1']*a['y1']); a['v2']=(a['k1']*a['x1']); a['v3']=((-a['reg31']*a['k1'])*a['hlock']); a['c1']=Math.cos(a['v1']); a['c2']=Math.cos(a['v2']); a['c3']=Math.cos(a['v3']); a['s1']=Math.sin(a['v1']); a['s2']=Math.sin(a['v2']); a['s3']=Math.sin(a['v3']); a['reg40']=(a['c2']*a['c3']); a['reg41']=(a['c2']*a['s3']); a['reg42']=-a['s2']; a['reg43']=(((a['s1']*a['s2'])*a['c3'])-(a['c1']*a['s3'])); a['reg44']=(((a['s1']*a['s2'])*a['s3'])+(a['c1']*a['c3'])); a['reg45']=(a['s1']*a['c2']); a['reg46']=(((a['c1']*a['s2'])*a['c3'])+(a['s1']*a['s3'])); a['reg47']=(((a['c1']*a['s2'])*a['s3'])-(a['s1']*a['c3'])); a['reg48']=(a['c1']*a['c2']); a['q20']=(((a['reg40']*a['reg30'])+(a['reg41']*a['reg33']))+(a['reg42']*a['reg36'])); a['q21']=(((a['reg40']*a['reg31'])+(a['reg41']*a['reg34']))+(a['reg42']*a['reg37'])); a['q22']=(((a['reg40']*a['reg32'])+(a['reg41']*a['reg35']))+(a['reg42']*a['reg38'])); a['q23']=(((a['reg43']*a['reg30'])+(a['reg44']*a['reg33']))+(a['reg45']*a['reg36'])); a['q24']=(((a['reg43']*a['reg31'])+(a['reg44']*a['reg34']))+(a['reg45']*a['reg37'])); a['q25']=(((a['reg43']*a['reg32'])+(a['reg44']*a['reg35']))+(a['reg45']*a['reg38'])); a['q26']=(((a['reg46']*a['reg30'])+(a['reg47']*a['reg33']))+(a['reg48']*a['reg36'])); a['q27']=(((a['reg46']*a['reg31'])+(a['reg47']*a['reg34']))+(a['reg48']*a['reg37'])); a['q28']=(((a['reg46']*a['reg32'])+(a['reg47']*a['reg35']))+(a['reg48']*a['reg38'])); a['reg30']=a['q20']; a['reg31']=a['q21']; a['reg32']=a['q22']; a['reg33']=a['q23']; a['reg34']=a['q24']; a['reg35']=a['q25']; a['reg36']=a['q26']; a['reg37']=a['q27']; a['reg38']=a['q28']; a['q10']=(1.5-a['ycam']); a['posx']+=a['dxcam']; a['posz']+=a['dzcam']; a['q18']=(a['posz']*2); a['q19']=(a['posx']*2); a['crot']=(a['crot']+a['v3']); a['cfwd']=(a['cfwd']+(((a['dxcam']*a['reg36'])+(a['dycam']*a['reg37']))+(a['dzcam']*a['reg38']))); a['q1']=Math.cos(a['crot']); a['q2']=Math.sin(a['crot']); a['q3']=-a['q2']; a['q4']=a['q1']; a['cmovx']+=((-a['v1']*a['q1'])+(a['v2']*a['q2'])); a['cmovy']+=((-a['v1']*a['q3'])+(a['v2']*a['q4'])); a['q5']=(a['cmovx']*0.1); a['q6']=(a['cmovy']*0.1); a['q7']=(a['cfwd']*8); a['q8']=a['v3']; a['q9']=(((a['dxcam']*a['reg36'])+(a['dycam']*a['reg37']))+(a['dzcam']*a['reg38'])); a['q30']=a['dt2']; a['q31']=a['aspectx']; a['q32']=a['aspecty']; a['q17']=((Math.floor((a['colr']*10))+(Math.floor((a['colg']*10))*10))+(Math.floor((a['colb']*10))*100)); a['gg']=0.5; a['dx']=(-a['v2']*a['gg']); a['dy']=(a['v1']*a['gg']); a['zoom']=(1+((((a['dxcam']*a['reg36'])+(a['dycam']*a['reg37']))+(a['dzcam']*a['reg38']))*0)); a['monitor']=a['free'];}())","pixel_eqs_str":"(function(){a['rot']=a['q8'];}())","init_eqs_eel":"//How it works\n//The camera tries to follow the head of the firework and look into its direction\n//Camera speed and rotational speed is limited, camera lags behind\n//Camera angle is forced back into horizontal position\n\n//-------------- BEGIN USER ADJUSTABLE PART ---------------\n//SPEEDS\ngSpeed = 1;   //global speed, affects all other speeds\nhSpeed = .03;  //head speed\npSpeed = .08;   //speed of primary particles\ntSpeed = hspeed*4;  //speed of tail particles\n\n//CAMERA\nCamDist  = .01; //camera tries to keep this distance\nCamSpeed = .4; //camera follower speed\nCamLock = 8;   //how fast does camera angle lock on firework\nHLock = .1;    //force camera angle back into horizontal view\n\n//OTHER PARAMS\nsharp = 140;    //sharpness of bass/treb triggered head direction changes\ng0 = .04;      //gravitation\ncw = 10;       //air drag\n\n//---------- END USER ADJUSTABLE PART -----------------\n\nn = 0; loop (2000000,gmegabuf(n) = 0; n+=1);\nfac = .4; reg19 = fac;\n\n//SPARKS\nobj_num = 800; reg00 = obj_num;\nobj_size = 16; reg01 = obj_size;\nmax_age = 2; reg02 = max_age;\nhead_ptr = 0; \nfree = 0;\n\n\n//SPARKS2\nnum2 = 2000;\nfree2 = 0; //#\n//size2 = 10;\nptr2 = 0;\nmage2 = 1.4; reg22 = mage2;\nbase2 = 200000;\n\n//TAIL\nt_num = 500; reg10 =t_num;\nt_age = .7; reg12 = t_age;\ntbase = obj_num*obj_size; reg13 = tbase;\nt_ptr = 0; \nt_free = 0;\n\n\nx0 = (rand(10)-5)*.05; y0 = (rand(10)-5)*.05; z0 = (rand(10)-5)*.05;;\nxcam = 0; ycam = .0; zcam = -0;\n//Obj Structure - Index\n//0..2: x,y,z  3..5: vx,vy,vz  6..8: fx,fy,fz\n//9..11: rgb     12: age         13: size;\n\n\n//camera coordinate system\n  c1 = cos(0); c2 = cos(0); c3 = cos(0); \n  s1 = sin(0); s2 = sin(0); s3 = sin(0);\n\n  reg30 = c2*c1;            reg31 = c2*s1;            reg32 = -s2;\n  reg33 = s3*s2*c1 - c3*s1; reg34 = s3*s2*s1 + c3*c1; reg35 = s3*c2;\n  reg36 = c3*s2*c1 + s3*s1; reg37 = c3*s2*s1 - s3*c1; reg38 = c3*c2;\n\n\n//head coordinate system\n  reg50 = c2*c1;            reg51 = c2*s1;            reg52 = -s2;\n  reg53 = s3*s2*c1 - c3*s1; reg54 = s3*s2*s1 + c3*c1; reg55 = s3*c2;\n  reg56 = c3*s2*c1 + s3*s1; reg57 = c3*s2*s1 - s3*c1; reg58 = c3*c2;\n\ncolr = rand(10)/11; colg = rand(10)/11; colb = rand(10)/11;\nposx = rand(10)/10; posz = rand(10)/10;\n\nn1= rand(10)/20; n2 = rand(10)/20;\n\n\n//-----------------------------------------","frame_eqs_eel":"dt = gSpeed/fps; \ndec_s = 1-.015*30/fps; dec_m = pow(.95, 30/fps); dec_f = pow(.8, 30/fps);\ndt2 = dt ; //# unabhaengig machen ?\nvol_att = (bass + mid + treb)/3;\navg = avg*dec_s + (1-dec_s)*vol_att*(1.2-.2/cal);\n\nis_beat = above(vol_att, 1.5*peak) * above (time, t0+.2);\nt0 = if(is_beat,time,t0);\npeak = peak*dec_m  + (1-dec_m)*vol_att;\nindex = (index + is_beat) %16;\nindex2 = (index2 + is_beat*bnot(index))%12;\n\n//HEAD MOVEMENT x0,y0,z0 based on z-move in HEAD Coords\nright = pow(bass_att-avg,1) * (bass_att > avg) *sharp*n1*sin(time*3)/cal; \nup =  pow(treb_att-avg,1) * (treb_att > avg) * sharp*n2*cos(time*1)/cal; \nright = pow(bass_att,3)*2;\nup = pow(treb_att,3)*2;\ncal = cal*dec_s + (1-dec_s)*sqrt(up*up+right*right)/4;\ncal = max(cal,.3);\n\nif ((index%2==0)*is_beat,\n  if((bass_att < avg+11), n1 = rand(100)/100-.5,0);\n  if((treb_att < avg+11), n2 = rand(100)/100-.5,0),0);\n\nsp0 = (.5+sqrt(vol_att*2))*hSpeed;\nsp0 = .1;\ndec = if(sp0 > speed,dec_f,dec_m); //checken\nspeed =  speed*dec + (1-dec)*sp0;;\n\n//HEAD COORD SYS\nc1 = cos(up*dt); c2 = cos(right*dt); c3 = 1; \ns1 = sin(up*dt); s2 = sin(right*dt); s3 = 0;\nreg40 = c2*c3;            reg41 = c2*s3;            reg42 = -s2;\nreg43 = s1*s2*c3 - c1*s3; reg44 = s1*s2*s3 + c1*c3; reg45 = s1*c2;\nreg46 = c1*s2*c3 + s1*s3; reg47 = c1*s2*s3 - s1*c3; reg48 = c1*c2;\n\nq20 = reg40*reg50 + reg41*reg53 + reg42*reg56;\nq21 = reg40*reg51 + reg41*reg54 + reg42*reg57;\nq22 = reg40*reg52 + reg41*reg55 + reg42*reg58;\nq23 = reg43*reg50 + reg44*reg53 + reg45*reg56;\nq24 = reg43*reg51 + reg44*reg54 + reg45*reg57;\nq25 = reg43*reg52 + reg44*reg55 + reg45*reg58;\nq26 = reg46*reg50 + reg47*reg53 + reg48*reg56;\nq27 = reg46*reg51 + reg47*reg54 + reg48*reg57;\nq28 = reg46*reg52 + reg47*reg55 + reg48*reg58;\n\nreg50 = q20; reg51 = q21; reg52 = q22;\nreg53 = q23; reg54 = q24; reg55 = q25;\nreg56 = q26; reg57 = q27; reg58 = q28;\nvx0 = reg56*speed;\nvy0 = reg57*speed;\nvz0 = reg58*speed;\nx0 = x0 + vx0*dt ;          reg04 = x0; \ny0 = max(-.5,min(0.5,y0 + vy0*dt)) ; reg05 = y0; \nz0 = z0 + vz0*dt ;          reg06 = z0; \n\nstyle = n1 > 0;\n//SPARK QUEUE - insert new objects\nif (style ==0, new = max(0,min(32*(mid>1.2),free)),0);\nif (style ==1, new = max(0,min(250*(vol_att*200 > 200+obj_num-free),free)),0);\nif (new < 8, new = 0, 0);\n\nn = 0; m = new; \ndec = if (new > 0,0.2,dec_f); \nnew_ = new_*dec + (1-dec)*new;\nq29 = new_;\nif (new > 0,\n  if (index%4==0,\n    csum = sqrt(bass_att*bass_att + mid_att*mid_att + treb_att*treb_att) ;\n    colr = bass_att/csum;\n    colb = mid_att/csum;\n    colg = treb_att/csum;,0);\n//    sum = sqrt(colr*colr + colb*colb + colg*colg) +.1;\n  //  colr /= sum; colg /= sum; colb/= sum; ,0);\n  while (exec2 (\n    self = (head_ptr%obj_num)*obj_size;\n    if (gmegabuf(self+12) <= 0,\n      // for rad.sym use theta = 1.5, phi = 0..6\n      theta = n2*4-n1*rand(12); phi = rand(12);\n\n      v0 = (1 + .1*(rand(100)/100-.5))*pSpeed; \n      vx = sin(theta)*cos(phi)*v0;\n      vy = sin(theta)*sin(phi)*v0;\n      vz = cos(theta)*v0;\n      vx1 = vx*reg50 + vy*reg53+ vz*reg56;\n      vy1 = vx*reg51 + vy*reg54+ vz*reg57;\n      vz1 = vx*reg52 + vy*reg55+ vz*reg58;\n      vx = vx1; vy = vy1; vz = vz1;\n\n      gmegabuf(self)   = x0;\n      gmegabuf(self+1) = y0;\n      gmegabuf(self+2) = z0;\n      gmegabuf(self+3) = vx+vx0;\n      gmegabuf(self+4) = vy+vy0;\n      gmegabuf(self+5) = vz+vz0;\n      gmegabuf(self+9) = colr;\n      gmegabuf(self+10) = colg;\n      gmegabuf(self+11) = colb;\n      gmegabuf(self+12) = dt2;\n      gmegabuf(self+13) = rand(100)/200+.5;//size\n      gmegabuf(self+14) = min(free2,3* (n%6==0)) * (index2%2);\n      n += 1; m -= 1;\n   ,0;);\n   head_ptr = (head_ptr+1)%obj_num;, m > 0))\n,0);\n\n//SPARK QUEUE - calc movement\nn = 0; free = 0;\nloop (obj_num,\n  self = n*obj_size;\n  age = gmegabuf(self+12);\n  if (age > 0, \n    if (age > max_age, age = 0, age += dt2);\n      new = min (free2, gmegabuf(self+14));\n      if (new > 0,\n        while (exec2(  \n          self2 = (ptr2%num2)*obj_size+base2;\n          if (gmegabuf(self2+12) <= 0,\n            gmegabuf(self2)   = gmegabuf(self);\n            gmegabuf(self2+1) = gmegabuf(self+1);\n            gmegabuf(self2+2) = gmegabuf(self+2);\n            gmegabuf(self2+3) = gmegabuf(self+3)+pSpeed*(rand(100)/100-.5)*1*bass;//#Streuung variieren\n            gmegabuf(self2+4) = gmegabuf(self+4)+pSpeed*(rand(100)/100-.5)*1*bass;\n            gmegabuf(self2+5) = gmegabuf(self+5)+pSpeed*(rand(100)/100-.5)*1*bass;\n            gmegabuf(self2+9) = pow(gmegabuf(self+9),2);\n            gmegabuf(self2+10) =pow(gmegabuf(self+10),2);\n            gmegabuf(self2+11) =pow(gmegabuf(self+11),2);\n            gmegabuf(self2+12) = dt2;\n            gmegabuf(self2+13) = rand(100)/200+.5;//size\n            new -=1; free2 -= 1;\n          ,0;);\n        ptr2 = (ptr2 + 1)%num2;, new > 0));\n      ,gmegabuf(self+14) = 0);      //#nochmal pruefen !\n      v2 = pow(gmegabuf(self+3),2)+pow(gmegabuf(self+4),2)+pow(gmegabuf(self+5),2);\n      brake = max(0.5,1-dt/(1+gmegabuf(self+14))*cw*v2);\n      gmegabuf(self)   += gmegabuf(self+3)*dt;\n      gmegabuf(self+1) += gmegabuf(self+4)*dt;\n      gmegabuf(self+2) += gmegabuf(self+5)*dt;\n      gmegabuf(self+3) *= brake;\n      gmegabuf(self+4) *= brake;\n      gmegabuf(self+5) *= brake;\n      gmegabuf(self+4) += g0*dt * gmegabuf(self+13); //Gravitation\n  ,free += 1); //otherwise\n  gmegabuf(self+12) = age;\n  n += 1;\n);\n\n//2nd SPARK QUEUE - movement\nn = 0; free2 = 0;\nloop (num2,\n  self = n*obj_size + base2;\n  age = gmegabuf(self+12);\n  if (age > 0, \n    if (age > mage2, age = 0, age +=dt2);\n    v2 = pow(gmegabuf(self+3),2)+pow(gmegabuf(self+4),2)+pow(gmegabuf(self+5),2);\n    brake = max(0.1,1-300*dt*cw*v2);\n    gmegabuf(self)   += gmegabuf(self+3)*dt;\n    gmegabuf(self+1) += gmegabuf(self+4)*dt;\n    gmegabuf(self+2) += gmegabuf(self+5)*dt;\n    gmegabuf(self+3) *= brake;\n    gmegabuf(self+4) *= brake;\n    gmegabuf(self+5) *= brake;\n    gmegabuf(self+4) += g0*dt; //Gravitation\n  ,free2 += 1);\n  gmegabuf(self+12) = age;\n  n += 1;\n);\n\n//TAIL\nnew = int(t_free/8*vol_att); //# vol ?\nnew = min (new, t_free);\nif (new > 0,\n  while (exec2 (\n    self = (t_ptr%t_num)*obj_size+tbase;\n    if (gmegabuf(self+12) <= 0,\n\n      theta = .006*rand(12); phi = rand(12); ;\n      v0 = (1 + .3*(rand(100)/100-.5))*-tSpeed; \n      vx = sin(theta)*cos(phi)*v0;\n      vy = sin(theta)*sin(phi)*v0;\n      vz = cos(theta)*v0;\n      vx1 = vx*reg50 + vy*reg53+ vz*reg56;\n      vy1 = vx*reg51 + vy*reg54+ vz*reg57;\n      vz1 = vx*reg52 + vy*reg55+ vz*reg58;\n      vx = vx1; vy = vy1; vz = vz1; ran = -v0*dt*rand(100)/100;\n      gmegabuf(self)   = x0 + ran*reg56;\n      gmegabuf(self+1) = y0 + ran*reg57;\n      gmegabuf(self+2) = z0 + ran*reg58;\n      gmegabuf(self+3) = vx+vx0;\n      gmegabuf(self+4) = vy+vy0;\n      gmegabuf(self+5) = vz+vz0;\n      gmegabuf(self+12) = dt2;\n      gmegabuf(self+13) = .5 + rand(100)/200;//size\n      new -= 1;\n   ,0;);\n  t_ptr = (t_ptr+1)%t_num;, new > 0))\n,0);\n\n\n//TAIL QUEUE - calc movement\nn = 0; t_free = 0;\nloop (t_num,\n  self = n*obj_size + tbase;\n  age = gmegabuf(self+12);\n  if (age > 0, \n    if (age > t_age, age = 0, age +=dt2);\n    v2 = pow(gmegabuf(self+3),2)+pow(gmegabuf(self+4),2)+pow(gmegabuf(self+5),2);\n    brake = max(0.5,1-dt*cw*v2); \n    gmegabuf(self)   += gmegabuf(self+3)*dt;\n    gmegabuf(self+1) += gmegabuf(self+4)*dt;\n    gmegabuf(self+2) += gmegabuf(self+5)*dt;\n    gmegabuf(self+3) *= brake;\n    gmegabuf(self+4) *= brake;\n    gmegabuf(self+5) *= brake;\n    gmegabuf(self+4) += g0*dt; //Gravitation\n  ,t_free += 1); //otherwise\n  gmegabuf(self+12) = age;\n  n += 1;\n);\n\n//SPARK and HEAD COORD for use in comp shader\npoint = ((head_ptr+obj_num-int(rand(obj_num/4)))%obj_num)*obj_size;\nx0_ = gmegabuf(point)-reg07; y0_ = gmegabuf(point+1)-reg08; z0_ = gmegabuf(point+2)-reg09;\nx1 = x0_*reg30 + y0_*reg31 + z0_*reg32;\ny1 = x0_*reg33 + y0_*reg34 + z0_*reg35;\nz1 = x0_*reg36 + y0_*reg37 + z0_*reg38;\nq11 = .5 + x1/z1*fac;\nq12 = .5 + y1/z1*fac;\nq13 = if (z1>0,1/z1,0) * max(0,1-1.2*max(0,gmegabuf(point+12))/max_age) * sqrt(treb_att)*1.5;\n\nx0_ = x0-reg07; y0_ = y0-reg08; z0_ = z0-reg09;\nx1 = x0_*reg30 + y0_*reg31 + z0_*reg32;\ny1 = x0_*reg33 + y0_*reg34 + z0_*reg35;\nz1 = x0_*reg36 + y0_*reg37 + z0_*reg38;\nq14 = .5 + x1/z1*fac;\nq15 = .5 + y1/z1*fac;\nq16 = if (z1>0, 1/z1,0) * min(q29,200)/2+10;\n\n\n//FOLLOW WITH CAMERA\ndxcam = (x0-xcam)*dt*CamSpeed; dycam = (y0-ycam-.01)*dt*CamSpeed; dzcam = (z0-zcam-CamDist)*dt*CamSpeed; \nxcam = xcam +dxcam; ycam = ycam +dycam; zcam = zcam +dzcam; \nreg07 = xcam; reg08 = ycam; reg09 = zcam;\n\n//ROTATE VIEPOINT\nx1 = (x0-XCam)*reg30 + (y0-yCam) *reg31 + (z0-zCam)*reg32;\ny1 = (x0-XCam)*reg33 + (y0-YCam) *reg34 + (z0-zCam)*reg35;\ndist = sqrt(pow(x0-xcam,2) + pow(y0-ycam,2) + pow(z0-zcam,2));\nk1 = dt/max(dist,.06)*CamLock;\nv1 =  -k1*(y1); v2 = k1*(x1); v3 = -reg31*k1*HLock;\n\nc1 = cos(v1); c2 = cos(v2); c3 = cos(v3); \ns1 = sin(v1); s2 = sin(v2); s3 = sin(v3);\nreg40 = c2*c3; reg41 = c2*s3; reg42 = -s2;\nreg43 = s1*s2*c3 - c1*s3; reg44 = s1*s2*s3 + c1*c3; reg45 = s1*c2;\nreg46 = c1*s2*c3 + s1*s3; reg47 = c1*s2*s3 - s1*c3; reg48 = c1*c2;\n\nq20 = reg40*reg30 + reg41*reg33 + reg42*reg36;\nq21 = reg40*reg31 + reg41*reg34 + reg42*reg37;\nq22 = reg40*reg32 + reg41*reg35 + reg42*reg38;\nq23 = reg43*reg30 + reg44*reg33 + reg45*reg36;\nq24 = reg43*reg31 + reg44*reg34 + reg45*reg37;\nq25 = reg43*reg32 + reg44*reg35 + reg45*reg38;\nq26 = reg46*reg30 + reg47*reg33 + reg48*reg36;\nq27 = reg46*reg31 + reg47*reg34 + reg48*reg37;\nq28 = reg46*reg32 + reg47*reg35 + reg48*reg38;\nreg30 =q20; reg31 =q21; reg32 =q22; \nreg33 =q23; reg34 =q24; reg35 =q25;\nreg36 =q26; reg37 =q27; reg38 =q28;\n\n//Fake altitude\nq10 = (1.5-ycam);\n\n//TEXTURE GND MOVEMENT\nposx += dxcam; posz += dzcam;\nq18 = posz*2; \nq19 = posx*2;\n\n//CLOUDS MOVEMENT\ncrot = crot + v3;\ncfwd = cfwd + (dxcam*reg36 + dycam*reg37 + dzcam*reg38);\n\nq1 = cos(crot);q2 = sin(crot); q3 = - q2; q4 = q1;\ncmovx += -v1 * q1 + v2 * q2;\ncmovy += -v1 * q3 + v2 * q4;\nq5 = cmovx*.1;\nq6 = cmovy*.1;\nq7 = cfwd*8;\nq8 = v3;\nq9 = (dxcam*reg36 + dycam*reg37 + dzcam*reg38);\n\n\nq30 = dt2;\nq31 = aspectx;\nq32 = aspecty;\n\nq17 = int(colr*10) + int(colg*10)*10 + int(colb*10)*100;\n\ngg = .5;\ndx = -v2*gg; dy = v1*gg;\n\nzoom = 1+(dxcam*reg36 + dycam*reg37 + dzcam*reg38)*0;\nmonitor = free;\n\n\n//#funkenflug (mittels self +14) weniger cw optimieren\n//colr etc durch q var ersetzen\n//Kamera-Offset !","pixel_eqs_eel":"rot = q8;","warp":"shader_body\n{\n    // sample previous frame\n    ret = texture( sampler_main, uv ).xyz;\n    \n    // darken (decay) over time\n    ret *= 0.94; //or try: ret -= 0.004;\n}","comp":"#define sat saturate\nvec3 struc;\nvec2 uvc, rs, uv1, uv2,uv3, uv4, prof,prof2;\nfloat rad1, mask, ir0, k1, omask, z;\nconst vec2 centre = vec2 (q10-0.5,-(q11-0.5));\nconst vec2 pos = vec2 (q15,q16);\nconst vec2 hor = texsize.zw*vec2 (1,0);\nconst float blue = rand_preset.y/2;;\nvec3 lavcol (float t){return smoothstep(0,0.8,pow (t,vec3(1,2,4)));}\n\nvec2 noise3 (vec2 uvi) {\n  return (texture(sampler_noise_mq,uvi).xyz\n         +texture(sampler_noise_mq,uvi*2).xyz/2  \n         +texture(sampler_noise_mq,uvi*4).xyz/4\n         +pow(texture(sampler_noise_mq,uvi*8+time*0.01).xyz,2)/4-0.8); }\n\nvec3 project (vec2 uvi) {float z;\n  z = clamp(1/uvi.y,-16,16); return vec3 (z*(uvi.x-0.5),z-2,z);}\n\nshader_body {\nuvc = (uv-0.5) * aspect.xy + 0.5 -centre;\nomask = clamp(15*(0.55-uvc.y), 0.0, 1.0);\nuv2 = project (uvc) * vec2(1,1.5);\nvec2 ring = (texture(sampler_noise_mq,-time/16+length(uv2)/2).xyz-0.5).xy*sat(1-length(uv2));\nuv += ring.xy *(1-omask)*.02;\n\nvec3 retl = max(texture(sampler_main, uv-hor).xyz,texture(sampler_main, uv-hor.yx).xyz);\nvec3 retr = texture(sampler_main, uv+hor).xyz;\nvec3 rets = max (retl,retr)*min(0.3+rad*2,1);\nstruc = max(max(texture(sampler_main, uv).xyz,rets)*vec3(2,2,.7+1-2*blue)*1.3,((texture(sampler_blur2, uv).xyz * scale2) + bias2)*q1*3);\nret = struc; \n\n//Planet\nir0 = 24*(.15/(pos.y-0.1))/aspect.y;\nuv1 = (uvc-pos);\nk1 = sqrt(abs(1-ir0*ir0*uv1.y*uv1.y)+0.0); //sollte sqrt sein, 0.01 = test\nrs = vec2 (acos(uv1.x*ir0/k1), uv1.y*ir0/k1);\nmask = ir0*length(uv1)<1;\nrs = rs/14+vec2(time*-0.007,0);\nprof  = noise3(rs);\nprof2 = noise3(rs+texsize.zw);\nfloat hmask = sat(4-8*pos.y);\n\nret *= !mask;\nret += struc*mask*hmask; //struc vor dem Planeten zeigen\n\nuv4 = ((uvc-0.5)*.1 +0.5+centre/aspect.xy);\nret += sat (-dot (uv1,uvc-0.5))*mask*hmask*140*((texture(sampler_blur1, uv4).xyz * scale1) + bias1);\n\nret += ((-uv1.y/ir0*20)*vec3(0,0.4,0.9)+lavcol(sat(prof)*pow(k1,4)))*mask;\nret += -mask * sat (dot(-prof+prof2,uv1))*50;\n\nret += texture(sampler_noise_hq,uv2/4+ring.x*0.1).r*blue* !mask*sat(1.3-length(uv2)) * vec3(0.2,0,1);\n\n\nz = 1/(2-uv.y) ;\nuv3 = vec2(uvc.x-.5,1)*z*vec2(q8,q9)+vec2(0,time*0.005);\nuv3.y -= noise3(uv3).r*-0.008;\nuv4 = ((uvc-vec2 (q12,0.3))*.4 +0.5+centre/aspect.xy);\nret += !mask*clamp(1-2*uvc.y, 0.0, 1.0)*1*clamp(noise3(uv3).r*((texture(sampler_blur2, uv4).xyz * scale2) + bias2)+vec3(0,0.1,0.25), 0.0, 1.0);\nret /= vec3(1.8,1.0,1.1);\n}","warp_hlsl":"shader_body\n{\n    // sample previous frame\n    ret = tex2D( sampler_main, uv ).xyz;\n    \n    // darken (decay) over time\n    ret *= 0.94; //or try: ret -= 0.004;\n}","comp_hlsl":"#define sat saturate\nfloat3 struc;\nfloat2 uvc, rs, uv1, uv2,uv3, uv4, prof,prof2;\nfloat rad1, mask, ir0, k1, omask, z;\nstatic const float2 centre = float2 (q10-0.5,-(q11-0.5));\nstatic const float2 pos = float2 (q15,q16);\nstatic const float2 hor = texsize.zw*float2 (1,0);\nstatic const float blue = rand_preset.y/2;;\nfloat3 lavcol (float t){return smoothstep(0,0.8,pow (t,float3(1,2,4)));}\n\nfloat2 noise3 (float2 uvi) {\n  return (tex2D(sampler_noise_mq,uvi)\n         +tex2D(sampler_noise_mq,uvi*2)/2  \n         +tex2D(sampler_noise_mq,uvi*4)/4\n         +pow(tex2D(sampler_noise_mq,uvi*8+time*0.01),2)/4-0.8); }\n\nfloat3 project (float2 uvi) {float z;\n  z = clamp(1/uvi.y,-16,16); return float3 (z*(uvi.x-0.5),z-2,z);}\n\nshader_body {\nuvc = (uv-0.5) * aspect.xy + 0.5 -centre;\nomask = saturate (15*(0.55-uvc.y));\nuv2 = project (uvc) * float2(1,1.5);\nfloat2 ring = (tex2D(sampler_noise_mq,-time/16+length(uv2)/2)-0.5).xy*sat(1-length(uv2));\nuv += ring.xy *(1-omask)*.02;\n\nfloat3 retl = max(GetPixel(uv-hor),GetPixel(uv-hor.yx));\nfloat3 retr = GetPixel(uv+hor);\nfloat3 rets = max (retl,retr)*min(0.3+rad*2,1);\nstruc = max(max(GetPixel(uv),rets)*float3(2,2,.7+1-2*blue)*1.3,GetBlur2(uv)*q1*3);\nret = struc; \n\n//Planet\nir0 = 24*(.15/(pos.y-0.1))/aspect.y;\nuv1 = (uvc-pos);\nk1 = sqrt(abs(1-ir0*ir0*uv1.y*uv1.y)+0.0); //sollte sqrt sein, 0.01 = test\nrs = float2 (acos(uv1.x*ir0/k1), uv1.y*ir0/k1);\nmask = ir0*length(uv1)<1;\nrs = rs/14+float2(time*-0.007,0);\nprof  = noise3(rs);\nprof2 = noise3(rs+texsize.zw);\nfloat hmask = sat(4-8*pos.y);\n\nret *= !mask;\nret += struc*mask*hmask; //struc vor dem Planeten zeigen\n\nuv4 = ((uvc-0.5)*.1 +0.5+centre/aspect.xy);\nret += sat (-dot (uv1,uvc-0.5))*mask*hmask*140*GetBlur1(uv4);\n\nret += ((-uv1.y/ir0*20)*float3(0,0.4,0.9)+lavcol(sat(prof)*pow(k1,4)))*mask;\nret += -mask * sat (dot(-prof+prof2,uv1))*50;\n\nret += tex2D(sampler_noise_hq,uv2/4+ring.x*0.1).r*blue* !mask*sat(1.3-length(uv2)) * float3(0.2,0,1);\n\n\nz = 1/(2-uv.y) ;\nuv3 = float2(uvc.x-.5,1)*z*float2(q8,q9)+float2(0,time*0.005);\nuv3.y -= noise3(uv3).r*-0.008;\nuv4 = ((uvc-float2 (q12,0.3))*.4 +0.5+centre/aspect.xy);\nret += !mask*saturate(1-2*uvc.y)*1*saturate(noise3(uv3).r*GetBlur2(uv4)+float3(0,0.1,0.25));\nret /= float3(1.8,1.0,1.1);\n}"}