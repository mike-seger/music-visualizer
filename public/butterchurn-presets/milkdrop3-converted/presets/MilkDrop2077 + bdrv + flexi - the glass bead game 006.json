{"version":1,"baseVals":{"rating":0,"gammaadj":1,"decay":0.94,"echo_zoom":0.498,"echo_orient":2,"wave_mode":7,"additivewave":1,"modwavealphabyvolume":1,"wave_brighten":0,"brighten":1,"invert":1,"wave_a":0.001,"wave_scale":1.286,"wave_smoothing":0.63,"modwavealphastart":0.71,"modwavealphaend":1.3,"warpscale":1.331,"zoom":13.29089,"dx":-0.28,"dy":-0.32,"warp":0.01,"wave_r":0.65,"wave_g":0.65,"wave_b":0.65,"ob_size":0.05,"ob_a":0.6,"ib_size":0.05,"ib_r":1,"ib_g":0,"ib_b":0,"ib_a":0.4,"mv_x":64,"mv_y":48,"mv_l":0,"mv_a":0},"shapes":[{"baseVals":{"enabled":1,"sides":14,"num_inst":366,"rad":0.0303,"tex_ang":0.62832,"g":1,"b":1,"r2":1,"b2":1,"a2":1,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 1)*3.1415)*0.01)*a['bass'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0002*Math.cos(a['ma']))); a['my']=(a['my']+(0.0002*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.8);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(bass,1)*3.1415*.01*bass);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0002*cos(ma));\nmy=my+(.0002*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.8));"},{"baseVals":{"enabled":1,"sides":14,"num_inst":408,"rad":0.03,"tex_ang":0.62832,"g":1,"b":1,"r2":1,"b2":1,"a2":1,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 1)*3.1415)*0.05)*a['bass'])); a['ma']=(a['ma']-(((above(a['mid'], 1)*3.1415)*0.05)*a['mid'])); a['mx']=(a['mx']+(0.0001*Math.cos(a['ma']))); a['my']=(a['my']+(0.0001*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.1);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(bass,1)*3.1415*.05*bass);\nma=ma-(above(mid,1)*3.1415*.05*mid);\n\nmx=mx+(.0001*cos(ma));\nmy=my+(.0001*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.1));"},{"baseVals":{"enabled":1,"sides":14,"num_inst":262,"rad":0.0297,"tex_ang":0.62832,"g":1,"b":1,"r2":1,"b2":1,"a2":1,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['mid'], 1)*3.1415)*0.01)*a['mid'])); a['ma']=(a['ma']-(((above(a['treb'], 1)*3.1415)*0.01)*a['treb'])); a['mx']=(a['mx']+(0.0004*Math.cos(a['ma']))); a['my']=(a['my']+(0.0004*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.3);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(mid,1)*3.1415*.01*mid);\nma=ma-(above(treb,1)*3.1415*.01*treb);\n\nmx=mx+(.0004*cos(ma));\nmy=my+(.0004*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.3));"},{"baseVals":{"enabled":1,"sides":14,"num_inst":276,"rad":0.0303,"tex_ang":0.62832,"g":1,"b":1,"r2":1,"b2":1,"a2":1,"border_a":0},"init_eqs_str":"(function(){a['ma'] = 0; a['mx'] = 0; a['my'] = 0; }());","frame_eqs_str":"(function(){a['ma']=(a['ma']+(((above(a['bass'], 0.5)*3.1415)*0.02)*a['bass'])); a['ma']=(a['ma']-(((above(a['treb'], 0.5)*3.1415)*0.02)*a['treb'])); a['mx']=(a['mx']+(0.0008*Math.cos(a['ma']))); a['my']=(a['my']+(0.0008*Math.sin(a['ma']))); a['mx']=((Math.abs(above(a['mx'], 0.9))>0.00001)?((0.9-a['mx'])):(a['mx'])); a['my']=((Math.abs(above(a['my'], 0.9))>0.00001)?((0.9-a['my'])):(a['my'])); a['mx']=((Math.abs(below(a['mx'], 0.1))>0.00001)?((0.9+a['mx'])):(a['mx'])); a['my']=((Math.abs(below(a['my'], 0.1))>0.00001)?((0.9+a['my'])):(a['my'])); a['x']=a['mx']; a['y']=a['my']; a['a']=above(((a['bass']+a['mid'])+a['treb']), 0.2);}());","init_eqs_eel":"","frame_eqs_eel":"ma=ma+(above(bass,.5)*3.1415*.02*bass);\nma=ma-(above(treb,.5)*3.1415*.02*treb);\n\nmx=mx+(.0008*cos(ma));\nmy=my+(.0008*sin(ma));\n\nmx=if(above(mx,.9),(.9-mx),mx);\nmy=if(above(my,.9),(.9-my),my);\nmx=if(below(mx,.1),(.9+mx),mx);\nmy=if(below(my,.1),(.9+my),my);\n\nx=mx;\ny=my;\n\na=(above(bass+mid+treb,.2));"}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['t1'] = 0; a['myx'] = 0; a['q5'] = 0; a['myy'] = 0; a['v'] = 0; a['mm'] = 0; a['tt'] = 0; a['t3'] = 0; a['musictime'] = 0; a['bm'] = 0; a['q4'] = 0; a['q26'] = 0; a['mt'] = 0; a['mx'] = 0; a['mn'] = 0; a['t2'] = 0; a['vol'] = 0; a['bb'] = 0; a['q27'] = 0; a['zoom']=1; a['xpos']=0; a['ypos']=0;}());","frame_eqs_str":"(function(){a['decay']=1; a['vol']=a['vol']; a['mv_r']=(0.5+(0.4*Math.sin((a['time']*1.324)))); a['mv_g']=(0.5+(0.4*Math.cos((a['time']*1.371)))); a['zoom']=1; a['musictime']=(a['musictime']+a['vol']); a['q4']=(Math.sin((a['musictime']*0.02))*0.3); a['q5']=(Math.sin((a['musictime']*0.01))*0.3); a['dx']=(Math.sin((a['musictime']*0.1))*0.01); a['dy']=(Math.cos((a['musictime']*0.069))*0.01); a['bb']=((a['bb']*0.99)+(a['bass']*0.02)); a['mm']=((a['mm']*0.99)+(a['mid']*0.02)); a['tt']=((a['tt']*0.99)+(a['treb']*0.02)); a['mx']=Math.max(Math.max(a['bb'], a['mm']), a['tt']); a['mn']=Math.min(Math.min(a['bb'], a['mm']), a['tt']); a['t1']=div((a['bb']-a['mn']),(a['mx']-a['mn'])); a['t2']=div((a['mm']-a['mn']),(a['mx']-a['mn'])); a['t3']=div((a['tt']-a['mn']),(a['mx']-a['mn'])); a['v']=0.08; a['bm']=(a['bm']+((a['t1']-a['t2'])*a['v'])); a['mt']=(a['mt']+((a['t2']-a['t3'])*a['v'])); a['q26']=-a['bm']; a['q27']=(a['mt']*2);}());","pixel_eqs_str":"(function(){a['myx']=(a['y']-0.5); a['myy']=(a['x']-0.25); a['dy']=((2*((2*a['myx'])*a['myy']))+0.15); a['dx']=(((2*((a['myy']*a['myy'])-(a['myx']*a['myx'])))+div(Math.sin(div(a['time'],4)),55))+0.04125);}());","init_eqs_eel":"zoom=1;\nxpos=0;\nypos=0;","frame_eqs_eel":"decay=1;\n\n//vol= (bass+mid+treb)*0.55;\nvol=vol;\n\n\nmv_r = 0.5 + 0.4*sin(time*1.324);\nmv_g = 0.5 + 0.4*cos(time*1.371);\n\n\n\n\nzoom=1;\n\nmusictime=musictime+vol;\nq4=sin(musictime*0.02)*0.3;\nq5=sin(musictime*0.01)*0.3;\n\ndx=sin(musictime*0.1)*0.01;\ndy=cos(musictime*0.069)*0.01;\n\nbb = bb*0.99 + bass*0.02;\nmm = mm*0.99 + mid*0.02;\ntt = tt*0.99 + treb*0.02;\n\nmx = max(max(bb,mm),tt);\nmn = min(min(bb,mm),tt);\n\nt1 = (bb-mn)/(mx-mn);\nt2 = (mm-mn)/(mx-mn);\nt3 = (tt-mn)/(mx-mn);\n\nv = 0.08;\nbm = bm + (t1-t2)*v;\nmt = mt + (t2-t3)*v;\n\n\nq26 = -bm; // rotation\nq27 = mt*2; // growth","pixel_eqs_eel":"myx = y-.5;\nmyy = x-0.25;\ndy = 2*(2*myx*myy)+.15;\ndx = 2*((myy*myy) - (myx*myx))+sin(time/4)/55+.04125 ;","warp":"#define sat saturate\n#define snl sampler_noise_lq\nconst float quality = 3, a = aspect.x/aspect.y, k1=16, k2 = 0.04, smod = q20, xmod=q22;\nvec3 rsl, rsl3, ret1, sky, mod,mod2;\nvec2 dz, uv0, uv1, uv2, uv3, uv4, uvc, dz1;\nfloat  lav_gnd,lav_gnd2, smask, ripple, l,d,i,p;\nconst float hory = q6, xyscale = q7, alti = q8;\nconst vec2 hor = texsize.zw*vec2 (1.5,0), dir = vec2 (q3,q4), modran = vec2 (q15,q16);\nconst vec2 dpxy = vec2 (q12, q13);\nconst vec3 mov = vec3 (q10,q11,0);\n\nvec2 noise2 (vec2 uvi) {vec2 tmp = vec2(1); float s = 1; uvi*=xyscale*32;\n  for (int n = 1; n <= 2; n +=1 ) {tmp *= 1-texture(snl,uvi*s).xyz; s*= 3;} return tmp;}\n\nvec2 noise3 (vec3 uvi, vec3 mod) {float tmp = 1; float s = 2; float diff,path;\n\n tmp = (texture(sampler_noise_mq,uvi*xyscale*vec2(1,.5)+modran.x).r-0.6)*mod.z*2.5; \n  diff = tmp;\n  for (int n = 1; n <= 4; n +=1 ) {tmp += texture(snl,uvi.xy*s*xyscale).xyz/s/2; s*= 3;}\n  tmp = mix (0.3,tmp,clamp(+_pow(uvi.x*xmod,2), 0.0, 1.0));\n  tmp = mix (0.2,tmp,1-_pow(sin(smod*abs(uvi.x)+(uvi.y*.02+(1-tmp)*mod.x)),8));\n return 1-pow(tmp,0.8+mod.y);}\n\nvec3 rs_lav (vec2 uvi, float berg) {  float z; vec2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return vec3(rs,z)+mov; }\n\n\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body {\nuv = uv_orig; uv1 = uv-0.5;\nlav_gnd=  -min (texture(sampler_fc_main,uv).b, texture(sampler_fc_main,uv+hor.yx*1.5).b);\nrsl = rs_lav(uv1,lav_gnd); \nmod = texture(sampler_noise_hq,rsl.xy*xyscale+modran).xyz;\ni=0, p=0;\nfor (int n=1; n <= quality; n++) {\n  p =  ((lav_gnd+noise3 (rsl, mod))/quality);\n  i += p;  lav_gnd -= p*0.1+i*0.07; rsl = rs_lav(uv1,lav_gnd);}\n\nl = clamp(-lav_gnd, 0.0, 1.0);\nd= 2;\ndz = -1/rsl.z*d*dir;\nripple = (noise3 (rsl,mod) - noise3 (rsl+vec3 (dz,0),mod))*sat(rsl.z/16)*42;\nripple += ((noise2 (rsl-dz) - noise2 (rsl+dz))* (1-l))+0.05;\nripple = 1-exp(-ripple*2);\n\nret =vec3 (ripple, sqrt (rsl.z)*0.05, l);\n\nfloat tmp = dpxy.y + rsl.z;\nuv.x += -(uv.x-0.5)*dpxy.y / tmp;\nuv.y += (alti+l*k1) * (sqrt(k2/(tmp))-sqrt(k2/rsl.z));\n\nret =mix (ret, texture(sampler_fc_main,uv).xyz-0.004, vec3 (0.75,0,.2));\n}","comp":"vec2 complex_div(vec2 numerator, vec2 denominator){\n   return vec2( numerator.x*denominator.x + numerator.y*denominator.y,\n                  numerator.y*denominator.x - numerator.x*denominator.y)/\n          (denominator.x*denominator.x + denominator.y*denominator.y);\n}\n\nvec2 uv_polar(vec2 domain, vec2 center){\n   vec2 c = domain - center;\n   float rad_hq = length(c);\n   float ang_hq = atan(c.x,c.y);\n   return vec2(ang_hq, rad_hq);\n}\n\nvec2 uv_polar_logarithmic(vec2 domain, vec2 center, int fins, float log_factor, vec2 coord){\n   vec2 polar = uv_polar(domain, center);\n   return vec2(polar.x*fins+coord.x, log_factor*log(1/polar.y) + coord.y);\n}\n\nvec2 uv_moebius_transformation(vec2 domain, vec2 zeroPoint, vec2 infinityPoint,float zoom){\n   return complex_div((domain - zeroPoint)*zoom, domain - infinityPoint)+0.5;\n}\n\nvec2 uv_bipolar_logarithmic(vec2 domain, vec2 northPole, vec2 southPole, int fins, float log_factor, vec2 coord){\n   vec2 help_uv = uv_moebius_transformation(domain, northPole, southPole, 1);\n   return uv_polar_logarithmic(help_uv,0.5,fins,log_factor,coord)*vec2(M_INV_PI_2,1);\n}\n\nvec2 uv_scale(vec2 domain, vec2 center, vec2 scale){\n   return center + (domain-center)*scale;\n}\nvec2 uv_lens_half_sphere(vec2 domain, vec2 position, float radius, float refractivity){\n   vec2 polar = uv_polar(domain, position);\n   float cone = clamp(1-polar.y/radius, 0.0, 1.0);\n   float halfsphere = sqrt(1-_pow(cone-1,2));\n   float w = atan(1-cone,halfsphere);\n   float refrac_w = w-asin(sin(w)/refractivity);\n   float refrac_d = 1-cone - sin(refrac_w)*halfsphere/cos(refrac_w);\n   vec2 refrac_uv =position+vec2(sin(polar.x),cos(polar.x))*refrac_d*radius;\n   bool mask =(length(domain-position)<radius);\n   return !mask*domain + \n           mask*refrac_uv;\n}\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body\n{\n\n\n\n\n\nvec2 uvo = uv;\nuv = 0.5+(uv-0.5)*aspect.wz;\nuv = uv_bipolar_logarithmic(uv, vec2(0,0.5), vec2(1,0.5), 4, 0.55, vec2(q26,0.1*q27));\nuv = 0.5 + (1.0 - abs( fract( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.995; // Eo.S. mirror code with cutted borders\nuv = uv_lens_half_sphere(uv, 0.5, 0.5, 3).yx;\nuv = uv_bipolar_logarithmic(uv, vec2(0,0.5), vec2(1,0.5), 4, 0.55, vec2(q26,0.1*q27)).yx;\nuv = 0.5 + (1.0 - abs( fract( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.995; // Eo.S. mirror code with cutted borders\nret =texture(sampler_main, uv).xyz;\n//MilkDrop3 Brightness Mode:\nret *= 1.8;\n//MilkDrop3 Color Mode:\nret /= vec3(-0.4,-2.2,2.0);\n//MilkDrop3 Burn Mode:\nret =mix(ret,2,texture(sampler_main, uv).xyz.z*1.36);\n}","warp_hlsl":"#define sat saturate\n#define snl sampler_noise_lq\nstatic const float quality = 3, a = aspect.x/aspect.y, k1=16, k2 = 0.04, smod = q20, xmod=q22;\nfloat3 rsl, rsl3, ret1, sky, mod,mod2;\nfloat2 dz, uv0, uv1, uv2, uv3, uv4, uvc, dz1;\nfloat  lav_gnd,lav_gnd2, smask, ripple, l,d,i,p;\nstatic const float hory = q6, xyscale = q7, alti = q8;\nstatic const float2 hor = texsize.zw*float2 (1.5,0), dir = float2 (q3,q4), modran = float2 (q15,q16);\nstatic const float2 dpxy = float2 (q12, q13);\nstatic const float3 mov = float3 (q10,q11,0);\n\nfloat2 noise2 (float2 uvi) {float2 tmp = 1; float s = 1; uvi*=xyscale*32;\n  for (int n = 1; n <= 2; n +=1 ) {tmp *= 1-tex2D(snl,uvi*s); s*= 3;} return tmp;}\n\nfloat2 noise3 (float3 uvi, float3 mod) {float tmp = 1; float s = 2; float diff,path;\n\n tmp = (tex2D(sampler_noise_mq,uvi*xyscale*float2(1,.5)+modran.x).r-0.6)*mod.z*2.5; \n  diff = tmp;\n  for (int n = 1; n <= 4; n +=1 ) {tmp += tex2D(snl,uvi.xy*s*xyscale)/s/2; s*= 3;}\n  tmp = lerp (0.3,tmp,saturate(+pow(uvi.x*xmod,2)));\n  tmp = lerp (0.2,tmp,1-pow(sin(smod*abs(uvi.x)+(uvi.y*.02+(1-tmp)*mod.x)),8));\n return 1-pow (tmp,0.8+mod.y);}\n\nfloat3 rs_lav (float2 uvi, float berg) {  float z; float2 rs;\n  z = 1/(uvi.y+hory)*(alti-berg*k1); \n  z *= z * k2;\n  rs.x = uvi.x * a*z ; rs.y = z; \n  return float3(rs,z)+mov; }\n\n\nshader_body {\nuv = uv_orig; uv1 = uv-0.5;\nlav_gnd=  -min (tex2D(sampler_fc_main,uv).b, tex2D(sampler_fc_main,uv+hor.yx*1.5).b);\nrsl = rs_lav(uv1,lav_gnd); \nmod = tex2D(sampler_noise_hq,rsl.xy*xyscale+modran);\ni=0, p=0;\nfor (int n=1; n <= quality; n++) {\n  p =  ((lav_gnd+noise3 (rsl, mod))/quality);\n  i += p;  lav_gnd -= p*0.1+i*0.07; rsl = rs_lav(uv1,lav_gnd);}\n\nl = saturate(-lav_gnd);\nd= 2;\ndz = -1/rsl.z*d*dir;\nripple = (noise3 (rsl,mod) - noise3 (rsl+float3 (dz,0),mod))*sat(rsl.z/16)*42;\nripple += ((noise2 (rsl-dz) - noise2 (rsl+dz))* (1-l))+0.05;\nripple = 1-exp(-ripple*2);\n\nret = float3 (ripple, sqrt (rsl.z)*0.05, l);\n\nfloat tmp = dpxy.y + rsl.z;\nuv.x += -(uv.x-0.5)*dpxy.y / tmp;\nuv.y += (alti+l*k1) * (sqrt(k2/(tmp))-sqrt(k2/rsl.z));\n\nret = lerp (ret, tex2D(sampler_fc_main,uv)-0.004, float3 (0.75,0,.2));\n}","comp_hlsl":"float2 complex_div(float2 numerator, float2 denominator){\n   return float2( numerator.x*denominator.x + numerator.y*denominator.y,\n                  numerator.y*denominator.x - numerator.x*denominator.y)/\n          (denominator.x*denominator.x + denominator.y*denominator.y);\n}\n\nfloat2 uv_polar(float2 domain, float2 center){\n   float2 c = domain - center;\n   float rad_hq = length(c);\n   float ang_hq = atan2(c.x,c.y);\n   return float2(ang_hq, rad_hq);\n}\n\nfloat2 uv_polar_logarithmic(float2 domain, float2 center, int fins, float log_factor, float2 coord){\n   float2 polar = uv_polar(domain, center);\n   return float2(polar.x*fins+coord.x, log_factor*log(1/polar.y) + coord.y);\n}\n\nfloat2 uv_moebius_transformation(float2 domain, float2 zeroPoint, float2 infinityPoint,float zoom){\n   return complex_div((domain - zeroPoint)*zoom, domain - infinityPoint)+0.5;\n}\n\nfloat2 uv_bipolar_logarithmic(float2 domain, float2 northPole, float2 southPole, int fins, float log_factor, float2 coord){\n   float2 help_uv = uv_moebius_transformation(domain, northPole, southPole, 1);\n   return uv_polar_logarithmic(help_uv,0.5,fins,log_factor,coord)*float2(M_INV_PI_2,1);\n}\n\nfloat2 uv_scale(float2 domain, float2 center, float2 scale){\n   return center + (domain-center)*scale;\n}\nfloat2 uv_lens_half_sphere(float2 domain, float2 position, float radius, float refractivity){\n   float2 polar = uv_polar(domain, position);\n   float cone = saturate(1-polar.y/radius);\n   float halfsphere = sqrt(1-pow(cone-1,2));\n   float w = atan2(1-cone,halfsphere);\n   float refrac_w = w-asin(sin(w)/refractivity);\n   float refrac_d = 1-cone - sin(refrac_w)*halfsphere/cos(refrac_w);\n   float2 refrac_uv =position+float2(sin(polar.x),cos(polar.x))*refrac_d*radius;\n   bool mask =(length(domain-position)<radius);\n   return !mask*domain + \n           mask*refrac_uv;\n}\nshader_body\n{\n\n\n\n\n\nfloat2 uvo = uv;\nuv = 0.5+(uv-0.5)*aspect.wz;\nuv = uv_bipolar_logarithmic(uv, float2(0,0.5), float2(1,0.5), 4, 0.55, float2(q26,0.1*q27));\nuv = 0.5 + (1.0 - abs( frac( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.995; // Eo.S. mirror code with cutted borders\nuv = uv_lens_half_sphere(uv, 0.5, 0.5, 3).yx;\nuv = uv_bipolar_logarithmic(uv, float2(0,0.5), float2(1,0.5), 4, 0.55, float2(q26,0.1*q27)).yx;\nuv = 0.5 + (1.0 - abs( frac( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.995; // Eo.S. mirror code with cutted borders\nret = GetPixel(uv);\n//MilkDrop3 Brightness Mode:\nret *= 1.8;\n//MilkDrop3 Color Mode:\nret /= float3(-0.4,-2.2,2.0);\n//MilkDrop3 Burn Mode:\nret = lerp(ret,2,GetPixel(uv).z*1.36);\n}"}