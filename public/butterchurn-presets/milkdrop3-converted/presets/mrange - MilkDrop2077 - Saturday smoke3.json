{"version":2,"baseVals":{"rating":5,"gammaadj":1.46,"decay":0.935,"echo_zoom":1.007,"echo_alpha":0.5,"echo_orient":2,"wave_mode":6,"additivewave":1,"wave_thick":1,"brighten":1,"darken":1,"wave_a":1,"wave_scale":2.718,"wave_smoothing":0.9,"wave_mystery":1,"fshader":1,"wave_g":0.4,"wave_b":0.1,"wave_y":0.6,"mv_a":0},"shapes":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"","frame_eqs_str":"(function(){a['time']=(a['time']*0.5); a['zoom']=(1+(Math.sin((a['time']*0.7))*0.1)); a['warp']=0; a['rot']=(0.1*Math.sin((a['time']*0.3)));}())","pixel_eqs_str":"(function(){a['x']=(a['x']+(0.03*Math.sin(((a['time']*1.2)+(a['y']*10))))); a['y']=(a['y']+(0.02*Math.cos(((a['time']*1.5)+(a['x']*8)))));}())","init_eqs_eel":"","frame_eqs_eel":"time = time * 0.5;\nzoom = 1 + sin(time*0.7)*0.1;\nwarp = 0;\nrot = 0.1*sin(time*0.3);","pixel_eqs_eel":"x = x + 0.03*sin(time*1.2 + y*10);\ny = y + 0.02*cos(time*1.5 + x*8);","warp":"shader_body{\n\n//Shader from https://www.shadertoy.com/view/3ftSz2\n//Ported to MilkDrop by MilkDrop2077\n\n    vec4 o = vec4(0,0,0,0);\n    float T = time;\n    vec2 r = vec2(1.0, 1.0/aspect.x);\n    vec4 U = vec4(0,1,2,3);\n    \n    for(float i=0.0, z=0.0, d=0.0; i<28.0; i+=1.0) {\n        // Convert UV to ray direction\n        vec2 centered_uv = (uv-0.5)*r*2.0;\n        vec4 p = vec4(z*normalize(vec3(centered_uv,1.0)),0);\n        p.z -= 4.0;\n        \n        // Reset for plane accumulation\n        d = 9e9;\n        \n        for(float j=5.0, D=0.0; j<9.0; j+=1.0) {\n            // Plane thickness calculation\n            D = 2.0/(j-3.0+q1)+p.y/3.0;\n            \n            // Apply distortion and rotation\n            vec4 P = p;\n            P.x -= 0.3*sin(p.y+T);\n            \n            // Create rotation matrix\n            float angle = j-T+p.y+11.0*U.x;\n            mat2 rot = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n            P.xz = vec2(P.x*rot[0][0] + P.z*rot[0][1], P.x*rot[1][0] + P.z*rot[1][1]);\n            \n            // Mirror space\n            P = abs(P)-0.01;\n            \n            // Distance field calculation\n            float dist = min(\n                max(P.z, P.x-D)+2E-2,\n                length(P.xz-D*U.yx)\n            );\n            \n            // Track closest distance\n            d = min(d, dist);\n            \n            // Color generation\n            vec4 P_color = 1.2+sin(j+U.xyzy+z);\n            \n            // Accumulate color\n            o += P_color.w*P_color/max(dist,1E-3);\n        }\n        \n        // Ray marching step\n        z += 0.6*d + 1E-3;\n    }\n    \n    // Tone mapping with music reactivity\n    float brightness = 0.8 + 0.2*bass_att;\n    ret = tanh(o/1e3 * brightness);\n}","comp":"shader_body\n{\n//MilkDrop3 Flip Mode:\nuv = 1-uv;\n\n\n\n\n\n//MilkDrop3 Rotate Mode:\nuv = uv.xy;\n\n\n    vec2 d = texsize.zw*4;\n    float dx = ( ((texture(sampler_blur1, uv+vec2(1,0)*d).xyz * scale1) + bias1)-((texture(sampler_blur1, uv-vec2(1,0)*d).xyz * scale1) + bias1) ).y;\n    float dy = ( ((texture(sampler_blur1, uv+vec2(0,1)*d).xyz * scale1) + bias1)-((texture(sampler_blur1, uv-vec2(0,1)*d).xyz * scale1) + bias1) ).y;\n    vec2 uv_y = uv-vec2(dx,dy)*.7;\n\nret = mix(vec3(2.6,2,2)*texture(sampler_fc_main, uv_y).x,\n                              vec3(2.6,2,3), ((texture(sampler_blur1, uv).xyz * scale1) + bias1).y*0.05);\n\nret = mix(ret,vec3(-.2,-0.2,-0.3),texture(sampler_main, uv).xyz.z);\n\n//MilkDrop3 Invert Mode:\nret = 1 - ret;\n//MilkDrop3 Color Mode:\nret /= vec3(1.8,2.2,2.1);\n//MilkDrop3 Blow Mode:\nvec3 avg_col = ((texture(sampler_blur2, uv).xyz * scale2) + bias2);ret = abs(avg_col - ret)*2;\n//MilkDrop3 SoftColor Mode:\nret += vec3(-0.2,0.1,0.3);\n}","warp_hlsl":"shader_body{\n\n//Shader from https://www.shadertoy.com/view/3ftSz2\n//Ported to MilkDrop by MilkDrop2077\n\n    float4 o = float4(0,0,0,0);\n    float T = time;\n    float2 r = float2(1.0, 1.0/aspect.x);\n    float4 U = float4(0,1,2,3);\n    \n    for(float i=0.0, z=0.0, d=0.0; i<28.0; i+=1.0) {\n        // Convert UV to ray direction\n        float2 centered_uv = (uv-0.5)*r*2.0;\n        float4 p = float4(z*normalize(float3(centered_uv,1.0)),0);\n        p.z -= 4.0;\n        \n        // Reset for plane accumulation\n        d = 9e9;\n        \n        for(float j=5.0, D=0.0; j<9.0; j+=1.0) {\n            // Plane thickness calculation\n            D = 2.0/(j-3.0+q1)+p.y/3.0;\n            \n            // Apply distortion and rotation\n            float4 P = p;\n            P.x -= 0.3*sin(p.y+T);\n            \n            // Create rotation matrix\n            float angle = j-T+p.y+11.0*U.x;\n            float2x2 rot = float2x2(cos(angle), -sin(angle), sin(angle), cos(angle));\n            P.xz = float2(P.x*rot[0][0] + P.z*rot[0][1], P.x*rot[1][0] + P.z*rot[1][1]);\n            \n            // Mirror space\n            P = abs(P)-0.01;\n            \n            // Distance field calculation\n            float dist = min(\n                max(P.z, P.x-D)+2E-2,\n                length(P.xz-D*U.yx)\n            );\n            \n            // Track closest distance\n            d = min(d, dist);\n            \n            // Color generation\n            float4 P_color = 1.2+sin(j+U.xyzy+z);\n            \n            // Accumulate color\n            o += P_color.w*P_color/max(dist,1E-3);\n        }\n        \n        // Ray marching step\n        z += 0.6*d + 1E-3;\n    }\n    \n    // Tone mapping with music reactivity\n    float brightness = 0.8 + 0.2*bass_att;\n    ret = tanh(o/1e3 * brightness);\n}","comp_hlsl":"shader_body\n{\n//MilkDrop3 Flip Mode:\nuv = 1-uv;\n\n\n\n\n\n//MilkDrop3 Rotate Mode:\nuv = uv.xy;\n\n\n    float2 d = texsize.zw*4;\n    float1 dx = ( GetBlur1(uv+float2(1,0)*d)-GetBlur1(uv-float2(1,0)*d) ).y;\n    float1 dy = ( GetBlur1(uv+float2(0,1)*d)-GetBlur1(uv-float2(0,1)*d) ).y;\n    float2 uv_y = uv-float2(dx,dy)*.7;\n\nret = lerp(float3(2.6,2,2)*tex2D(sampler_fc_main, uv_y).x,\n                              float3(2.6,2,3), GetBlur1(uv).y*0.05);\n\nret = lerp(ret,float3(-.2,-0.2,-0.3),GetPixel(uv).z);\n\n//MilkDrop3 Invert Mode:\nret = 1 - ret;\n//MilkDrop3 Color Mode:\nret /= float3(1.8,2.2,2.1);\n//MilkDrop3 Blow Mode:\nfloat3 avg_col = GetBlur2(uv);ret = abs(avg_col - ret)*2;\n//MilkDrop3 SoftColor Mode:\nret += float3(-0.2,0.1,0.3);\n}"}