{"version":2,"baseVals":{"rating":5,"gammaadj":1.46,"decay":0.935,"echo_zoom":1.007,"echo_alpha":0.5,"echo_orient":2,"wave_mode":2,"wave_thick":1,"brighten":1,"darken":1,"wave_a":0,"wave_scale":2.911,"wave_smoothing":0.9,"modwavealphastart":1.11,"modwavealphaend":1.23,"warpanimspeed":1.459,"warpscale":2.007,"fshader":1,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0.5,"wave_g":0.5,"wave_b":0.8,"ob_r":1,"ob_g":1,"ob_b":1,"ib_size":0.11,"mv_a":0},"shapes":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['index2'] = 0; a['index'] = 0; a['q22'] = 0; a['q21'] = 0; a['q29'] = 0; a['movex'] = 0; a['q1'] = 0; a['dec_med'] = 0; a['index3'] = 0; a['rott'] = 0; a['is_beat'] = 0; a['q31'] = 0; a['q23'] = 0; a['k1'] = 0; a['q24'] = 0; a['dec_slow'] = 0; a['q10'] = 0; a['q4'] = 0; a['q26'] = 0; a['p2'] = 0; a['avg'] = 0; a['movez'] = 0; a['beat'] = 0; a['vol'] = 0; a['p1'] = 0; a['peak'] = 0; a['q2'] = 0; a['q27'] = 0; a['q3'] = 0; a['t0'] = 0; a['q28'] = 0; a['q30'] = 0; a['q20'] = 0;}());","frame_eqs_str":"(function(){a['dec_med']=pow(0.7, div(30,a['fps'])); a['dec_slow']=pow(0.96, div(30,a['fps'])); a['beat']=Math.max(Math.max(a['bass'], a['mid']), a['treb']); a['avg']=((a['avg']*a['dec_slow'])+(a['beat']*(1-a['dec_slow']))); a['is_beat']=(above(a['beat'], ((0.2+a['avg'])+a['peak']))*above(a['time'], (a['t0']+0.2))); a['t0']=((a['is_beat']*a['time'])+((1-a['is_beat'])*a['t0'])); a['peak']=((a['is_beat']*a['beat'])+(((1-a['is_beat'])*a['peak'])*a['dec_med'])); a['index']=mod((a['index']+a['is_beat']),8); a['index2']=mod((a['index2']+(a['is_beat']*bnot(a['index']))),4); a['index3']=mod((a['index3']+((a['is_beat']*bnot(a['index']))*bnot(a['index2']))),3); a['q20']=a['avg']; a['q21']=a['beat']; a['q22']=a['peak']; a['q23']=a['index']; a['q24']=a['is_beat']; a['q26']=((a['bass_att']+a['mid_att'])+a['treb_att']); a['q27']=(a['index']+1); a['q28']=a['index2']; a['k1']=(a['is_beat']*equal(mod(a['index'],2), 0)); a['p1']=((a['k1']*(a['p1']+1))+((1-a['k1'])*a['p1'])); a['p2']=((a['dec_med']*a['p2'])+((1-a['dec_med'])*a['p1'])); a['rott']=div((a['p2']*3.1416),2); a['q1']=Math.cos(a['rott']); a['q2']=Math.sin(a['rott']); a['q3']=-a['q2']; a['q4']=a['q1']; a['vol']=(((a['vol']*a['dec_slow'])+(a['q26']*(1-a['dec_slow'])))+(a['q24']*a['q1'])); a['q10']=(a['q27']*a['q28']); a['movex']=(a['movex']+div((0.03*30),a['fps'])); a['q29']=a['movex']; a['movez']=(a['movez']+div((0.07*30),a['fps'])); a['q30']=a['movez']; a['q31']=(6+(4*(1+Math.sin(div(a['time'],7))))); a['zoom']=1; a['dy']=0.00; a['dx']=0.0; a['warp']=0; a['rot']=0.0;}());","pixel_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"dec_med = pow (0.7, 30/fps);\ndec_slow = pow (0.96, 30/fps);\nbeat = max (max (bass, mid), treb); \navg = avg*dec_slow + beat*(1-dec_slow);\nis_beat = above(beat, .2+avg+peak) * above (time, t0+.2);\nt0 = is_beat*time + (1-is_beat)*t0;\npeak = is_beat * beat + (1-is_beat)*peak*dec_med;\nindex = (index + is_beat) %8;\nindex2 = (index2 + is_beat*bnot(index))%4;\nindex3 = (index3 + is_beat*bnot(index)*bnot(index2))%3;\n\nq20 = avg;\nq21 = beat;\nq22 = peak;\nq23 = index;\nq24 = is_beat;\nq26 = bass_att + mid_att + treb_att ;\nq27 = index + 1;\nq28 = index2;\n\n\nk1 =  is_beat*equal(index%2,0);\np1 =  k1*(p1+1) + (1-k1)*p1;\np2 = dec_med * p2+ (1-dec_med)*p1;\nrott = p2 * 3.1416/2;\n\nq1 = cos(rott);\nq2 = sin(rott);\nq3 = -q2;\nq4 = q1;\n\n\nvol = vol*dec_slow + q26 * (1-dec_slow) + q24*q1;\nq10 = q27*q28;;\n\n\nmovex = movex + .03*30/fps;\nq29 = movex;\nmovez = movez + .07*30/fps;\nq30 = movez;\n\nq31 = 6 + 4*(1+sin(time/7));\n\nzoom = 1;\ndy = .00;\ndx = .0;\nwarp = 0;\nrot = .0;","pixel_eqs_eel":"","warp":"//Shader from Yohei Nishitsuji\n//https://x.com/YoheiNishitsuji/status/1949255489864581135\n//Ported to MilkDrop by MilkDrop2077\n\n// Helper: 2D rotation matrix\nmat2 rotate2D(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n    return mat2(c, -s, s, c);\n}\n\n// Helper: HSV to RGB\nvec3 hsv(float h, float s, float v) {\n    vec3 k = vec3(1.0, 2.0/3.0, 1.0/3.0);\n    vec3 p = abs(fract(h + k) * 6.0 - 3.0);\n    return v * mix(vec3(1,1,1), clamp(p - 1.0, 0.0, 1.0), s);\n}\n\n// Helper: mod (like GLSL)\nfloat mod(float a, float b) {\n    return a - b * floor(a / b);\n}\n\nshader_body\n{\n    uv = (uv_orig * aspect.xy - 0.5 * aspect.xy) / aspect.y;\n    float t = time / 3.0;\n    vec3 col = vec3(0.0, 0.0,0.0);\n    float g = 0.0;\n\n    for (float i = 0.0; i < 60.0; i++) {\n        vec3 p = vec3(uv * 1.5 * (cos(t * 0.3+q10) * 0.2 + 0.6), g - 0.4);\n        p.xz = (p.xz * rotate2D(t * 0.5));\n        float s = 1.0;\n        float e = 0.0;\n\n        for (int j = 0; j < 12; j++) {\n            e = max(1.01, 7.0 / dot(p, p));\n            p = abs(abs(p) * e - vec3(4.6+q1/6, 2.0+q1/5, 1.2+q1/3));\n            p = vec3(3.5, 5.0, 0.5) - p;\n            s *= e;\n        }\n\n        g += mod(length(p.zx), p.y) / s;\n        float final_s = log2(s) / g;\n        col += hsv(e, p.z, final_s / 1e4);\n    }\n\n    ret = vec4(sqrt(col), 1.0);\n}","comp":"#define sat saturate\nfloat glow, tmp, lamp, dist, bdist, b2dist, dist_c, smask;\nvec2 dz, uv1, uv3, uv4;\nconst vec3 CamPos = vec3(q4,q5,q6);\nconst float myzoom = q7,  res = 255, res2 = 64, tele = q16;\nconst mat3 RotMat = mat3(q20,q21,q22,q23,q24,q25,q26,q27,q28);\n\nvec2 fstep2 (vec2 xy) {return 1.0/res*round(res*xy);}\n\nfloat GetDist(vec2 uvi) {vec2 tmp; tmp = (texture (sampler_fc_main, uvi).gb); \nreturn 1.0078125-tmp.y -0.015625*tmp.x;} // = 1-(tmp.y + 1.0/res2*(tmp.x-.10));}\n\nfloat GetDistB(vec2 uvi)  {return 1-((texture(sampler_blur1, uvi).xyz * scale1) + bias1).b;}\nvec3 screen3;\nvec3 lavcol (float t) {return clamp(vec3(pow(t,1),pow(t,2.),pow(t,5)), 0.0, 1.0);}\n\nvec3 t = vec3(3,3,3);\nvec3 s = vec3(1,1,1);\nvec3 ts = -cross(s,t);\nvec3 pos = vec3 (1,1,1);\n\nvec3 project (float dist) {  float z;\n  z = 18*dist/(screen3 * cross(ts,-t));\n  return vec3((cross(pos,screen3) * float2x3(ts,t))-z,-z);}\n\nshader_body {//MilkDrop3 Split Mode:\nuv = vec2 (abs(uv.x-0.5), uv.y);\n\nscreen3 = vec3 ((uv-.95)*aspect.xy,tele-0+1);\nvec3 uv2 = project(.1);\nvec3 sky = sat(lavcol (1-(abs(22/uv2.z))))-.2;\n\nbdist = min(GetDist(uv),GetDistB(uv));;\n\nsky *= sat(3*bdist-2);\nret = sat(mix (0, sky, bdist));\n\nfloat struc = mix(texture(sampler_main, uv).xyz.r, ((texture(sampler_blur1, (uv-.5)/5+.5).xyz * scale1) + bias1).r,((texture(sampler_blur1, uv).xyz * scale1) + bias1).r-.8);\nret += lavcol(struc)*(2-pow(bdist,1+180*mid_att));\n//ret = struc;\n//MilkDrop3 Color Mode:\nret /= vec3(1.5,1.9,0.9);\n}","warp_hlsl":"//Shader from Yohei Nishitsuji\n//https://x.com/YoheiNishitsuji/status/1949255489864581135\n//Ported to MilkDrop by MilkDrop2077\n\n// Helper: 2D rotation matrix\nfloat2x2 rotate2D(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n    return float2x2(c, -s, s, c);\n}\n\n// Helper: HSV to RGB\nfloat3 hsv(float h, float s, float v) {\n    float3 k = float3(1.0, 2.0/3.0, 1.0/3.0);\n    float3 p = abs(frac(h + k) * 6.0 - 3.0);\n    return v * lerp(float3(1,1,1), saturate(p - 1.0), s);\n}\n\n// Helper: mod (like GLSL)\nfloat mod(float a, float b) {\n    return a - b * floor(a / b);\n}\n\nshader_body\n{\n    uv = (uv_orig * aspect.xy - 0.5 * aspect.xy) / aspect.y;\n    float t = time / 3.0;\n    float3 col = float3(0.0, 0.0,0.0);\n    float g = 0.0;\n\n    for (float i = 0.0; i < 60.0; i++) {\n        float3 p = float3(uv * 1.5 * (cos(t * 0.3+q10) * 0.2 + 0.6), g - 0.4);\n        p.xz = mul(rotate2D(t * 0.5), p.xz);\n        float s = 1.0;\n        float e = 0.0;\n\n        for (int j = 0; j < 12; j++) {\n            e = max(1.01, 7.0 / dot(p, p));\n            p = abs(abs(p) * e - float3(4.6+q1/6, 2.0+q1/5, 1.2+q1/3));\n            p = float3(3.5, 5.0, 0.5) - p;\n            s *= e;\n        }\n\n        g += mod(length(p.zx), p.y) / s;\n        float final_s = log2(s) / g;\n        col += hsv(e, p.z, final_s / 1e4);\n    }\n\n    ret = float4(sqrt(col), 1.0);\n}","comp_hlsl":"#define sat saturate\nfloat glow, tmp, lamp, dist, bdist, b2dist, dist_c, smask;\nfloat2 dz, uv1, uv3, uv4;\nstatic const float3 CamPos = float3(q4,q5,q6);\nstatic const float myzoom = q7,  res = 255, res2 = 64, tele = q16;\nstatic const float3x3 RotMat = float3x3(q20,q21,q22,q23,q24,q25,q26,q27,q28);\n\nfloat2 fstep2 (float2 xy) {return 1.0/res*round(res*xy);}\n\nfloat GetDist(float2 uvi) {float2 tmp; tmp = (tex2D (sampler_fc_main, uvi).gb); \nreturn 1.0078125-tmp.y -0.015625*tmp.x;} // = 1-(tmp.y + 1.0/res2*(tmp.x-.10));}\n\nfloat GetDistB(float2 uvi)  {return 1-GetBlur1(uvi).b;}\nfloat3 screen3;\nfloat3 lavcol (float t) {return saturate(float3(pow(t,1),pow(t,2.),pow(t,5)));}\n\nstatic float3 t = float3(3,3,3);\nstatic float3 s = float3(1,1,1);\nstatic float3 ts = -cross(s,t);\nstatic float3 pos = float3 (1,1,1);\n\nfloat3 project (float dist) {  float z;\n  z = 18*dist/mul(cross(ts,-t),screen3);\n  return float3(mul(float2x3(ts,t),cross(pos,screen3))-z,-z);}\n\nshader_body {//MilkDrop3 Split Mode:\nuv = float2 (abs(uv.x-0.5), uv.y);\n\nscreen3 = float3 ((uv-.95)*aspect.xy,tele-0+1);\nfloat3 uv2 = project(.1);\nfloat3 sky = sat(lavcol (1-(abs(22/uv2.z))))-.2;\n\nbdist = min(GetDist(uv),GetDistB(uv));;\n\nsky *= sat(3*bdist-2);\nret = sat(lerp (0, sky, bdist));\n\nfloat struc = lerp(GetPixel(uv).r, GetBlur1((uv-.5)/5+.5).r,GetBlur1(uv).r-.8);\nret += lavcol(struc)*(2-pow(bdist,1+180*mid_att));\n//ret = struc;\n//MilkDrop3 Color Mode:\nret /= float3(1.5,1.9,0.9);\n}"}