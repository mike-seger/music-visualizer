{"version":2,"baseVals":{"rating":3,"gammaadj":1.98,"decay":0.5,"echo_zoom":1,"echo_alpha":0.5,"echo_orient":3,"wave_mode":3,"additivewave":1,"wave_dots":1,"modwavealphabyvolume":1,"wave_brighten":0,"wrap":0,"darken":1,"wave_a":0.02,"wave_scale":0.509,"wave_smoothing":0.09,"modwavealphastart":0.4,"modwavealphaend":1.8,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0,"wave_g":0,"wave_b":0,"wave_x":0.2,"wave_y":0.2,"ob_size":0.105,"ib_r":0.7,"ib_g":0,"ib_b":1,"mv_x":64,"mv_y":48,"mv_l":1,"mv_b":0.9,"mv_a":0,"b1x":0.7,"b2x":0.4,"b3x":0.5,"b1ed":0},"shapes":[{"baseVals":{"sides":28,"thickoutline":1,"textured":1,"x":0.84,"y":0.67,"rad":0.97233,"tex_zoom":1.41391,"g":1,"b":1,"g2":0,"b2":0.8,"border_r":0.59,"border_g":0.81,"border_b":0.69,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"sides":13,"additive":1,"rad":0.4149,"tex_zoom":0.46393,"r":0.4,"g":0.4,"b":0.5,"r2":0.3,"g2":0.4,"b2":0.3,"a2":1,"border_g":0,"border_b":0,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"sides":14,"additive":1,"x":0.55,"y":0.1,"rad":0.13479,"tex_zoom":2.00674,"r":0.6,"g":0.2,"a":0.1,"g2":0,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":1,"sides":10,"additive":1,"num_inst":4,"rad":0.06716,"ang":3.14159,"tex_zoom":1.64463,"r":0.4,"g":0.5,"b":1,"a":0.16,"r2":0.5,"g2":0.3,"b2":0.7,"border_r":0.3,"border_g":0.1,"border_b":0.6,"border_a":0},"init_eqs_str":"(function(){a['a1'] = 0; a['n1'] = 0; a['r1'] = 0; a['q10'] = 0; a['q32'] = 0; a['q11'] = 0; }());","frame_eqs_str":"(function(){a['a1']=div((6.28*a['instance']),a['num_inst']); a['n1']=(mod(a['instance'],2)*6); a['r1']=(0.009+(a['gmegabuf'][Math.floor((50000+a['n1']))]*0.06)); a['x']=((a['r1']*Math.sin(a['a1']))+a['q10']); a['y']=((((a['r1']*Math.cos(a['a1']))*a['q32'])+((a['q11']-0.5)*a['q32']))+0.5); a['rad']=(sqrt(a['r1'])*0.9); a['b']=Math.min(1, (a['rad']*4));}());","init_eqs_eel":"","frame_eqs_eel":"\na1 = 6.28*instance/num_inst;\nn1 = (instance%2)*6;\n\n  r1 = 0.009+gmegabuf(50000+n1)*0.06;\n  x = r1*sin(a1) + q10;\n  y = r1*cos(a1) * q32 + (q11-0.5)*q32 + 0.5;;\nrad = sqrt(r1)*0.9;\nb = min(1,rad*4);\n\n"}],"waves":[{"baseVals":{"samples":20,"sep":10,"spectrum":1,"scaling":0.17152,"smoothing":0,"r":0,"g":0.6,"a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"(function(){t1 = 0;}());","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"(function(){t1 = 0;}());","point_eqs_eel":""},{"baseVals":{"enabled":1,"spectrum":1,"thick":1,"scaling":0.42,"smoothing":0.2,"g":0.4,"b":0,"a":0.19},"init_eqs_str":"(function(){a['base'] = 0; a['t1'] = 0; a['z0'] = 0; a['r1'] = 0; a['q10'] = 0; a['q11'] = 0; }());","frame_eqs_str":"(function(){a['t1']=0;}());","point_eqs_str":"(function(){a['base']=(a['t1']*a['reg01']); a['z0']=Math.max(0.1, a['gmegabuf'][Math.floor((a['base']+2))]); a['x']=(div(a['gmegabuf'][Math.floor(a['base'])],a['z0'])*a['reg05']); a['y']=(div(a['gmegabuf'][Math.floor((a['base']+1))],a['z0'])*a['reg05']); a['r1']=sqrt(((a['x']*a['x'])+(a['y']*a['y']))); a['b']=Math.min(1, (2*(a['y']-a['z0']))); a['x']+=a['q10']; a['y']+=a['q11']; a['a']=div(((a['gmegabuf'][Math.floor((a['base']+6))]*Math.max(0.1, (1-a['z0'])))*Math.max(0, (1-(a['r1']*1.5)))),2); a['t1']+=1;}());","init_eqs_eel":"","frame_eqs_eel":"t1 = 0;","point_eqs_eel":"base = t1*reg01;\n  z0 = max(0.1,gmegabuf(base+2));  \n  x = gmegabuf(base) / z0 * reg05;\n  y = gmegabuf(base+1) / z0 * reg05;\n  r1 = sqrt(x*x+y*y);\n  b = min(1,2*(y-z0));\n  x += q10; y+= q11;;\n\n  a = gmegabuf(base+6) * max(0.1,1-z0) * max(0,1-r1*1.5)/2;;\nt1 += 1;"},{"baseVals":{"enabled":1,"g":0.6},"init_eqs_str":"(function(){a['base'] = 0; a['t1'] = 0; a['z0'] = 0; a['r1'] = 0; a['q10'] = 0; a['q11'] = 0; }());","frame_eqs_str":"(function(){a['t1']=512;}());","point_eqs_str":"(function(){a['base']=(a['t1']*a['reg01']); a['z0']=Math.max(0.1, a['gmegabuf'][Math.floor((a['base']+2))]); a['x']=(div(a['gmegabuf'][Math.floor(a['base'])],a['z0'])*a['reg05']); a['y']=(div(a['gmegabuf'][Math.floor((a['base']+1))],a['z0'])*a['reg05']); a['b']=Math.min(1, (2*(a['y']-a['z0']))); a['r1']=sqrt(((a['x']*a['x'])+(a['y']*a['y']))); a['x']+=a['q10']; a['y']+=a['q11']; a['a']=((a['gmegabuf'][Math.floor((a['base']+6))]*Math.max(0.1, (1-a['z0'])))*Math.max(0, (1-a['r1']))); a['t1']+=1;}());","init_eqs_eel":"","frame_eqs_eel":"t1 = 512;","point_eqs_eel":"base = t1*reg01;\n  z0 = max(0.1,gmegabuf(base+2));  \n  x = gmegabuf(base) / z0 * reg05;\n  y = gmegabuf(base+1) / z0 * reg05;\n  b = min(1,2*(y-z0));\n  r1 = sqrt(x*x+y*y);\n  x += q10; y+= q11;;\n  \n  a = gmegabuf(base+6) * max(0.1,1-z0) * max(0,1-r1);;\n\nt1 += 1;"},{"baseVals":{"enabled":1,"usedots":1,"g":0.7,"b":0,"a":0.32},"init_eqs_str":"(function(){a['base'] = 0; a['t1'] = 0; a['z0'] = 0; a['q10'] = 0; a['q11'] = 0; }());","frame_eqs_str":"(function(){a['t1']=(512*2);}());","point_eqs_str":"(function(){a['base']=(a['t1']*a['reg01']); a['z0']=Math.max(0.1, a['gmegabuf'][Math.floor((a['base']+2))]); a['x']=(div(a['gmegabuf'][Math.floor(a['base'])],a['z0'])*a['reg05']); a['y']=(div(a['gmegabuf'][Math.floor((a['base']+1))],a['z0'])*a['reg05']); a['b']=Math.min(1, (2*(a['y']-a['z0']))); a['x']+=a['q10']; a['y']+=a['q11']; a['a']=(a['gmegabuf'][Math.floor((a['base']+6))]*Math.max(0.1, (1-a['z0']))); a['t1']+=1;}());","init_eqs_eel":"","frame_eqs_eel":"t1=512*2;","point_eqs_eel":"base = t1*reg01;\n  z0 = max(0.1,gmegabuf(base+2));  \n  x = gmegabuf(base) / z0 * reg05 ;\n  y = gmegabuf(base+1) / z0 * reg05 ;;\n  b = min(1,2*(y-z0));\n  x += q10; y+= q11;;\n  a = gmegabuf(base+6) * max(0.1,1-z0);\nt1 += 1;"}],"init_eqs_str":"(function(){a['maxpts'] = 0; a['n'] = 0; a['z'] = 0; a['tvol'] = 0; a['newpts'] = 0; a['sfree'] = 0; a['pbase1'] = 0; a['s'] = 0; a['q12'] = 0; a['t1'] = 0; a['age'] = 0; a['tht'] = 0; a['dz0'] = 0; a['scale'] = 0; a['q15'] = 0; a['dt'] = 0; a['smooth'] = 0; a['p'] = 0; a['q1'] = 0; a['r1'] = 0; a['j'] = 0; a['q9'] = 0; a['r02'] = 0; a['pbase2'] = 0; a['k1'] = 0; a['q11'] = 0; a['ibase'] = 0; a['pi'] = 0; a['pbase'] = 0; a['q10'] = 0; a['dist0'] = 0; a['bal'] = 0; a['dx0'] = 0; a['q4'] = 0; a['start'] = 0; a['r01'] = 0; a['q16'] = 0; a['delpts'] = 0; a['ivol'] = 0; a['gf'] = 0; a['sz'] = 0; a['pfree'] = 0; a['i'] = 0; a['vol'] = 0; a['p1'] = 0; a['prog'] = 0; a['len'] = 0; a['dy0'] = 0; a['q3'] = 0; a['vol_'] = 0; a['dec'] = 0; a['maxstrings'] = 0; a['q32'] = 0; a['maxssize'] = 0; a['phi'] = 0; a['pvol'] = 0; a['recsize'] = 0; a['q8'] = 0; a['n']=0; for(var mdparser_idx396=0;mdparser_idx396<100000;mdparser_idx396++){a['megabuf'][Math.floor(a['n'])]=0; a['gmegabuf'][Math.floor(a['n'])]=0; a['n']+=1;} a['n']=90000; a['t']=0; for(var mdparser_idx397=0;mdparser_idx397<5000;mdparser_idx397++){a['t']+=div((2+Math.cos(div(a['n'],21))),5); a['megabuf'][Math.floor(a['n'])]=(Math.sin(a['t'])*0.5); a['n']+=1;} a['fov']=1; a['reg05']=a['fov']; a['maxstrings']=150; a['maxssize']=37; a['maxpts']=1600; a['maxshapes']=300; a['pfree']=a['maxpts']; a['sfree']=a['maxstrings']; a['recsize']=8; a['reg01']=a['recsize']; a['dist0']=0.8; a['reg02']=a['dist0']; a['pi']=3.1416; a['sptr']=0; a['r01']=rand(12); a['r02']=rand(12);}());","frame_eqs_str":"(function(){a['dt']=div(1,a['fps']); a['vol']=div(sqrt(((a['bass_att']+a['mid_att'])+a['treb_att'])),3); a['vol_']=((a['vol_']*0.9)+(0.1*a['vol'])); a['gf']=div((0.35*a['vol']),a['maxssize']); a['prog']+=((a['vol']*30)*a['dt']); a['s']=0; a['sfree']=a['maxstrings']; a['pfree']=a['maxpts']; for(var mdparser_idx398=0;mdparser_idx398<a['maxstrings'];mdparser_idx398++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+3))]>0)?1:0))>0.00001)?((function(){a['sfree']-=1; return a['pfree']-=a['megabuf'][Math.floor((a['ibase']+2))];})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx399=0;mdparser_idx399<a['maxstrings'];mdparser_idx399++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((((((Math.abs((a['megabuf'][Math.floor((a['ibase']+3))])-(0))<0.00001)?1:0)&&((a['vol']>(a['vol_']*1))?1:0))?1:0)&&((rand(100)<20)?1:0))?1:0))>0.00001)?((function(){a['sfree']-=1; a['tht']=(rand(1)*(2.9+((a['vol']>(a['vol_']*1.7))?1:0))); a['phi']=(((rand(1)-0.5)*4)+div(a['pi'],2)); a['pbase']=(5000+((a['s']*a['maxssize'])*a['recsize'])); a['megabuf'][Math.floor(a['ibase'])]=0; a['megabuf'][Math.floor((a['ibase']+1))]=0; a['megabuf'][Math.floor((a['ibase']+2))]=0; a['megabuf'][Math.floor((a['ibase']+3))]=1; a['megabuf'][Math.floor((a['ibase']+4))]=(Math.sin(a['tht'])*Math.cos(a['phi'])); a['megabuf'][Math.floor((a['ibase']+5))]=(Math.sin(a['tht'])*Math.sin(a['phi'])); return a['megabuf'][Math.floor((a['ibase']+6))]=-Math.abs(Math.cos(a['tht']));})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx400=0;mdparser_idx400<a['maxstrings'];mdparser_idx400++){a['ibase']=(a['s']*a['recsize']); ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+3))]>0)?1:0))>0.00001)?((function(){a['megabuf'][Math.floor(a['ibase'])]+=(a['dt']*rand(2)); a['age']=a['megabuf'][Math.floor(a['ibase'])]; a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['newpts']=Math.floor((div(((5*a['vol'])*a['maxssize']),40)*((a['age']<0.7)?1:0))); a['newpts']=Math.max(0, Math.min(a['newpts'], Math.min(a['pfree'], ((a['maxssize']-a['start'])-a['len'])))); a['dx0']=a['megabuf'][Math.floor((a['ibase']+4))]; a['dy0']=a['megabuf'][Math.floor((a['ibase']+5))]; a['dz0']=a['megabuf'][Math.floor((a['ibase']+6))]; a['p']=(a['start']+a['len']); for(var mdparser_idx401=0;mdparser_idx401<a['newpts'];mdparser_idx401++){a['pbase']=(5000+((a['p']+(a['s']*a['maxssize']))*a['recsize'])); a['k1']=((((Math.abs(((Math.abs((mod(a['s'],3))-(0))<0.00001)?1:0))>0.00001)?(a['p']):((((a['p']-a['start'])-a['len'])*16)))+3)+div(a['s'],16)); ((Math.abs(((Math.abs((mod(a['frame'],5))-(0))<0.00001)?1:0))>0.00001)?(a['k1']=(20*a['vol'])):(0)); a['megabuf'][Math.floor(a['pbase'])]=((a['k1']*a['dx0'])*a['gf']); a['megabuf'][Math.floor((a['pbase']+1))]=((a['k1']*a['dy0'])*a['gf']); a['megabuf'][Math.floor((a['pbase']+2))]=((a['k1']*a['dz0'])*a['gf']); a['p']+=1;} a['megabuf'][Math.floor((a['ibase']+2))]+=a['newpts']; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['pfree']-=a['newpts']; a['ivol']=((Math.abs(((a['vol']<0.35)?1:0))>0.00001)?(3):(((Math.abs(((a['vol']<0.5)?1:0))>0.00001)?(2):(1)))); a['delpts']=(Math.min(((a['megabuf'][Math.floor(a['ibase'])]>0.7)?1:0), a['len'])*((Math.abs((mod(a['frame'],a['ivol']))-(0))<0.00001)?1:0)); a['megabuf'][Math.floor((a['ibase']+1))]=(a['megabuf'][Math.floor((a['ibase']+1))]+a['delpts']); a['megabuf'][Math.floor((a['ibase']+2))]-=a['delpts']; a['pfree']+=a['delpts']; return ((Math.abs(((a['megabuf'][Math.floor((a['ibase']+2))]<=0)?1:0))>0.00001)?(a['megabuf'][Math.floor((a['ibase']+3))]=0):(0));})()):(0)); a['s']+=1;} a['s']=0; for(var mdparser_idx402=0;mdparser_idx402<a['maxstrings'];mdparser_idx402++){a['ibase']=(a['s']*a['recsize']); a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; ((Math.abs(((a['len']>0)?1:0))>0.00001)?((function(){a['p']=a['start']; a['i']=0; for(var mdparser_idx403=0;mdparser_idx403<a['len'];mdparser_idx403++){a['pbase']=(5000+((mod(a['p'],a['maxssize'])+(a['s']*a['maxssize']))*a['recsize'])); a['scale']=(pow(div(a['i'],a['len']), 2)*0.005); a['r1']=((pow(a['megabuf'][Math.floor(a['pbase'])], 2)+pow(a['megabuf'][Math.floor((a['pbase']+1))], 2))+pow(a['megabuf'][Math.floor((a['pbase']+2))], 2)); a['scale']*=Math.min((sqrt(a['r1'])*10), 1); a['p1']=(5000-Math.floor(((3*a['p'])+a['prog']))); a['megabuf'][Math.floor(a['pbase'])]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*57)),5000)))]*a['scale']); a['megabuf'][Math.floor((a['pbase']+1))]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*91)),5000)))]*a['scale']); a['megabuf'][Math.floor((a['pbase']+2))]+=(a['megabuf'][Math.floor((90000+mod((a['p1']+(a['s']*113)),5000)))]*a['scale']); a['p']+=1; a['i']+=1;} a['p']=(a['start']+1); a['smooth']=8; a['sz']=div(1,(1.93+a['smooth'])); return for(var mdparser_idx404=0;mdparser_idx404<(a['len']-2);mdparser_idx404++){a['pbase']=(5000+((a['p']+(a['s']*a['maxssize']))*a['recsize'])); a['pbase1']=(5000+(((a['p']-1)+(a['s']*a['maxssize']))*a['recsize'])); a['pbase2']=(5000+(((a['p']+1)+(a['s']*a['maxssize']))*a['recsize'])); a['megabuf'][Math.floor(a['pbase'])]=((((a['smooth']*a['megabuf'][Math.floor(a['pbase'])])+a['megabuf'][Math.floor(a['pbase1'])])+a['megabuf'][Math.floor(a['pbase2'])])*a['sz']); a['megabuf'][Math.floor((a['pbase']+1))]=((((a['smooth']*a['megabuf'][Math.floor((a['pbase']+1))])+a['megabuf'][Math.floor((a['pbase1']+1))])+a['megabuf'][Math.floor((a['pbase2']+1))])*a['sz']); a['megabuf'][Math.floor((a['pbase']+2))]=((((a['smooth']*a['megabuf'][Math.floor((a['pbase']+2))])+a['megabuf'][Math.floor((a['pbase1']+2))])+a['megabuf'][Math.floor((a['pbase2']+2))])*a['sz']); a['p']+=1;}})()):(0)); a['s']+=1;} a['n']=0; for(var mdparser_idx405=0;mdparser_idx405<a['maxpts'];mdparser_idx405++){a['gmegabuf'][Math.floor((a['n']+6))]=0; a['n']+=a['recsize'];} a['s']=0; a['i']=0; for(var mdparser_idx406=0;mdparser_idx406<a['maxstrings'];mdparser_idx406++){a['ibase']=(a['s']*a['recsize']); a['start']=a['megabuf'][Math.floor((a['ibase']+1))]; a['len']=a['megabuf'][Math.floor((a['ibase']+2))]; a['p']=a['start']; a['j']=0; for(var mdparser_idx407=0;mdparser_idx407<(a['len']+1);mdparser_idx407++){a['pbase']=(5000+((mod(a['p'],a['maxssize'])+(a['s']*a['maxssize']))*a['recsize'])); a['z']=(a['megabuf'][Math.floor((a['pbase']+2))]+a['dist0']); a['gmegabuf'][Math.floor((a['i']*a['recsize']))]=a['megabuf'][Math.floor(a['pbase'])]; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+1))]=a['megabuf'][Math.floor((a['pbase']+1))]; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+2))]=a['z']; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+3))]=((Math.abs(((a['z']>0)?1:0))>0.00001)?(div(0.007,a['z'])):(0)); a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+5))]=1; a['gmegabuf'][Math.floor(((a['i']*a['recsize'])+6))]=((((a['z']>0.1)?1:0)*((a['j']>1)?1:0))*((a['j']<(a['len']-1))?1:0)); ((Math.abs(((a['j']>1)?1:0))>0.00001)?(a['p']+=1):(0)); a['i']+=1; a['j']+=1;} a['s']+=1;} a['tvol']=((a['tvol']*0.8)+(0.2*(a['vol']-a['vol_']))); a['n']=50030; for(var mdparser_idx408=0;mdparser_idx408<30;mdparser_idx408++){a['gmegabuf'][Math.floor(a['n'])]=a['gmegabuf'][Math.floor((a['n']-1))]; a['n']-=1;} a['gmegabuf'][Math.floor(50000)]=a['tvol']; a['dec']=((Math.abs(((a['vol']>a['pvol'])?1:0))>0.00001)?(0.5):((1-((a['dt']*40)*0.05)))); a['pvol']=((a['pvol']*a['dec'])+(a['vol']*(1-a['dec']))); a['q1']=a['pvol']; a['q10']=0.5; a['q11']=0.38; a['q32']=a['aspecty']; a['q3']=(a['gmegabuf'][Math.floor(50000)]+1); a['q4']=(a['gmegabuf'][Math.floor(50005)]+1); a['t1']=(div(a['time'],12)+a['r01']); a['q15']=(0.5-(0.35*Math.sin(a['t1']))); a['q16']=(0.5-(0.05+((0.24*Math.cos(a['t1']))*(0.7+(0.3*Math.sin(div(a['t1'],7))))))); a['q8']=((1.7+Math.sin(((a['time']*0.02)+a['r02'])))*0.16); a['q9']=((1.7+Math.sin(((a['time']*0.0157)-a['r02'])))*0.16); a['bal']=Math.min(0.85, Math.max(0.15, (a['bal']+((a['dt']*0.1)*Math.atan(((a['treb']-a['bass'])-((a['bal']-0.5)*0.1))))))); a['q12']=a['bal']; a['monitor']=a['q12'];}());","pixel_eqs_str":"","init_eqs_eel":"n = 0;\nloop (100000,megabuf(n)=0;gmegabuf(n)=0;n += 1;);\n\n//rand chain\nn = 90000; t=0; loop (5000, t+= (2+cos(n/21))/5; megabuf(n)= sin(t)*0.5; n+= 1);\n\n\nfov = 1; reg05 = fov;\nmaxstrings = 150;\nmaxssize   = 37; //Pkte pro String\nmaxpts     = 1600;\nmaxshapes  = 300;\npfree = maxpts; //freie Pkte\nsfree = maxstrings;  //freie Strings\n\nrecsize = 8; reg01 = recsize; //pro Punkt\ndist0 =  0.8; reg02 = dist0;\npi=3.1416;\n\n\n//bei 0 starten die String-Inforecords\n//0 : Age\n//1 : start index\n//2 : Len\n//3: Alive\n//4,5,6: dx0,dy0,dz0\n\n//bei 5000 starten die Punkt-records\n//es folgen die ppstring Punkte; pro punkt\n  //0..2: Pos. x,y,z\n// ende pro punkt\n\n//2D-Records in gmegabuf\n  //0..2: Pos. x,y,z\n  //3: rad\n  //5: a\n  //6: mask\n\n//Shape-Records in gmegabuf, optional\n  //0..2: r0, theta, phi\n  //3: speed\n  //4,5,6: x,y,z\n  //\nsPtr = 0;\nr01 = rand(12);\nr02 = rand(12);","frame_eqs_eel":"dt = 1/fps;\nvol = sqrt (bass_att+mid_att+treb_att)/3; vol_ = vol_*0.9 + 0.1*vol; gf = 0.35*vol/maxssize;\nprog += vol*30*dt; \n\n// Count sfree and pfree; pfree = len=0\ns = 0; sfree = maxstrings; pfree = maxpts;\nloop (maxstrings, ibase = s*recsize; if (megabuf(ibase+3) > 0, sfree -=1; pfree -=megabuf(ibase+2), 0); s+= 1);\n\ns = 0; loop (maxstrings, //NEW STRING ?\n  ibase = s*recsize;\n  if ((megabuf(ibase+3)==0) && (vol > vol_*1) && (rand(100) < 20),\n    sfree -= 1;\n    tht = rand(1)*(2.9 + (vol>vol_*1.7)); phi = (rand(1)-0.5)*4+pi/2;;\n    pbase = 5000 + (s*maxssize)*recsize; //erster Punkt startet bei 0\n    megabuf (ibase  ) = 0;//Age\n    megabuf (ibase+1) = 0;//start ind\n    megabuf (ibase+2) = 0;//len  \n    megabuf (ibase+3) = 1;// am Leben\n    megabuf (ibase+4) = sin(tht)*cos(phi);\n    megabuf (ibase+5) = sin(tht)*sin(phi);\n    megabuf (ibase+6) = -abs(cos(tht)); \n  ,0); //END NEW STRING\ns+=1;);\n\ns = 0; loop (maxstrings, //GROW and SHRINK\n  ibase = s*recsize;\n  if (megabuf(ibase+3) > 0, //am Leben ?\n    megabuf(ibase  ) += dt*rand(2) ; //Age\n//EXPAND\n    age   = megabuf (ibase);\n    start = megabuf (ibase+1);\n    len   = megabuf (ibase+2);\n    newpts = int (5*vol*maxssize/40*(age < 0.7)) ; \n    newpts = max (0, min (newpts, min (pfree,maxssize-start-len))); \n    dx0 = megabuf (ibase+4);\n    dy0 = megabuf (ibase+5);\n    dz0 = megabuf (ibase+6);\n    p = start+len;\n    loop (newpts,\n      pbase  = 5000 + (p+s*maxssize)*recsize;\nk1 = if (s%3==0, p, (p-start-len)*16)+3+s/16;\nif (frame%5==0,k1 = 20*vol,0);\n//k1 = max(k1,p);\n      megabuf (pbase) = k1*dx0*gf; megabuf (pbase+1) = k1*dy0*gf; megabuf (pbase+2) = k1*dz0*gf;      \n      p+=1; ); \n    megabuf(ibase +2) += newpts;  len   = megabuf (ibase+2);  pfree -= newpts;\n//SHRINK\n    ivol = if (vol<0.35,3, if (vol<0.5,2,1));\n    delpts = min ((megabuf(ibase)>.7),len) * (frame%ivol==0);\n    megabuf(ibase+1) = (megabuf(ibase+1)+delpts); \n    megabuf(ibase+2) -= delpts;  pfree += delpts;\n    if (megabuf(ibase+2) <= 0, megabuf(ibase+3)=0, 0);\n  ,0);\ns+=1);\n\n//MOVE\ns = 0; loop (maxstrings,\n  ibase = s*recsize;  start = megabuf (ibase+1); len = megabuf (ibase+2);\n  if (len > 0, \n    p=start; i=0;\n    loop (len,\n      pbase  = 5000 + (p%maxssize+s*maxssize)*recsize;\n      scale = pow(i/len,2)*0.005 ;\n      r1 = pow(megabuf(pbase),2)+pow(megabuf(pbase+1),2)+pow(megabuf(pbase+2),2);\n      scale *= min(sqrt(r1)*10,1) ; //##mit vol skalieren\n      p1 = 5000-int(3*p+prog);\n      megabuf (pbase)   += megabuf(90000+(p1+s*57)%5000)*scale;      \n      megabuf (pbase+1) += megabuf(90000+(p1+s*91)%5000)*scale;      \n      megabuf (pbase+2) += megabuf(90000+(p1+s*113)%5000)*scale;       \n      p+=1; i+=1;   ); \n\n//STRAIGHTEN\n    p=start+1; smooth = 8;\n    sz = 1/(1.93+smooth);\n    loop (len-2,\n      pbase  =  5000 + (p    +s*maxssize)*recsize;\n      pbase1  = 5000 + ((p-1)+s*maxssize)*recsize;\n      pbase2  = 5000 + ((p+1)+s*maxssize)*recsize;\n      megabuf (pbase  ) = (smooth*megabuf(pbase  ) +megabuf(pbase1  )+megabuf(pbase2 ))*sz;      \n      megabuf (pbase+1) = (smooth*megabuf(pbase+1) +megabuf(pbase1+1)+megabuf(pbase2+1))*sz;      \n      megabuf (pbase+2) = (smooth*megabuf(pbase+2) +megabuf(pbase1+2)+megabuf(pbase2+2))*sz;      \n     p+=1; ); \n\n  ,0);\ns+=1);\n\n//Projektion waves\nn=0; loop (maxpts, gmegabuf(n+6)=0; n+=recsize); \ns = 0; i = 0;\nloop (maxstrings,\n  ibase = s*recsize;\n  start = megabuf (ibase+1);\n  len   = megabuf (ibase+2);\n  p = start;  j=0;\n//  if (len==0, len=-1, 0);\n  loop (len+1, //ersten Pkt verdoppeln wegen waves\n    pbase = 5000 + (p%maxssize + s*maxssize)*recsize;\n    z    = megabuf (pbase+2)+dist0;\n    gmegabuf (i*recsize)   = megabuf(pbase  );    \n    gmegabuf (i*recsize+1) = megabuf(pbase+1);    \n    gmegabuf (i*recsize+2) = z;    \n    gmegabuf (i*recsize+3) = if (z>0, 0.007/z, 0) ;    //rad\n    gmegabuf (i*recsize+5) = 1; //a\n    gmegabuf (i*recsize+6) = (z>0.1)*(j>1) * (j<len-1); //mask\n    if (j>1, p += 1,0);  i += 1; j+=1;\n  );  \n  s+=1;\n);\n\n//Vol delay chain \ntvol = tvol*0.8 + 0.2*(vol-vol_);\nn = 50030; loop (30, gmegabuf (n) = gmegabuf (n-1); n -= 1; ); gmegabuf (50000) = tvol;\n\n\ndec = if (vol>pvol,0.5, 1-dt*40*0.05);\npvol = pvol*dec + vol*(1-dec);\nq1 = pvol;\n\n//Zentrum\nq10 = 0.5; \nq11 = 0.38;\nq32 = aspecty;\n\nq3 = gmegabuf(50000)+1; \nq4 = gmegabuf(50005)+1; \n\n//planet pos\nt1 = time/12 +r01;\nq15 = 0.5-0.35*sin(t1);\nq16 = 0.5- (0.05+0.24*cos(t1) * (0.7+0.3*sin(t1/7))); \n\nq8 = (1.7+sin(time*.02+r02))*.16;\nq9 = (1.7+sin(time*.0157-r02))*.16;\n\nbal = min(0.85,max(0.15,bal+ dt*0.1 * atan(treb -bass - (bal-0.5)*0.1)));\nq12 = bal;\n\nmonitor = q12;","pixel_eqs_eel":"","warp":"const vec2 centre = vec2 (q10-0.5,-(q11-0.5))/aspect.xy+0.5;\n\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body {\nret =mix(texture(sampler_main, uv).xyz,((texture(sampler_blur1, uv).xyz * scale1) + bias1),0.2)*0.75;\nvec2 uv2 = uv-centre+0.5;\n       uv2 = vec2 (1-uv2.x,uv2.y)-0.5;\nuv2 = (uv2)*0.8 + centre;\nret =max (ret, mix(texture(sampler_main, uv2).xyz,((texture(sampler_blur1, uv2).xyz * scale1) + bias1),0.4)*0.55);\n\nret =ret* (1-_pow(rad,2)*1) - 0.002;\n\n}","comp":"#define sat saturate\nvec3 struc;\nvec2 uvc, rs, uv1, uv2,uv3, uv4, prof,prof2;\nfloat rad1, mask, ir0, k1, omask, z;\nconst vec2 centre = vec2 (q10-0.5,-(q11-0.5));\nconst vec2 pos = vec2 (q15,q16);\nconst vec2 hor = texsize.zw*vec2 (1,0);\nconst float blue = rand_preset.y/2;;\nvec3 lavcol (float t){return smoothstep(0,0.8,pow(t,vec3(1,2,4)));}\n\nvec2 noise3 (vec2 uvi) {\n  return (texture(sampler_noise_mq,uvi).xyz\n         +texture(sampler_noise_mq,uvi*2).xyz/2  \n         +texture(sampler_noise_mq,uvi*4).xyz/4\n         +_pow(texture(sampler_noise_mq,uvi*8+time*0.01).xyz,2)/4-0.8); }\n\nvec3 project (vec2 uvi) {float z;\n  z = clamp(1/uvi.y,-16,16); return vec3 (z*(uvi.x-0.5),z-2,z);}\n\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body {\nuvc = (uv-0.5) * aspect.xy + 0.5 -centre;\nomask = clamp(15*(0.55-uvc.y), 0.0, 1.0);\nuv2 = project (uvc) * vec2(1,1.5);\nvec2 ring = (texture(sampler_noise_mq,-time/16+length(uv2)/2).xyz-0.5).xy*sat(1-length(uv2));\nuv += ring.xy *(1-omask)*.02;\n\nvec3 retl = max(texture(sampler_main, uv-hor).xyz,texture(sampler_main, uv-hor.yx).xyz);\nvec3 retr = texture(sampler_main, uv+hor).xyz;\nvec3 rets = max (retl,retr)*min(0.3+rad*2,1);\nstruc = max(max(texture(sampler_main, uv).xyz,rets)*vec3(2,2,.7+1-2*blue)*1.3,((texture(sampler_blur2, uv).xyz * scale2) + bias2)*q1*3);\nret =struc; \n\nuv3 = (ring.x*0.2+ (uv2-0)*.25 +0.5+centre/aspect.xy);\nuv3 = fract(uv3);\nret += ((texture(sampler_blur1, uv3).xyz * scale1) + bias1)*sat(2-length(uv2));\n\n//Planet\nir0 = 24*(.15/(pos.y-0.1))/aspect.y;\nuv1 = (uvc-pos);\nk1 = sqrt(abs(1-ir0*ir0*uv1.y*uv1.y)+0.0); //sollte sqrt sein, 0.01 = test\nrs = vec2 (acos(uv1.x*ir0/k1), uv1.y*ir0/k1);\nmask = ir0*length(uv1)<1;\nrs = rs/14+vec2(time*-0.007,0);\nprof  = noise3(rs);\nprof2 = noise3(rs+texsize.zw);\nfloat hmask = sat(4-8*pos.y);\n\nret *= !mask;\nret += struc*mask*hmask; //struc vor dem Planeten zeigen\n\nuv4 = ((uvc-0.5)*.1 +0.5+centre/aspect.xy);\nret += sat (-dot (uv1,uvc-0.5))*mask*hmask*140*((texture(sampler_blur1, uv4).xyz * scale1) + bias1);\n\nret += ((-uv1.y/ir0*20)*vec3(0,0.4,0.9)+lavcol(sat(prof)*_pow(k1,4)))*mask;\nret += -mask * sat (dot(-prof+prof2,uv1))*50;\n\nret += texture(sampler_noise_hq,uv2/4+ring.x*0.1).r*blue* !mask*sat(1.3-length(uv2)) * vec3(0.2,0,1);\n\n\nz = 1/(2-uv.y) ;\nuv3 = vec2(uvc.x-.5,1)*z*vec2(q8,q9)+vec2(0,time*0.005);\nuv3.y -= noise3(uv3).r*-0.008;\nuv4 = ((uvc-vec2 (q12,0.3))*.4 +0.5+centre/aspect.xy);\nret += !mask*clamp(1-2*uvc.y, 0.0, 1.0)*2*clamp(noise3(uv3).r*((texture(sampler_blur2, uv4).xyz * scale2) + bias2)+vec3(0,0.1,0.25), 0.0, 1.0);\n}","warp_hlsl":"static const float2 centre = float2 (q10-0.5,-(q11-0.5))/aspect.xy+0.5;\n\nshader_body {\nret = lerp(GetPixel(uv),GetBlur1(uv),0.2)*0.75;\nfloat2 uv2 = uv-centre+0.5;\n       uv2 = float2 (1-uv2.x,uv2.y)-0.5;\nuv2 = (uv2)*0.8 + centre;\nret = max (ret, lerp(GetPixel(uv2),GetBlur1(uv2),0.4)*0.55);\n\nret = ret* (1-pow(rad,2)*1) - 0.002;\n\n}","comp_hlsl":"#define sat saturate\nfloat3 struc;\nfloat2 uvc, rs, uv1, uv2,uv3, uv4, prof,prof2;\nfloat rad1, mask, ir0, k1, omask, z;\nstatic const float2 centre = float2 (q10-0.5,-(q11-0.5));\nstatic const float2 pos = float2 (q15,q16);\nstatic const float2 hor = texsize.zw*float2 (1,0);\nstatic const float blue = rand_preset.y/2;;\nfloat3 lavcol (float t){return smoothstep(0,0.8,pow (t,float3(1,2,4)));}\n\nfloat2 noise3 (float2 uvi) {\n  return (tex2D(sampler_noise_mq,uvi)\n         +tex2D(sampler_noise_mq,uvi*2)/2  \n         +tex2D(sampler_noise_mq,uvi*4)/4\n         +pow(tex2D(sampler_noise_mq,uvi*8+time*0.01),2)/4-0.8); }\n\nfloat3 project (float2 uvi) {float z;\n  z = clamp(1/uvi.y,-16,16); return float3 (z*(uvi.x-0.5),z-2,z);}\n\nshader_body {\nuvc = (uv-0.5) * aspect.xy + 0.5 -centre;\nomask = saturate (15*(0.55-uvc.y));\nuv2 = project (uvc) * float2(1,1.5);\nfloat2 ring = (tex2D(sampler_noise_mq,-time/16+length(uv2)/2)-0.5).xy*sat(1-length(uv2));\nuv += ring.xy *(1-omask)*.02;\n\nfloat3 retl = max(GetPixel(uv-hor),GetPixel(uv-hor.yx));\nfloat3 retr = GetPixel(uv+hor);\nfloat3 rets = max (retl,retr)*min(0.3+rad*2,1);\nstruc = max(max(GetPixel(uv),rets)*float3(2,2,.7+1-2*blue)*1.3,GetBlur2(uv)*q1*3);\nret = struc; \n\nuv3 = (ring.x*0.2+ (uv2-0)*.25 +0.5+centre/aspect.xy);\nuv3 = frac(uv3);\nret += GetBlur1(uv3)*sat(2-length(uv2));\n\n//Planet\nir0 = 24*(.15/(pos.y-0.1))/aspect.y;\nuv1 = (uvc-pos);\nk1 = sqrt(abs(1-ir0*ir0*uv1.y*uv1.y)+0.0); //sollte sqrt sein, 0.01 = test\nrs = float2 (acos(uv1.x*ir0/k1), uv1.y*ir0/k1);\nmask = ir0*length(uv1)<1;\nrs = rs/14+float2(time*-0.007,0);\nprof  = noise3(rs);\nprof2 = noise3(rs+texsize.zw);\nfloat hmask = sat(4-8*pos.y);\n\nret *= !mask;\nret += struc*mask*hmask; //struc vor dem Planeten zeigen\n\nuv4 = ((uvc-0.5)*.1 +0.5+centre/aspect.xy);\nret += sat (-dot (uv1,uvc-0.5))*mask*hmask*140*GetBlur1(uv4);\n\nret += ((-uv1.y/ir0*20)*float3(0,0.4,0.9)+lavcol(sat(prof)*pow(k1,4)))*mask;\nret += -mask * sat (dot(-prof+prof2,uv1))*50;\n\nret += tex2D(sampler_noise_hq,uv2/4+ring.x*0.1).r*blue* !mask*sat(1.3-length(uv2)) * float3(0.2,0,1);\n\n\nz = 1/(2-uv.y) ;\nuv3 = float2(uvc.x-.5,1)*z*float2(q8,q9)+float2(0,time*0.005);\nuv3.y -= noise3(uv3).r*-0.008;\nuv4 = ((uvc-float2 (q12,0.3))*.4 +0.5+centre/aspect.xy);\nret += !mask*saturate(1-2*uvc.y)*2*saturate(noise3(uv3).r*GetBlur2(uv4)+float3(0,0.1,0.25));\n}"}