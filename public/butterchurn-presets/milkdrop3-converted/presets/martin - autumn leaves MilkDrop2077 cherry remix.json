{"version":2,"baseVals":{"rating":5,"gammaadj":1.88,"decay":0.5,"echo_zoom":1,"echo_alpha":0.5,"echo_orient":3,"wave_mode":9,"darken":1,"warpanimspeed":1.459,"warpscale":2.007,"fshader":0.3,"zoom":0.9999,"warp":0.00909,"sx":0.9999,"wave_r":0,"wave_g":0,"wave_b":0,"wave_x":0,"wave_y":0,"ob_size":0.05,"ob_r":0.8,"ob_g":1,"ob_b":1,"ib_size":0,"ib_r":0,"ib_g":0,"ib_b":0,"mv_a":0,"b1x":0.8,"b2x":0.7},"shapes":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['r1b'] = 0; a['isb'] = 0; a['sw'] = 0; a['progress'] = 0; a['zo'] = 0; a['r3b'] = 0; a['ts'] = 0; a['zo_'] = 0; a['q12'] = 0; a['t1'] = 0; a['q22'] = 0; a['q21'] = 0; a['tr'] = 0; a['q6'] = 0; a['dt'] = 0; a['zo__'] = 0; a['p'] = 0; a['q1'] = 0; a['r1'] = 0; a['q5'] = 0; a['dec_s'] = 0; a['v'] = 0; a['r1c'] = 0; a['r3c'] = 0; a['bi'] = 0; a['r2a'] = 0; a['q10'] = 0; a['spd'] = 0; a['dec_m'] = 0; a['q4'] = 0; a['r2b'] = 0; a['r2'] = 0; a['s3'] = 0; a['tstart'] = 0; a['r3'] = 0; a['t2'] = 0; a['vol'] = 0; a['r2c'] = 0; a['q2'] = 0; a['r1a'] = 0; a['trest'] = 0; a['r3a'] = 0; a['q3'] = 0; a['s1'] = 0; a['t0'] = 0; a['vol_'] = 0; a['dec'] = 0; a['s2'] = 0; a['q7'] = 0; a['pk'] = 0; a['q20'] = 0; a['q8'] = 0; a['zo']=1; a['zo_']=0.6; a['zo__']=0.92; a['tstart']=a['time']; a['t1']=rand(6); a['t2']=rand(6);}())","frame_eqs_str":"(function(){a['dt']=div(1,a['fps']); a['dec_m']=(1-(2*a['dt'])); a['dec_s']=(1-(0.5*a['dt'])); a['vol']=div((((2*a['bass_att'])+a['mid_att'])+a['treb_att']),3); a['p']=a['progress']; a['trest']=((Math.abs(((Math.abs((a['p'])-(0))<0.00001)?1:0))>0.00001)?(100000):(div(((a['time']-a['tstart'])*(1-a['p'])),a['p']))); a['v']=Math.max(0, a['vol']); a['dec']=((Math.abs(((a['v']>a['vol_'])?1:0))>0.00001)?((1-(1*a['dt']))):((1-(0.25*a['dt'])))); a['vol_']=((a['vol_']*a['dec'])+((1-a['dec'])*a['v'])); a['spd']=div(((a['vol_']*a['dt'])*(0.5+a['zo__'])),4); a['isb']=(above(a['vol'], a['pk'])*((a['time']>(a['t0']+0.5))?1:0)); ((Math.abs(a['isb'])>0.00001)?((function(){a['t0']=a['time']; return a['pk']=(a['vol']*3);})()):(a['pk']*=a['dec_s'])); a['bi']+=a['isb']; a['sw']=((((a['isb']&&((rand(1)>0.7)?1:0))?1:0)&&(((a['time']-a['ts'])>8)?1:0))?1:0); ((Math.abs(a['sw'])>0.00001)?(a['ts']=a['time']):(0)); a['zo']=2; a['zo_']+=2; a['zo__']=1; ((Math.abs(((a['isb']&&((Math.abs((mod(a['bi'],2))-(0))<0.00001)?1:0))?1:0))>0.00001)?(a['r1']=(rand(2)-1)):(0)); ((Math.abs(((a['isb']&&((Math.abs((mod(a['bi'],3))-(0))<0.00001)?1:0))?1:0))>0.00001)?(a['r2']=(rand(2)-1)):(0)); ((Math.abs(((a['isb']&&((Math.abs((mod(a['bi'],5))-(2))<0.00001)?1:0))?1:0))>0.00001)?(a['r3']=(rand(12)-1)):(0)); a['r1a']+=((Math.atan((150*(a['r1']-a['r1a'])))*a['spd'])*0.01); a['r2a']+=((Math.atan((150*(a['r2']-a['r2a'])))*a['spd'])*0.01); a['r3a']+=((Math.atan((150*(a['r3']-a['r3a'])))*a['spd'])*0.01); a['r1b']=((a['r1b']*a['dec_m'])+((1-a['dec_m'])*a['r1a'])); a['r2b']=((a['r2b']*a['dec_m'])+((1-a['dec_m'])*a['r2a'])); a['r3b']=((a['r3b']*a['dec_m'])+((1-a['dec_m'])*a['r3a'])); a['r1c']=((a['r1c']*a['dec_m'])+((1-a['dec_m'])*a['r1b'])); a['r2c']=((a['r2c']*a['dec_m'])+((1-a['dec_m'])*a['r2b'])); a['r3c']=((a['r3c']*a['dec_m'])+((1-a['dec_m'])*a['r3b'])); a['s1']+=((1+a['r1c'])*a['spd']); a['s2']+=(a['r2c']*a['spd']); a['s3']+=((1+a['r2c'])*a['spd']); a['q1']=a['r1c']; a['q2']=a['r2c']; a['q3']=a['r3c']; a['q4']=((a['q1']-a['q2'])*0.2); a['q5']=a['s1']; a['q6']=a['s2']; a['q7']=(a['s3']*4); a['q8']=((a['s2']+a['s3'])*12); a['q10']=a['zo__']; a['q12']=0.2; a['tr']=((a['tr']*a['dec_m'])+div(((1-a['dec_m'])*a['trest']),5)); a['q20']=Math.max(0, Math.min(1, a['tr'])); a['t1']+=(a['spd']*0.12); a['t2']+=(a['spd']*0.07); a['q21']=(1.5+(0.3*Math.sin(a['t1']))); a['q22']=(1+(0.3*Math.sin(a['t2']))); a['monitor']=a['t1'];}())","pixel_eqs_str":"","init_eqs_eel":"zo=1; zo_=0.6; zo__=0.92; tstart=time;\nt1=rand(6); t2=rand(6);","frame_eqs_eel":"dt=1/fps; dec_m = 1-2*dt; dec_s = 1-0.5*dt; \nvol = (2*bass_att+mid_att+treb_att)/3;\n\np = progress;\ntrest = if (p==0,100000, (time-tstart)*(1-p)/p);\n\nv = max(0,vol);\ndec = if (v>vol_,1-1*dt,1-0.25*dt);\nvol_= vol_*dec+(1-dec)*v;\nspd = vol_*dt * (0.5+zo__)/4;\n\nisb = above(vol, pk) * (time>t0+.5);\nif (isb,t0=time; pk=vol*3,Pk*=dec_s);\nbi += isb;\n\nsw = isb&&(rand(1)>0.7)&&(time-ts>8);\nif (sw,ts=time,0);\nzo = 2;\nzo_ += 2;\nzo__ = 1;\n\n\nif (isb&&(bi%2==0),r1 = rand(2)-1,0);\nif (isb&&(bi%3==0),r2 = rand(2)-1,0);\nif (isb&&(bi%5==2),r3 = rand(12)-1,0);\n\nr1a += atan(150*(r1-r1a))*spd*.01;\nr2a += atan(150*(r2-r2a))*spd*.01;\nr3a += atan(150*(r3-r3a))*spd*.01;\n\nr1b = r1b*dec_m + (1-dec_m)*r1a;\nr2b = r2b*dec_m + (1-dec_m)*r2a;\nr3b = r3b*dec_m + (1-dec_m)*r3a;\nr1c = r1c*dec_m + (1-dec_m)*r1b;\nr2c = r2c*dec_m + (1-dec_m)*r2b;\nr3c = r3c*dec_m + (1-dec_m)*r3b;\n\ns1 += (1+r1c)*spd;\ns2 += (r2c)*spd;\ns3 += (1+r2c)*spd;\n\nq1=r1c;\nq2=r2c;\nq3=r3c;\nq4=(q1-q2)*0.2;\nq5=s1;\nq6=s2;\nq7=s3*4;\nq8=(s2+s3)*12;\nq10 = zo__;\n\nq12 = 0.2; //front-back light\ntr = tr*dec_m + (1-dec_m)*trest/5;\nq20 = max(0,min(1,tr)); //fade - does not work\n\n//colors\nt1 += spd*0.12;\nt2 += spd*0.07;\nq21 = 1.5 + 0.3*sin(t1);\nq22 = 1 + 0.3*sin(t2); \nmonitor = t1;","pixel_eqs_eel":"","warp":"#define sat saturate\nuniform sampler2D sampler_pw_noise_lq;\nfloat dr, smask, stripe, h, dist;\nvec2 uv1, uv2, uv3, uv4, uv5, uv6;\nvec3 lea, noise, ret1, struc, neu;\n\nfloat aTan2(float y, float x) {\n    float angle;\n    float abs_y = abs(y);\n    float r;\n    if (x >= 0) { r = 1 - (x - abs_y) / (x + abs_y); }\n    else { r = 3 - (x + abs_y) / (abs_y - x); }\n    return (y < 0 ? -r : r) / 4;\n}\n\nshader_body {\n    vec2 uv1 = (uv - 0.5 + 0.2 * q2) * aspect.xy;\n    lea = 0;\n    int anz = 4;\n    for (float n = anz; n > 0; n--) {\n        dist = (1.5 + q2) * 0.33 * n / 6;\n        uv4 = 256 * (dist * uv1) * q10;\n\n        float aa = (1.0 + q3 / 2) * n / anz + q1 * (12 + uv1.x * 0) /2;\n        uv4 = (mat2(cos(aa), -sin(aa), sin(aa), cos(aa)) * uv4);\n        stripe = (16 - 0.8 * abs(floor(uv4.x)));\n        uv4.y += stripe/2 * q5 + (16 - stripe) * q6 - 8.0 * n;\n\n        noise = texture(sampler_pw_noise_lq, uv4 / 256).xyz;\n        smask = sat(64 * (noise.b - (0.88 - (stripe / 36) * 0.1))); // Keep provided density\n\n        aa = (noise.g - 0.5) * q8;\n        uv5 = (mat2(cos(aa), -sin(aa), sin(aa), cos(aa)) * fract(uv4) - 0.5);\n\n        dr = (abs(sin(uv4.y * 0.5 + 2 * q7 * noise.r)));\n        uv5.x *= 1.7; // Keep provided stretch horizontally\n        uv5.y *= 2.4; // Keep provided compression vertically\n\n        struc = texture(sampler_noise_hq, 0.5 * aTan2(uv5.x, uv5.y + 0.4)).xyz - 0.5;\n        uv6 = uv5;\n        uv5 += struc * n * 0.20 * (noise.r);\n        h = smask * sat(8 - 12 * length(uv5)); // Keep provided intensity\n\n        // Modified: White, pinkish, and red petal colors\n        float color_sel = noise.r; // Use noise to select color\n        vec3 petal_color;\n        if (color_sel < 0.33) {\n            petal_color = vec3(1.0, 1.0, 1.0); // White\n        } else if (color_sel < 0.66) {\n            petal_color = vec3(1.0, 0.8, 0.85); // Pinkish\n        } else {\n            petal_color = vec3(1.0, 0.5, 0.5); // Red\n        }\n        neu = h * petal_color * (0.8 + 0.2 * noise.g); // Vary brightness with noise\n\n        lea = mix(lea, neu, h);\n    }\n\n    ret = lea; // Keep original output\n}","comp":"uniform sampler2D sampler_pw_noise_lq;\nvec3 ret1;\nvec2 zz, uv0, uv1,uv2,uv3,uv4;\nfloat smask;\n\nfloat aTan2(float y, float x) {float angle;\t float abs_y = abs(y);\nif (x >= 0) {float r = (x - abs_y) / (x + abs_y); angle = 1-r;} \nelse {float r = (x + abs_y) / (abs_y - x); angle = 3-r; }\t\nangle = angle * .25;\nreturn y < 0 ? -angle : angle;}\n\nshader_body {//MilkDrop3 Flip Mode:\nuv = 1-uv;\n ;\nuv0 = uv;\nuv1 = (uv-.5)*aspect.xy;\n\nuv1 = (uv - .5) * aspect.xy;    \nfloat stars = 0; float dist, inten;\nint n = 1;\nint anz = 4;\nwhile (n <= anz) {\n  dist = (1-fract(1.0/anz*n+.10*time)) * (1-.2*rad);\n  inten =  (1-dist);\n  uv3 = (uv1+vec2(q1,q2));\n   uv4 = 64*dist*uv3;\n  smask = (texture (sampler_pw_noise_lq,uv4/256).xyz).g-.9;\n  stars += max(stars,clamp(inten*(0.11/length(abs(fract(uv4)-0.47))*smask), 0.0, 1.0));\nn++;\n}\nuv2 = uv1 - vec2(q5,q6);\nfloat beat = (mid - 0.45) * (mid > 0.45)*2;\nfloat flash = .01/(length(uv2))*min(3,pow(beat,1));\nflash *= flash/(abs(fract(3*aTan2(uv2.x,uv2.y)+time*2)-.5));\nret1 = max(texture(sampler_main, uv0).xyz*2,((texture(sampler_blur2, uv0).xyz * scale2) + bias2)*2);\n//ret = clamp(0.022/length(sin(uv3)), 0.0, 1.0)*vec3(0.2,2.6,0.1); //MilkDrop2077 color mod\nret += clamp(pow(stars,2), 0.0, 1.0);\nret *= clamp(1-2*lum(ret1), 0.0, 1.0);\nret +=  ret1;\nret -= 0.1;\n//ret += 2*clamp(flash, 0.0, 1.0)*vec3(2.2,2.9,0.7); //MilkDrop2077 color mod\n//MilkDrop3 Color Mode:\nret /= vec3(1.0,1.4,0.7);\n}","warp_hlsl":"#define sat saturate\nsampler sampler_pw_noise_lq;\nfloat dr, smask, stripe, h, dist;\nfloat2 uv1, uv2, uv3, uv4, uv5, uv6;\nfloat3 lea, noise, ret1, struc, neu;\n\nfloat aTan2(float y, float x) {\n    float angle;\n    float abs_y = abs(y);\n    float r;\n    if (x >= 0) { r = 1 - (x - abs_y) / (x + abs_y); }\n    else { r = 3 - (x + abs_y) / (abs_y - x); }\n    return (y < 0 ? -r : r) / 4;\n}\n\nshader_body {\n    float2 uv1 = (uv - 0.5 + 0.2 * q2) * aspect.xy;\n    lea = 0;\n    int anz = 4;\n    for (float n = anz; n > 0; n--) {\n        dist = (1.5 + q2) * 0.33 * n / 6;\n        uv4 = 256 * (dist * uv1) * q10;\n\n        float aa = (1.0 + q3 / 2) * n / anz + q1 * (12 + uv1.x * 0) /2;\n        uv4 = mul(uv4, float2x2(cos(aa), -sin(aa), sin(aa), cos(aa)));\n        stripe = (16 - 0.8 * abs(floor(uv4.x)));\n        uv4.y += stripe/2 * q5 + (16 - stripe) * q6 - 8.0 * n;\n\n        noise = tex2D(sampler_pw_noise_lq, uv4 / 256);\n        smask = sat(64 * (noise.b - (0.88 - (stripe / 36) * 0.1))); // Keep provided density\n\n        aa = (noise.g - 0.5) * q8;\n        uv5 = mul(frac(uv4) - 0.5, float2x2(cos(aa), -sin(aa), sin(aa), cos(aa)));\n\n        dr = (abs(sin(uv4.y * 0.5 + 2 * q7 * noise.r)));\n        uv5.x *= 1.7; // Keep provided stretch horizontally\n        uv5.y *= 2.4; // Keep provided compression vertically\n\n        struc = tex2D(sampler_noise_hq, 0.5 * aTan2(uv5.x, uv5.y + 0.4)) - 0.5;\n        uv6 = uv5;\n        uv5 += struc * n * 0.20 * (noise.r);\n        h = smask * sat(8 - 12 * length(uv5)); // Keep provided intensity\n\n        // Modified: White, pinkish, and red petal colors\n        float color_sel = noise.r; // Use noise to select color\n        float3 petal_color;\n        if (color_sel < 0.33) {\n            petal_color = float3(1.0, 1.0, 1.0); // White\n        } else if (color_sel < 0.66) {\n            petal_color = float3(1.0, 0.8, 0.85); // Pinkish\n        } else {\n            petal_color = float3(1.0, 0.5, 0.5); // Red\n        }\n        neu = h * petal_color * (0.8 + 0.2 * noise.g); // Vary brightness with noise\n\n        lea = lerp(lea, neu, h);\n    }\n\n    ret = lea; // Keep original output\n}","comp_hlsl":"sampler sampler_pw_noise_lq;\nfloat3 ret1;\nfloat2 zz, uv0, uv1,uv2,uv3,uv4;\nfloat smask;\n\nfloat aTan2(float y, float x) {float angle;\t float abs_y = abs(y);\nif (x >= 0) {float r = (x - abs_y) / (x + abs_y); angle = 1-r;} \nelse {float r = (x + abs_y) / (abs_y - x); angle = 3-r; }\t\nangle = angle * .25;\nreturn y < 0 ? -angle : angle;}\n\nshader_body {//MilkDrop3 Flip Mode:\nuv = 1-uv;\n ;\nuv0 = uv;\nuv1 = (uv-.5)*aspect.xy;\n\nuv1 = (uv - .5) * aspect.xy;    \nfloat stars = 0; float dist, inten;\nint n = 1;\nint anz = 4;\nwhile (n <= anz) {\n  dist = (1-frac(1.0/anz*n+.10*time)) * (1-.2*rad);\n  inten =  (1-dist);\n  uv3 = (uv1+float2(q1,q2));\n   uv4 = 64*dist*uv3;\n  smask = (tex2D (sampler_pw_noise_lq,uv4/256)).g-.9;\n  stars += max(stars,saturate(inten*(0.11/length(abs(frac(uv4)-0.47))*smask)));\nn++;\n}\nuv2 = uv1 - float2(q5,q6);\nfloat beat = (mid - 0.45) * (mid > 0.45)*2;\nfloat flash = .01/(length(uv2))*min(3,pow(beat,1));\nflash *= flash/(abs(frac(3*aTan2(uv2.x,uv2.y)+time*2)-.5));\nret1 = max(GetPixel(uv0)*2,GetBlur2(uv0)*2);\n//ret = saturate(0.022/length(sin(uv3)))*float3(0.2,2.6,0.1); //MilkDrop2077 color mod\nret += saturate(pow(stars,2));\nret *= saturate(1-2*lum(ret1));\nret +=  ret1;\nret -= 0.1;\n//ret += 2*saturate(flash)*float3(2.2,2.9,0.7); //MilkDrop2077 color mod\n//MilkDrop3 Color Mode:\nret /= float3(1.0,1.4,0.7);\n}"}