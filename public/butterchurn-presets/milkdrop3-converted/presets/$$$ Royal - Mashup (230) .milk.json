{"version":2,"baseVals":{"rating":2,"gammaadj":1.98,"decay":0.5,"echo_zoom":1,"echo_alpha":0.5,"echo_orient":3,"wave_mode":8,"additivewave":1,"modwavealphabyvolume":1,"wave_brighten":0,"darken":1,"wave_a":0.001,"wave_scale":1.286,"wave_smoothing":0.63,"modwavealphastart":0.71,"modwavealphaend":1.3,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0.65,"wave_g":0.65,"wave_b":0.65,"ob_size":0,"ob_g":0.3,"ob_a":1,"ib_size":0,"ib_r":0,"ib_g":1,"ib_b":0,"ib_a":1,"mv_a":0,"b1ed":0},"shapes":[{"baseVals":{"textured":1,"rad":5.3898,"tex_ang":1.19381,"tex_zoom":0.18923,"g":0.97,"b":1,"a":0.94,"r2":1,"b2":1,"a2":1,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"textured":1,"rad":3.99882,"tex_zoom":0.25005,"g":1,"b":1,"a":0.6,"r2":1,"b2":1,"a2":0.6,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"sides":18,"textured":1,"num_inst":10,"x":0.463,"rad":1.60089,"tex_zoom":0.67634,"g":1,"b":1,"r2":0.7,"g2":0.8,"b2":0.8,"a2":1,"border_a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":""},{"baseVals":{"enabled":1,"sides":16,"num_inst":353,"x":0.503,"rad":0.0376,"tex_zoom":1.11234,"g":1,"b":1,"g2":0,"border_a":0.06},"init_eqs_str":"(function(){a['my_z'] = 0; a['d'] = 0; a['y3'] = 0; a['z2'] = 0; a['y1'] = 0; a['w'] = 0; a['w2'] = 0; a['x1'] = 0; a['zoom'] = 0; a['p'] = 0; a['q1'] = 0; a['z3'] = 0; a['w3'] = 0; a['my_x'] = 0; a['x3'] = 0; a['my_y'] = 0; a['q10'] = 0; a['p2'] = 0; a['w1'] = 0; a['x2'] = 0; a['l'] = 0; a['p1'] = 0; a['y2'] = 0; a['q2'] = 0; a['z1'] = 0; a['q3'] = 0; a['sample'] = 0; }());","frame_eqs_str":"(function(){a['sample']=div(a['instance'],a['num_inst']); a['rad']=(0.05+(0.04*Math.sin(a['sample']))); a['q10']=(250*a['sample']); a['my_x']=((((-0.22*Math.cos(a['q10']))-(1.28*Math.sin(a['q10'])))-(0.44*Math.cos((3*a['q10']))))-(0.78*Math.sin((3*a['q10'])))); a['my_y']=((((-0.1*Math.cos((2*a['q10'])))-(0.27*Math.sin((2*a['q10']))))+(0.38*Math.cos((4*a['q10']))))+(0.46*Math.sin((4*a['q10'])))); a['my_z']=((0.7*Math.cos((3*a['q10'])))-(0.4*Math.sin((3*a['q10'])))); a['d']=0.2; a['zoom']=1; a['w3']=a['q1']; a['w2']=a['q2']; a['w1']=a['q3']; a['x1']=((Math.cos(a['w1'])*a['my_x'])+(Math.sin(a['w1'])*a['my_y'])); a['y1']=((-Math.sin(a['w1'])*a['my_x'])+(Math.cos(a['w1'])*a['my_y'])); a['z1']=a['my_z']; a['x2']=((Math.cos(a['w2'])*a['x1'])+(Math.sin(a['w2'])*a['z1'])); a['z2']=((-Math.sin(a['w2'])*a['x1'])+(Math.cos(a['w2'])*a['z1'])); a['y2']=a['y1']; a['y3']=((Math.cos(a['w3'])*a['y2'])+(Math.sin(a['w3'])*a['z2'])); a['z3']=((-Math.sin(a['w3'])*a['y2'])+(Math.cos(a['w3'])*a['z2'])); a['x3']=a['x2']; a['l']=sqrt(((a['x3']*a['x3'])+(a['y3']*a['y3']))); a['w']=Math.atan2(a['x3'], a['y3']); a['p']=Math.tan((Math.asin(1)+Math.atan2((a['d']+a['z3']), a['l']))); a['d']=sqrt((((a['x3']*a['x3'])+(a['y3']*a['y3']))+((a['z3']+a['d'])*(a['z3']+a['d'])))); a['my_x']=((a['zoom']*Math.sin(a['w']))*a['p']); a['my_y']=((a['zoom']*Math.cos(a['w']))*a['p']); a['p1']=(0.2*Math.sin((a['sample']*50))); a['p2']=(0.2*Math.sin((a['sample']*80))); a['x']=(0.5+(a['my_x']*a['p1'])); a['y']=(0.5+(a['my_y']*a['p2'])); a['r']=(0.4*Math.sin((a['sample']*80))); a['b']=(0.8*Math.sin((a['sample']*66))); a['g']=(0.6*Math.sin((a['sample']*120)));}());","init_eqs_eel":"","frame_eqs_eel":"sample=instance/num_inst;\nrad=.05+.04*sin(sample);\n\n/////  Knot\n\nq10=250*sample;\nmy_x = -.22*cos(q10)-1.28*sin(q10)-.44*cos(3*q10)-.78*sin(3*q10);\nmy_y= -.1*cos(2*q10)-.27*sin(2*q10)+.38*cos(4*q10)+.46*sin(4*q10);\nmy_z=.7*cos(3*q10)-.4*sin(3*q10);\n\n\n/////// rotations... by flexi\n\nd = .2; \nzoom = 1;\n\nw3 = q1;\nw2 = q2;\nw1 = q3;\n\nx1 = cos(w1)*my_x + sin(w1)*my_y;\ny1 = -sin(w1)*my_x + cos(w1)*my_y;\nz1 = my_z;\n\nx2 = cos(w2)*x1 + sin(w2)*z1;\nz2 = -sin(w2)*x1 + cos(w2)*z1;\ny2 = y1;\n\ny3 = cos(w3)*y2 + sin(w3)*z2;\nz3 = -sin(w3)*y2 + cos(w3)*z2;\nx3 = x2;\n\n// perspective calculation\n\nl = sqrt(x3*x3 + y3*y3);\nw = atan2(x3,y3);\np = tan(asin(1) + atan2(d+z3,l));\nd = sqrt(x3*x3 + y3*y3 + (z3+d)*(z3+d));\n\nmy_x = zoom*sin(w)*p;\nmy_y = zoom*cos(w)*p;\n\np1 = .2*sin(sample*50);\np2 = .2*sin(sample*80);\n\nx = .5+my_x*p1;\ny = .5+my_y*p2;\n\nr = .4*sin(sample*80);\nb = .8*sin(sample*66);\ng = .6*sin(sample*120);"}],"waves":[{"baseVals":{"spectrum":1,"additive":1,"smoothing":0,"r":0.4,"g":0.4,"b":0.4,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"spectrum":1,"smoothing":0,"r":0,"g":0,"b":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"thick":1,"r":0,"g":0,"b":0,"a":0,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['xang'] = 0; a['xpos'] = 0; a['index2'] = 0; a['rot2'] = 0; a['index'] = 0; a['q12'] = 0; a['q18'] = 0; a['q22'] = 0; a['yang'] = 0; a['q13'] = 0; a['q15'] = 0; a['q29'] = 0; a['q6'] = 0; a['q1'] = 0; a['q5'] = 0; a['q9'] = 0; a['dec_s'] = 0; a['my'] = 0; a['oz'] = 0; a['is_beat'] = 0; a['q24'] = 0; a['pulse'] = 0; a['q11'] = 0; a['q10'] = 0; a['dec_m'] = 0; a['dir__'] = 0; a['mz'] = 0; a['ypos'] = 0; a['dir'] = 0; a['dir_'] = 0; a['q16'] = 0; a['oy'] = 0; a['p2'] = 0; a['avg'] = 0; a['trig'] = 0; a['mx'] = 0; a['q19'] = 0; a['beat'] = 0; a['q17'] = 0; a['p1'] = 0; a['peak'] = 0; a['q2'] = 0; a['q27'] = 0; a['zang'] = 0; a['q14'] = 0; a['pos_z'] = 0; a['proxy'] = 0; a['speed'] = 0; a['t0'] = 0; a['rot1'] = 0; a['q28'] = 0; a['q20'] = 0; a['ox'] = 0; a['q8'] = 0; a['q1']=0; a['q2']=0; a['q3']=0; a['q4']=0; a['q5']=0; a['q6']=0; a['q7']=0; a['q8']=0; a['q9']=0; a['q10']=0; a['q11']=0; a['q12']=0; a['q13']=0; a['q14']=0; a['q15']=0; a['q16']=0; a['q17']=0; a['q18']=0; a['q19']=0; a['q20']=0; a['q21']=0; a['q22']=0; a['q23']=0; a['q24']=0; a['q25']=0; a['q26']=0; a['q27']=0; a['q28']=0; a['q29']=0; a['q10']=3; a['q31']=0; a['q32']=0; a['dir']=0; a['rvol']=1; a['n']=0; for(var mdparser_idx534=0;mdparser_idx534<10000;mdparser_idx534++){a['gmegabuf'][Math.floor(a['n'])]=0; a['megabuf'][Math.floor(a['n'])]=0; a['n']=(a['n']+1);}}());","frame_eqs_str":"(function(){a['dec_m']=pow(0.8, div(30,a['fps'])); a['dec_s']=pow(0.94, div(30,a['fps'])); a['beat']=((a['bass']+a['mid'])+a['treb']); a['avg']=((a['avg']*a['dec_s'])+(a['beat']*(1-a['dec_s']))); a['is_beat']=(above(a['beat'], ((a['peak']*8)+(1*a['avg'])))*above(a['time'], (a['t0']+0.2))); a['t0']=((a['is_beat']*a['time'])+((1-a['is_beat'])*a['t0'])); a['peak']=((a['is_beat']*a['beat'])+(((1-a['is_beat'])*a['peak'])*a['dec_m'])); a['index']=mod((a['index']+a['is_beat']),16); a['index2']=mod((a['index2']+(a['is_beat']*bnot(a['index']))),8); a['q20']=a['avg']; a['q22']=(Math.max(0, (a['peak']-0.0))+0.01); a['q24']=a['is_beat']; a['q27']=(a['index']+1); a['q28']=a['index2']; a['p1']=((a['dec_m']*a['p1'])+((1-a['dec_m'])*a['index'])); a['p2']=((a['dec_m']*a['p2'])+((1-a['dec_m'])*a['p1'])); a['p1']=a['index']; a['rot1']=(a['rot1']+div((div(Math.sin((a['p1']*2)),a['fps'])*a['avg']),5)); a['rot2']=(a['rot2']+div((div(Math.cos(div((a['p1']*2),3)),a['fps'])*a['avg']),5)); a['q1']=a['rot1']; a['q2']=a['rot2']; a['pulse']=(a['pulse']+((div(((a['bass']>0.8)?1:0),a['fps'])*(a['bass']-0.8))*16)); a['q8']=mod(Math.floor((a['pulse']*16)),16); a['q9']=(Math.cos(a['q8'])*3); a['q10']=(Math.sin(a['q8'])*3); a['trig']=(a['is_beat']*bnot(mod(a['index'],6))); a['speed']=((0.35*a['pos_z'])*2); a['dir']=((Math.abs(a['trig'])>0.00001)?((a['dir']+div((Math.floor((rand(3)-1.5))*3.1416),2))):(a['dir'])); a['dir_']=((a['dec_m']*a['dir_'])+((1-a['dec_m'])*a['dir'])); a['dir__']=((a['dec_m']*a['dir__'])+((1-a['dec_m'])*a['dir_'])); a['xpos']=((a['xpos']+(div(Math.cos(a['dir_']),a['fps'])*a['speed']))+a['q24']); a['ypos']=((a['ypos']+(div(Math.sin(a['dir_']),a['fps'])*a['speed']))+a['q24']); a['q5']=a['xpos']; a['q6']=a['ypos']; a['proxy']=Math.max(Math.min(Math.sin(((mod(a['q28'],2)*a['q27'])+(a['xpos']+a['ypos']))), 0.5), -0.5); a['xang']=(0*Math.cos(a['dir'])); a['yang']=(0*Math.sin(a['dir'])); a['zang']=a['dir__']; a['pos_z']=(0.5+div(a['proxy'],2)); a['q29']=div(0.02,a['pos_z']); a['ox']=0; a['oy']=0; a['oz']=a['pos_z']; a['mx']=((a['ox']*Math.cos(a['zang']))-(a['oy']*Math.sin(a['zang']))); a['my']=((a['ox']*Math.sin(a['zang']))+(a['oy']*Math.cos(a['zang']))); a['ox']=a['mx']; a['oy']=a['my']; a['mx']=((a['ox']*Math.cos(a['yang']))+(a['oz']*Math.sin(a['yang']))); a['mz']=((-a['ox']*Math.sin(a['yang']))+(a['oz']*Math.cos(a['yang']))); a['ox']=a['mx']; a['oz']=a['mz']; a['my']=((a['oy']*Math.cos(a['xang']))-(a['oz']*Math.sin(a['xang']))); a['mz']=((a['oy']*Math.sin(a['xang']))+(a['oz']*Math.cos(a['xang']))); a['oy']=a['my']; a['oz']=a['mz']; a['q11']=a['ox']; a['q12']=a['oy']; a['q13']=a['oz']; a['ox']=1; a['oy']=0; a['oz']=0; a['mx']=((a['ox']*Math.cos(a['zang']))-(a['oy']*Math.sin(a['zang']))); a['my']=((a['ox']*Math.sin(a['zang']))+(a['oy']*Math.cos(a['zang']))); a['ox']=a['mx']; a['oy']=a['my']; a['mx']=((a['ox']*Math.cos(a['yang']))+(a['oz']*Math.sin(a['yang']))); a['mz']=((-a['ox']*Math.sin(a['yang']))+(a['oz']*Math.cos(a['yang']))); a['ox']=a['mx']; a['oz']=a['mz']; a['my']=((a['oy']*Math.cos(a['xang']))-(a['oz']*Math.sin(a['xang']))); a['mz']=((a['oy']*Math.sin(a['xang']))+(a['oz']*Math.cos(a['xang']))); a['oy']=a['my']; a['oz']=a['mz']; a['q14']=a['ox']; a['q15']=a['oy']; a['q16']=a['oz']; a['ox']=0; a['oy']=0; a['oz']=1; a['mx']=((a['ox']*Math.cos(a['zang']))-(a['oy']*Math.sin(a['zang']))); a['my']=((a['ox']*Math.sin(a['zang']))+(a['oy']*Math.cos(a['zang']))); a['ox']=a['mx']; a['oy']=a['my']; a['mx']=((a['ox']*Math.cos(a['yang']))+(a['oz']*Math.sin(a['yang']))); a['mz']=((-a['ox']*Math.sin(a['yang']))+(a['oz']*Math.cos(a['yang']))); a['ox']=a['mx']; a['oz']=a['mz']; a['my']=((a['oy']*Math.cos(a['xang']))-(a['oz']*Math.sin(a['xang']))); a['mz']=((a['oy']*Math.sin(a['xang']))+(a['oz']*Math.cos(a['xang']))); a['oy']=a['my']; a['oz']=a['mz']; a['q17']=a['ox']; a['q18']=a['oy']; a['q19']=a['oz'];}());","pixel_eqs_str":"(function(){a['dx']=0.02;}());","init_eqs_eel":"q1 = 0; q2 = 0; q3 = 0; q4 = 0; q5 = 0; q6 = 0; q7 = 0; q8 = 0; q9 = 0; q10 = 0;\nq11 = 0; q12 = 0; q13 = 0; q14 = 0; q15 = 0; q16 = 0; q17 = 0; q18 = 0; q19 = 0; q20 = 0;\nq21 = 0; q22 = 0; q23 = 0; q24 = 0; q25 = 0; q26 = 0; q27 = 0; q28 = 0; q29 = 0; q10 = 3;\nq31 = 0; q32 = 0;\n\ndir = 0;\nrvol = 1;\nn = 0;\nloop (10000,\n  gmegabuf(n) = 0;\n  megabuf(n) = 0;\n  n = n+1;\n);","frame_eqs_eel":"dec_m = pow (0.8, 30/fps); dec_s = pow (0.94, 30/fps); \n\n\nbeat = bass+mid+treb; \navg = avg*dec_s + beat*(1-dec_s);\nis_beat = above(beat, peak*8+1*avg) * above (time, t0+.2);\nt0 = is_beat*time + (1-is_beat)*t0;\npeak = is_beat * beat + (1-is_beat)*peak*dec_m;\nindex = (index + is_beat) %16;\nindex2 = (index2 + is_beat*bnot(index))%8;\n\nq20 = avg;\nq22 = max(0,peak-.0)+.01;\nq24 = is_beat;\nq27 = index +1;\nq28 = index2;\n\np1 = dec_m * p1 + (1-dec_m) * index;\np2 = dec_m * p2 + (1-dec_m) * p1;\np1 = index;\nrot1 = rot1 + sin(p1*2)/fps * avg/5;\nrot2 = rot2 + cos(p1*2/3)/fps*avg/5;\nq1 = rot1;\nq2 = rot2;\n\npulse = pulse + (bass>.8)/fps*(bass-.8)*16;\nq8 = int(pulse*16)%16;\nq9  = cos(q8)*3;\nq10 = sin(q8)*3;\n\ntrig = is_beat * bnot(index%6);\nspeed = .35 *pos_z*2 ;\n\ndir  = if (trig, dir + int(rand(3)-1.5)*3.1416/2, dir);\ndir_ = dec_m*dir_ + (1-dec_m)*dir;\ndir__ = dec_m*dir__ + (1-dec_m)*dir_;\nxpos = xpos + cos(dir_)/fps*speed +q24;\nypos = ypos + sin(dir_)/fps*speed +q24;\nq5 = xpos;\nq6 = ypos;\n\nproxy = max(min(sin((q28%2)*q27+(xpos+ypos)),.5),-.5);\n\nxang =0*cos(dir); yang = 0*sin(dir);\nzang = dir__; ;\n\npos_z = .5 + proxy/2;\nq29 = .02/pos_z;\n\nox = 0; oy = 0; oz = pos_z;\nmx = ox*cos(zang) - oy*sin(zang);\nmy = ox*sin(zang) + oy*cos(zang);\nox = mx;oy = my;\nmx = ox*cos(yang) + oz*sin(yang);\nmz = - ox*sin(yang) + oz*cos(yang);\nox = mx;oz = mz;\nmy = oy*cos(xang) - oz*sin(xang);\nmz = oy*sin(xang) + oz*cos(xang);\noy = my;oz = mz;\nq11=ox; q12 = oy; q13 = oz; //Position\n\n//Vektor x nach rechts\nox = 1; oy = 0; oz = 0;\nmx = ox*cos(zang) - oy*sin(zang);\nmy = ox*sin(zang) + oy*cos(zang);\nox = mx;oy = my;\nmx = ox*cos(yang) + oz*sin(yang);\nmz = - ox*sin(yang) + oz*cos(yang);\nox = mx;oz = mz;\nmy = oy*cos(xang) - oz*sin(xang);\nmz = oy*sin(xang) + oz*cos(xang);\noy = my;oz = mz;\nq14=ox; q15 = oy; q16 = oz;\n\n\n//Vektor z nach hinten\nox = 0; oy = 0; oz = 1;;\n\nmx = ox*cos(zang) - oy*sin(zang);\nmy = ox*sin(zang) + oy*cos(zang);\nox = mx;oy = my;\nmx = ox*cos(yang) + oz*sin(yang);\nmz = - ox*sin(yang) + oz*cos(yang);\nox = mx;oz = mz;\nmy = oy*cos(xang) - oz*sin(xang);\nmz = oy*sin(xang) + oz*cos(xang);\noy = my;\noz = mz;\nq17=ox; q18 = oy; q19 = oz;","pixel_eqs_eel":"dx = .02;","warp":"uniform sampler2D sampler_pw_noise_lq;\nuniform sampler2D sampler_pw_noise_hq;\nconst vec3 size1 =  vec3(.1,.2,.25);\nconst vec3 posx1 = vec3(.1,.275,.88)+.4;\nconst vec3 posy1 = vec3(.064,.3,.5);\n\nconst vec3 size2 =  vec3(.1,.1,.2);\nconst vec3 posx2 = vec3(.1,-.125,.08);\nconst vec3 posy2 = vec3(.064,.4,.6);\nvec2 uv1, rs0, rs, uv2, uv3, dz, hor, ver;\nfloat noise, z, dist, cog1, rod1, cog2, trel;\n\nfloat cog (vec3 uvx, vec3 uvy, vec3 size, vec3 rot) {vec3 rad1, ang1, wheel; float res;\n  uvx = fract(1*uvx)-.5; uvy = fract(1*uvy)-.5;\n  rad1 = sqrt(uvx*uvx+uvy*uvy);  ang1 = atan(uvx,uvy)+rot/size;\n  wheel = clamp(100*(size-rad1) - 1.5*clamp(sin(180*ang1*size),-.7,.7), 0.0, 1.0);\n  wheel -= .25*clamp(sin(rad1*120), 0.0, 1.0);\n  wheel -= clamp(4*sin(rad1*32+3.5)-2, 0.0, 1.0) * clamp(4*sin(8*ang1), 0.0, 1.0);;\n  wheel = clamp(wheel, 0.0, 1.0)*vec3(0,1,1); //##\n  \n  res = wheel.r + clamp(1-0*wheel.r, 0.0, 1.0)*wheel.g;\n  res += clamp(1-0*res, 0.0, 1.0)*wheel.b;\n  return res;}\n\n\nfloat rod (vec2 uvi) {vec3 rad1 ; float res;\n    uvi = fract(uvi)-.5; \n    rad1 = clamp(2-64*abs(uvi.x)+exp(-uvi.y*uvi.y*128), 0.0, 1.0);\n    rad1 -= .2*(uvi.x*uvi.x+uvi.y*uvi.y <= .0004);\n    rad1 -= .5*clamp(1.4-uvi.x*uvi.x*2048, 0.0, 1.0);\n    return clamp(rad1, 0.0, 1.0);}\n\n\nshader_body {\nuv1 = (uv-.5);\n\n//Zahnraeder\ntrel = q1;\ncog1 = cog (uv1.x+posx1, uv1.y+posy1, size1, vec3 (1,-1,1)*trel + vec3(0.012,-0.029,0.0));\n\nrod1 = rod (uv1 + vec2(posx1[2],posy1[2]) + size1[2]*.6*vec2(cos(trel*4), sin(trel*4)));\n\ntrel = q2;\ncog2 = cog (uv1.x+posx2, uv1.y+posy2, size2, vec3 (1,-1,1)*trel + vec3(0.012,-0.029,0.0));\n\nret.g = cog1 + .8*clamp(1-8*cog1, 0.0, 1.0)*cog2;\nret.g = rod1 + .8*clamp(1-8*rod1, 0.0, 1.0)*ret.g;\n//ret.g = cog2;\n//ret.g = cog1;\n\n\nfloat copy = texture (sampler_fw_main, (uv_orig-.5).yx*2+.25+.0*vec2(q5,q6)).g;\nret.g = max(ret.g,copy*.4);\n\n\nret.b = texture(sampler_main, uv).xyz.b*.5;\n\n\n}","comp":"uniform sampler2D sampler_pw_noise_lq;\nconst float quality =3, depth = q29;\nvec3 screen3, sun, cog;\nvec2 dz, uv0, uv1, uv2, uv4, rsk, dz1,tmp2, Kugel1, rsl;\nfloat  m,n,noise,mask, smoke, mask1, gmask,dx,dy,rad1, lprof,dist,flash;\nfloat  mask2;\nvec2 hor = vec2 (texsize.z,0)*2;\nvec2 ver = vec2 (0,texsize.w)*2;\nvec2 mov = vec2 (q5,q6);\n\nvec3 t = vec3(q14,q15,q16);\nvec3 s = vec3(q17,q18,q19);\nvec3 ts = -cross(s,t);\nvec3 pos = vec3 (q11,q12,q13);\nvec3 lavcol (float t) {return clamp(vec3(t,_pow(t,2.1),_pow(t,6)), 0.0, 1.0);}\n\nvec2 project (float dist) {  float z;\n  z = 4*dist/(screen3 * cross(ts,-t));\n  gmask = (z >= -4) * (z <= 4);\n  return vec2((cross(pos,screen3) * float2x3(ts,t))*z*gmask);}\n\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body {uv0 = uv;\nscreen3 = vec3 ((uv-.5)*aspect.xy,1);//wirkt wie zoom / Tele ###\n\n//********* SMOKE\ndist = .25; \nrsl = project (dist)+ mov*.5 ;\nsmoke = texture(sampler_main, fract(rsl)).xyz.b ; //mittelwert null !#\n\n//********* COGWHEELS\ndist = .5; \nfor (m=1; m <= quality; m++) {\n  rsl = project (dist)+ mov ;\n  lprof = texture(sampler_main, fract(rsl)).xyz.g-.5 ; //mittelwert null !#\n  dist -= lprof/quality*depth; \n}\ncog = lprof+.5;\n\nmask = clamp(4*cog-smoke*2, 0.0, 1.0);// * (rsl.y >= -1) : Oberkante;\nmask1 = clamp(8*cog, 0.0, 1.0);\ndz.x = texture(sampler_main, rsl.xy-hor).xyz.g - texture(sampler_main, rsl.xy+hor).xyz.g;\ndz.y = texture(sampler_main, rsl.xy-ver).xyz.g - texture(sampler_main, rsl.xy+ver).xyz.g;\nsun = clamp(.1/length(sin(rsl*4)+dz*16), 0.0, 1.0) ;\nsun *= .5+.5*texture (sampler_noise_hq,sun/4+mov/4).xyz;\ncog = 2*sun*(1+1*cog);\nret =mix(smoke/2,cog,mask);\n\nrsl = project(.5)+vec2(q9,q10);\nflash = clamp(1+(q8%2)-mask1, 0.0, 1.0)*bass/2/sqrt(length(sin(time+q8+4*atan(rsl.y,rsl.x))));\nret += (.1+smoke)*(q28%3 <= 1)*flash*vec3(0,.5,1);\n//ret =texture(sampler_main, uv0*aspect.xy+.0).xyz;\nret /= vec3(-1.9,0.7,1.2);\n}","warp_hlsl":"sampler sampler_pw_noise_lq;\nsampler sampler_pw_noise_hq;\nstatic const float3 size1 =  float3(.1,.2,.25);\nstatic const float3 posx1 = float3(.1,.275,.88)+.4;\nstatic const float3 posy1 = float3(.064,.3,.5);\n\nstatic const float3 size2 =  float3(.1,.1,.2);\nstatic const float3 posx2 = float3(.1,-.125,.08);\nstatic const float3 posy2 = float3(.064,.4,.6);\nfloat2 uv1, rs0, rs, uv2, uv3, dz, hor, ver;\nfloat noise, z, dist, cog1, rod1, cog2, trel;\n\nfloat cog (float3 uvx, float3 uvy, float3 size, float3 rot) {float3 rad1, ang1, wheel; float res;\n  uvx = frac(1*uvx)-.5; uvy = frac(1*uvy)-.5;\n  rad1 = sqrt(uvx*uvx+uvy*uvy);  ang1 = atan2(uvx,uvy)+rot/size;\n  wheel = saturate(100*(size-rad1) - 1.5*clamp(sin(180*ang1*size),-.7,.7));\n  wheel -= .25*saturate(sin(rad1*120));\n  wheel -= saturate(4*sin(rad1*32+3.5)-2) * saturate(4*sin(8*ang1));;\n  wheel = saturate(wheel)*float3(0,1,1); //##\n  \n  res = wheel.r + saturate(1-0*wheel.r)*wheel.g;\n  res += saturate(1-0*res)*wheel.b;\n  return res;}\n\n\nfloat rod (float2 uvi) {float3 rad1 ; float res;\n    uvi = frac(uvi)-.5; \n    rad1 = saturate (2-64*abs(uvi.x)+exp(-uvi.y*uvi.y*128));\n    rad1 -= .2*(uvi.x*uvi.x+uvi.y*uvi.y <= .0004);\n    rad1 -= .5*saturate(1.4-uvi.x*uvi.x*2048);\n    return saturate(rad1);}\n\n\nshader_body {\nuv1 = (uv-.5);\n\n//Zahnraeder\ntrel = q1;\ncog1 = cog (uv1.x+posx1, uv1.y+posy1, size1, float3 (1,-1,1)*trel + float3(0.012,-0.029,0.0));\n\nrod1 = rod (uv1 + float2(posx1[2],posy1[2]) + size1[2]*.6*float2(cos(trel*4), sin(trel*4)));\n\ntrel = q2;\ncog2 = cog (uv1.x+posx2, uv1.y+posy2, size2, float3 (1,-1,1)*trel + float3(0.012,-0.029,0.0));\n\nret.g = cog1 + .8*saturate(1-8*cog1)*cog2;\nret.g = rod1 + .8*saturate(1-8*rod1)*ret.g;\n//ret.g = cog2;\n//ret.g = cog1;\n\n\nfloat copy = tex2D (sampler_fw_main, (uv_orig-.5).yx*2+.25+.0*float2(q5,q6)).g;\nret.g = max(ret.g,copy*.4);\n\n\nret.b = GetPixel(uv).b*.5;\n\n\n}","comp_hlsl":"sampler sampler_pw_noise_lq;\nstatic const float quality =3, depth = q29;\nfloat3 screen3, sun, cog;\nfloat2 dz, uv0, uv1, uv2, uv4, rsk, dz1,tmp2, Kugel1, rsl;\nfloat  m,n,noise,mask, smoke, mask1, gmask,dx,dy,rad1, lprof,dist,flash;\nfloat  mask2;\nstatic float2 hor = float2 (texsize.z,0)*2;\nstatic float2 ver = float2 (0,texsize.w)*2;\nstatic float2 mov = float2 (q5,q6);\n\nstatic float3 t = float3(q14,q15,q16);\nstatic float3 s = float3(q17,q18,q19);\nstatic float3 ts = -cross(s,t);\nstatic float3 pos = float3 (q11,q12,q13);\nfloat3 lavcol (float t) {return saturate(float3(t,pow(t,2.1),pow(t,6)));}\n\nfloat2 project (float dist) {  float z;\n  z = 4*dist/mul(cross(ts,-t),screen3);\n  gmask = (z >= -4) * (z <= 4);\n  return float2(mul(float2x3(ts,t),cross(pos,screen3))*z*gmask);}\n\nshader_body {uv0 = uv;\nscreen3 = float3 ((uv-.5)*aspect.xy,1);//wirkt wie zoom / Tele ###\n\n//********* SMOKE\ndist = .25; \nrsl = project (dist)+ mov*.5 ;\nsmoke = GetPixel(frac(rsl)).b ; //mittelwert null !#\n\n//********* COGWHEELS\ndist = .5; \nfor (m=1; m <= quality; m++) {\n  rsl = project (dist)+ mov ;\n  lprof = GetPixel(frac(rsl)).g-.5 ; //mittelwert null !#\n  dist -= lprof/quality*depth; \n}\ncog = lprof+.5;\n\nmask = saturate(4*cog-smoke*2);// * (rsl.y >= -1) : Oberkante;\nmask1 = saturate(8*cog);\ndz.x = GetPixel (rsl.xy-hor).g - GetPixel (rsl.xy+hor).g;\ndz.y = GetPixel (rsl.xy-ver).g - GetPixel (rsl.xy+ver).g;\nsun = saturate(.1/length(sin(rsl*4)+dz*16)) ;\nsun *= .5+.5*tex2D (sampler_noise_hq,sun/4+mov/4);\ncog = 2*sun*(1+1*cog);\nret = lerp(smoke/2,cog,mask) ;\n\nrsl = project(.5)+float2(q9,q10);\nflash = saturate(1+(q8%2)-mask1)*bass/2/sqrt(length(sin(time+q8+4*atan2(rsl.y,rsl.x))));\nret += (.1+smoke)*(q28%3 <= 1)*flash*float3(0,.5,1);\n//ret = GetPixel(uv0*aspect.xy+.0);\nret /= float3(-1.9,0.7,1.2);\n}"}