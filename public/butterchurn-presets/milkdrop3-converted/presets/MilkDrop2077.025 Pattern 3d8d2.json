{"version":2,"baseVals":{"rating":1,"gammaadj":1.9,"echo_zoom":1.169,"additivewave":1,"wave_thick":1,"modwavealphabyvolume":1,"wave_a":0.001,"wave_scale":0.133,"wave_smoothing":0,"wave_mystery":-0.87,"modwavealphastart":1,"modwavealphaend":1.482,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":0.395,"wave_g":0.5,"wave_b":0.55,"wave_y":0.38,"ob_size":0.015,"ob_b":1,"ib_size":0.26,"mv_x":14.28,"mv_a":0},"shapes":[{"baseVals":{"enabled":1,"sides":40,"thickoutline":1,"rad":0.06623,"tex_zoom":1.79845,"r":0,"a":0.1,"g2":0,"border_g":0.85,"border_b":0,"border_a":0},"init_eqs_str":"(function(){a['vol'] = 0; a['bob'] = 0; a['border_1'] = 0; a['ro'] = 0; a['sp'] = 0; a['red'] = 0; a['spi'] = 0; a['tm'] = 0; a['bob']=1.54; a['ro']=0; a['red']=Math.floor(rand(20));}());","frame_eqs_str":"(function(){a['vol']=(1+(0.2*div(((a['bass_att']+a['treb_att'])+a['mid_att']),3))); a['bob']=(((a['bob']*above(a['bob'], 0.0091))-0.0091)+(1*(1-above(a['bob'], 0.0091)))); a['bob']=(0.4+(0.4*Math.sin((a['time']*0.8)))); a['bob']=(a['bob']*a['vol']); a['border_1']=0.41; a['sides']=30; a['ro']=(a['ro']+0.02); a['ang']=a['ro']; a['sp']=(a['red']*0.025); a['spi']=(0.5-a['sp']); a['tm']=(a['time']*0.1); a['border_r']=((0.5+(a['sp']*Math.sin((a['tm']*0.6))))+(a['spi']*Math.cos((a['tm']*1.46)))); a['border_g']=((0.61+(a['sp']*Math.sin((a['tm']*1.3846))))+(a['spi']*Math.cos((a['tm']*0.809)))); a['border_b']=((0.48+(a['sp']*Math.sin((a['tm']*1.0919))))+(a['spi']*Math.cos((a['tm']*0.866))));}());","init_eqs_eel":"bob = 1.54;\nro = 0;\nred = int(rand(20));","frame_eqs_eel":"vol = 1 + 0.2*((bass_att+treb_att+mid_att)/3);\nbob = bob*above(bob,0.0091) - 0.0091 + 1*(1 - above(bob,0.0091));\nbob = 0.4 + 0.4*sin(time*0.8);\nbob = bob*vol;\n//rad = bob;\nborder_1 = 0.41;\nsides = 30;\nro = ro + 0.02;\nang = ro;\n//rad = 0.6;\n\nsp = red*0.025;\nspi = 0.5 - sp;\ntm = time*0.1;\nborder_r = 0.5 + sp*sin(tm*0.6) + spi*cos(tm*1.46);\nborder_g = 0.61 + sp*sin(tm*1.3846) + spi*cos(tm*0.809);\nborder_b = 0.48 + sp*sin(tm*1.0919) + spi*cos(tm*0.866);\n"},{"baseVals":{"enabled":1,"sides":40,"additive":1,"num_inst":4,"y":0.505,"tex_zoom":0.96,"r":1.14,"g":1,"b":1,"g2":0,"border_g":0.94,"border_a":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['x']=(0.5+(0.225*Math.sin((div(a['time'],a['instance'])*0.7)))); a['y']=(0.54+(0.36*Math.cos((div(a['time'],a['instance'])*0.62)))); a['x']=(a['x']-((0.4*a['x'])*Math.sin(a['time']))); a['y']=(a['y']-((0.44*a['y'])*Math.cos(a['time']))); a['rad']=(a['rad']*a['mid_att']); a['r']=(0.5+(0.5*Math.sin((a['frame']*0.5)))); a['b']=(0.66+(0.66*Math.sin(((a['frame']*0.66)+2.2615)))); a['g']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+4.188))));}());","init_eqs_eel":"","frame_eqs_eel":"x = 0.5 + 0.225*sin(time /instance*0.7);\ny = 0.54 + 0.36*cos(time /instance*0.62);\nx = x- 0.4*x*sin(time);\ny = y- 0.44*y*cos(time);\n\n\n\nrad = rad*mid_att;\nr = 0.5 + 0.5*sin(frame*0.5);\nb = 0.66 + 0.66*sin(frame*0.66 + 2.2615);\ng = 0.5 + 0.5*sin(frame*0.5 + 4.188);\n"},{"baseVals":{"enabled":1,"sides":40,"additive":1,"x":0.61,"g":1,"b":0.78,"g2":0,"border_a":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['x']=(0.4331+(0.4331*((Math.sin((a['time']*0.87))*0.35)+(0.7*Math.sin((a['time']*0.4331)))))); a['x']=(0.39+(0.1822*Math.sin((a['time']+1.693)))); a['y']=(0.5+(0.3*Math.cos((a['time']+2.09)))); a['rad']=(a['rad']*a['bass_att']); a['r']=(0.5+(0.5*Math.sin((a['frame']*0.5)))); a['b']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+2.094)))); a['g']=(0.427+(0.427*Math.sin(((a['frame']*0.427)+3.9367))));}());","init_eqs_eel":"","frame_eqs_eel":"x = 0.4331 + 0.4331*(sin(time*0.87)*0.35 + 0.7*sin(time*0.4331));\nx = 0.39 + 0.1822*sin(time + 1.693);\ny = 0.5 + 0.3*cos(time + 2.09);\n\nrad = rad*bass_att;\nr = 0.5 + 0.5*sin(frame*0.5);\nb = 0.5 + 0.5*sin(frame*0.5 + 2.094);\ng = 0.427 + 0.427*sin(frame*0.427 + 3.9367);\n"},{"baseVals":{"enabled":1,"sides":40,"additive":1,"num_inst":5,"rad":0.07419,"g":1,"b":1,"g2":0,"border_r":1.22,"border_a":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['x']=(0.5+(0.225*Math.sin(div(a['time'],a['instance'])))); a['y']=(0.41+(0.35*Math.cos(div(a['time'],a['instance'])))); a['x']=(a['x']+((0.47*a['x'])*Math.sin(a['time']))); a['y']=(a['y']+((0.4*a['y'])*Math.cos(a['time']))); a['rad']=(a['rad']*a['treb_att']); a['r']=(0.5+(0.5*Math.sin((a['frame']*0.5)))); a['b']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+2.094)))); a['g']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+4.188))));}());","init_eqs_eel":"","frame_eqs_eel":"//x = 0.268 + 0.268*(sin(time*1.24)*0.26 + 0.74*sin(time*0.268));\nx = 0.5 + 0.225*sin(time /instance);\ny = 0.41 + 0.35*cos(time /instance);\nx = x+ 0.47*x*sin(time);\ny = y+ 0.4*y*cos(time);\n\n\n//x = x+(0.1*q3)*sin((instance*2.4));\n//y = y+(0.1*q4)*cos((instance*2.59));\n\n\nrad = rad*treb_att;\nr = 0.5 + 0.5*sin(frame*0.5);\nb = 0.5 + 0.5*sin(frame*0.5 + 2.094);\ng = 0.5 + 0.5*sin(frame*0.5 + 4.188);\n"}],"waves":[{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{},"init_eqs_str":" ","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['index2'] = 0; a['index'] = 0; a['q12'] = 0; a['q22'] = 0; a['q21'] = 0; a['q13'] = 0; a['q6'] = 0; a['q1'] = 0; a['dec_med'] = 0; a['q5'] = 0; a['movz'] = 0; a['trel'] = 0; a['q9'] = 0; a['rott'] = 0; a['vol__'] = 0; a['is_beat'] = 0; a['q23'] = 0; a['k1'] = 0; a['q24'] = 0; a['trel_'] = 0; a['vx'] = 0; a['dec_slow'] = 0; a['q11'] = 0; a['q10'] = 0; a['vy'] = 0; a['q4'] = 0; a['dir'] = 0; a['dir_'] = 0; a['p2'] = 0; a['avg'] = 0; a['trig'] = 0; a['beat'] = 0; a['vol'] = 0; a['p1'] = 0; a['peak'] = 0; a['dec_fast'] = 0; a['q2'] = 0; a['q27'] = 0; a['q3'] = 0; a['t0'] = 0; a['vol_'] = 0; a['q7'] = 0; a['q28'] = 0; a['q20'] = 0; a['q8'] = 0; a['step']=0;}());","frame_eqs_str":"(function(){a['dec_med']=pow(0.9, div(30,a['fps'])); a['dec_slow']=pow(0.96, div(30,a['fps'])); a['dec_fast']=pow(0.6, div(30,a['fps'])); a['beat']=Math.max(Math.max(a['bass'], a['mid']), a['treb']); a['avg']=((a['avg']*a['dec_slow'])+(a['beat']*(1-a['dec_slow']))); a['is_beat']=(above(a['beat'], ((0+a['avg'])+a['peak']))*above(a['time'], (a['t0']+0.1))); a['t0']=((a['is_beat']*a['time'])+((1-a['is_beat'])*a['t0'])); a['peak']=((a['is_beat']*a['beat'])+(((1-a['is_beat'])*a['peak'])*a['dec_med'])); a['index']=mod((a['index']+a['is_beat']),16); a['index2']=mod((a['index2']+(a['is_beat']*bnot(a['index']))),8); a['q20']=a['avg']; a['q21']=a['beat']; a['q22']=a['peak']; a['q24']=a['is_beat']; a['vol']=((a['bass_att']+a['mid_att'])+a['treb_att']); a['vol_']=((a['dec_med']*a['vol_'])+((1-a['dec_med'])*a['vol'])); a['vol__']=((a['dec_med']*a['vol__'])+((1-a['dec_med'])*a['vol_'])); a['q27']=(a['index']+1); a['q28']=(a['index2']+1); a['q23']=(a['q22']-div(0.1,a['q22'])); a['q23']=Math.max(a['q23'], 1); a['k1']=(a['is_beat']*equal(mod(a['index'],8), 0)); a['p1']=((a['k1']*(a['p1']+1))+((1-a['k1'])*a['p1'])); a['p2']=((a['dec_fast']*a['p2'])+((1-a['dec_fast'])*a['p1'])); a['rott']=div((a['p2']*3.1416),4); a['q1']=Math.cos(a['rott']); a['q2']=Math.sin(a['rott']); a['q3']=-a['q2']; a['q4']=a['q1']; a['trig']=(a['q24']*bnot(mod(a['index'],2))); a['vx']=((a['vx']*bnot(a['trig']))+(a['trig']*(div(Math.floor(rand(100)),100)-0.5))); a['vy']=((a['vy']*bnot(a['trig']))+(a['trig']*(div(Math.floor(rand(100)),100)-0.5))); a['q10']=(0.2+((a['vy']*a['vy'])*2)); a['q11']=(div(Math.sin(div(a['time'],9)),2)+0.4); a['movz']=(a['movz']-(div(1,a['fps'])*(0.3+a['vx']))); a['q9']=a['movz']; a['q12']=(Math.min(a['q22'], 6)*2); a['q13']=Math.min(2, (1+Math.abs(((8*a['vy'])*a['vx'])))); a['dir_']=(a['bass']-1); a['trig']=(bnot(mod(a['index'],4))*a['q24']); a['dir']=((bnot(a['trig'])*a['dir'])+(a['trig']*(Math.floor(rand(10))-5))); a['trel']=(a['trel']+(div(0.1,a['fps'])*a['dir'])); a['trel_']=((a['dec_med']*a['trel_'])+((1-a['dec_med'])*a['trel'])); a['q5']=Math.cos(a['trel_']); a['q6']=Math.sin((a['trel_']+((0*a['q27'])*mod(a['q28'],2)))); a['q7']=-a['q6']; a['q8']=a['q5']; a['zoom']=1.02; a['rot']=(0.5*Math.sin((bnot(mod(a['q28'],2))*a['q28']))); a['rot']=(0.0*Math.sin(div(a['time'],3))); a['dx']=0.0; a['monitor']=a['q11'];}());","pixel_eqs_str":"","init_eqs_eel":"step = 0;","frame_eqs_eel":"dec_med = pow (0.9, 30/fps);\ndec_slow = pow (0.96, 30/fps);\ndec_fast = pow (0.6, 30/fps);\nbeat = max (max (bass, mid), treb); \navg = avg*dec_slow + beat*(1-dec_slow);\nis_beat = above(beat, 0+avg+peak) * above (time, t0+.1);\nt0 = is_beat*time + (1-is_beat)*t0;\npeak = is_beat * beat + (1-is_beat)*peak*dec_med;\nindex = (index + is_beat) %16;\nindex2 = (index2 + is_beat*bnot(index))%8;\n\nq20 = avg;\nq21 = beat;\nq22 = peak;\nq24 = is_beat;\nvol = bass_att + mid_att + treb_att;\nvol_ = dec_med * vol_ + (1-dec_med)* vol;\nvol__ = dec_med * vol__ + (1-dec_med)* vol_;\nq27 = index + 1;\nq28 = index2 + 1;\nq23 = q22 -0.1/q22;\nq23 = max(q23,1);\n\nk1 =  is_beat*equal(index%8,0);\np1 =  k1*(p1+1) + (1-k1)*p1;\np2 = dec_fast * p2+ (1-dec_fast)*p1;\nrott = p2 * 3.1416/4;\n\nq1 = cos(rott);\nq2 = sin(rott);\nq3 = -q2;\nq4 = q1;\n\ntrig = q24 * bnot(index%2);\nvx = vx*bnot(trig) + trig* (int(rand(100))/100-.5);\nvy = vy*bnot(trig) + trig* (int(rand(100))/100-.5);\nq10 = 0.2+vy*vy*2;\nq11 = sin(time/9)/2+.4;\nmovz = movz-1/fps*(.3+vx);\nq9 = movz;\n\nq12 = min(q22,6)*2;\nq13 = min(2,1+abs(8*vy*vx));\n//dir_ = dec_med*dir_ + (1-dec_med)*(index2%2-.5);\ndir_ =  bass-1;\n\ntrig = bnot(index%4) * q24;\ndir = bnot(trig)*dir + trig*(int(rand(10))-5);\n\ntrel = trel + .1/fps*dir;\ntrel_ = dec_med*trel_ + (1-dec_med)*trel;\n\nq5 = cos(trel_);\nq6 = sin(trel_+0*q27*(q28%2));\nq7 = -q6;\nq8 = q5;\n\nzoom = 1.02;\nrot = .5*sin(bnot(q28%2)*q28) ;\nrot = .0*sin(time/3);\ndx = .0;\n\nmonitor = q11;","pixel_eqs_eel":"","warp":"#define tex sampler_MilkDrop3_020\nsampler tex;\n\nshader_body\n{\n\nvec2 xy1=vec2(0);\nvec2 xymod=uv-.5;\n\nxy1.x=sin(time/3+time/300)*xymod.x-0.5-cos(time/3)*xymod.y;\nxy1.y=cos(time/3)*xymod.x-0.5+sin(time/3)*xymod.y;\n\nuv=xy1*aspect.xy;\n\nret =texture(tex, uv ).xyz;\n\n}","comp":"uniform sampler2D sampler_pw_noise_lq;\n\nvec2 rs, rss, rss0, tmp, uvo;\nvec3 noise;\n\nvec2 complex_div(vec2 numerator, vec2 denominator){\n   return vec2( numerator.x*denominator.x + numerator.y*denominator.y,\n                  numerator.y*denominator.x - numerator.x*denominator.y)/\n          (denominator.x*denominator.x + denominator.y*denominator.y);\n}\n\nvec2 uv_polar(vec2 domain, vec2 center){\n   vec2 c = domain - center;\n   float rad_hq = length(c);\n   float ang_hq = atan(c.x,c.y);\n   return vec2(ang_hq, rad_hq);\n}\n\nvec2 uv_polar_logarithmic(vec2 domain, vec2 center, int fins, float log_factor, vec2 coord){\n   vec2 polar = uv_polar(domain, center);\n   return vec2(polar.x*fins+coord.x, log_factor*log(polar.y) + coord.y);\n}\n\nvec2 uv_moebius_transformation(vec2 domain, vec2 zeroPoint, vec2 infinityPoint,float zoom){\n   return complex_div((domain - zeroPoint)*zoom, domain - infinityPoint)+0.5;\n}\n\nvec2 uv_bipolar_logarithmic(vec2 domain, vec2 northPole, vec2 southPole, int fins, float log_factor, vec2 coord){\n   vec2 help_uv = uv_moebius_transformation(domain, northPole, southPole, 1);\n   return uv_polar_logarithmic(help_uv,0.5,fins,log_factor,coord)*vec2(M_INV_PI_2,1);\n}\n\nvec2 uv_scale(vec2 domain, vec2 center, vec2 scale){\n   return center + (domain-center)*scale;\n}\nvec2 uv_lens_half_sphere(vec2 domain, vec2 position, float radius, float refractivity){\n   vec2 polar = uv_polar(domain, position);\n   float cone = clamp(1-polar.y/radius, 0.0, 1.0);\n   float halfsphere = sqrt(1-_pow(cone-1,2));\n   float w = atan(1-cone,halfsphere);\n   float refrac_w = w-asin(sin(w)/refractivity);\n   float refrac_d = 1-cone - sin(refrac_w)*halfsphere/cos(refrac_w);\n   vec2 refrac_uv =position+vec2(sin(polar.x),cos(polar.x))*refrac_d*radius;\n   bool mask =(length(domain-position)<radius);\n   return !mask*domain + \n           mask*refrac_uv;\n}\n\n\nfloat hardcore_stars(vec2 domain, vec2 center, float o){\n\n   vec2 uv1 = domain-center;\n   rss0.x = atan(uv1.x, uv1.y)/3.1416;\n   rss0.y = .003/(length (uv1));\n   rss = vec2 (rss0.x+q1/3,rss0.y+time+o);\n   rss = (mat2(.7,.7,-.7,.7) * rss);\n   float noise = (texture(sampler_pw_noise_lq,rss/32).xyz-.5 >= 0);\n   tmp = abs(fract(rss*8)-.5);\n   vec3 dots = clamp(.04/length(tmp), 0.0, 1.0) *noise;\n   rss = vec2 (rss0.x,rss0.y+(time+o)/4);\n   rss = (mat2(.7,.7,-.7,.7) * rss);\n   noise = (texture(sampler_pw_noise_lq,rss/32).xyz-.5 >= 0);\n   tmp = abs(fract(rss*8)-.5);\n   dots += clamp(.02/length(tmp), 0.0, 1.0) * noise;\n   dots *= clamp(.2/abs(rss0.y), 0.0, 1.0);\n   return dots*dots;\nreturn 0;\n}\n\n\n\n\n\n\nfloat _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body\n{\nuv = 0.5 + (uv-0.5)*aspect.wz;\ntime *= 0.4;\n\nvec2 pole1 =vec2(0.1,0.5);\nvec2 pole2 =vec2(0.9,0.5);\n\nfloat stars = hardcore_stars(uv,pole1,0) + hardcore_stars(uv,pole2,2);\n\nuv = uv_bipolar_logarithmic(uv, pole1, pole2, 2, 0.3, vec2(q26,q27)*vec2(8,1));\nuv = 0.5 + (1.0 - abs( fract( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.98; // Eo.S. mirror code with cutted borders\nuv = uv.yx;\n\nvec2 uv1 = uv;\nvec2 d = texsize.zw*3;\nvec3 dx = ((texture(sampler_blur1, uv1 + vec2(1,0)*d).xyz * scale1) + bias1) - ((texture(sampler_blur1, uv1 - vec2(1,0)*d).xyz * scale1) + bias1);\nvec3 dy = ((texture(sampler_blur1, uv1 + vec2(0,1)*d).xyz * scale1) + bias1) - ((texture(sampler_blur1, uv1 - vec2(0,1)*d).xyz * scale1) + bias1);\nuv1 = uv+vec2(dx.x,dy.x)*texsize.zw*32;\n     ret =texture(sampler_main, uv1).xyz.x*vec3(1,0,0)*0.5;\n\nret.x += (+dx.x - dy.x)*0.4;\nret.x = _pow(ret.x,0.8)*1.2;\n\nret =mix(ret,vec3(1,1,1),texture(sampler_main, uv1).xyz.z);\n\n//ret =mix(ret,1-texture(sampler_main, uv).xyz*1.5,stars);\nret*=1.2;\nret -= 0.1;\n//MilkDrop3 Invert Mode:\nret =1 - ret;\n//MilkDrop3 Color Mode:\nret /= vec3(1.8,1.2,2.1);\n}","warp_hlsl":"#define tex sampler_MilkDrop3_020\nsampler tex;\n\nshader_body\n{\n\nfloat2 xy1=0;\nfloat2 xymod=uv-.5;\n\nxy1.x=sin(time/3+time/300)*xymod.x-0.5-cos(time/3)*xymod.y;\nxy1.y=cos(time/3)*xymod.x-0.5+sin(time/3)*xymod.y;\n\nuv=xy1*aspect.xy;\n\nret = tex2D(tex, uv ).xyz;\n\n}","comp_hlsl":"sampler sampler_pw_noise_lq;\n\nfloat2 rs, rss, rss0, tmp, uvo;\nfloat3 noise;\n\nfloat2 complex_div(float2 numerator, float2 denominator){\n   return float2( numerator.x*denominator.x + numerator.y*denominator.y,\n                  numerator.y*denominator.x - numerator.x*denominator.y)/\n          (denominator.x*denominator.x + denominator.y*denominator.y);\n}\n\nfloat2 uv_polar(float2 domain, float2 center){\n   float2 c = domain - center;\n   float rad_hq = length(c);\n   float ang_hq = atan2(c.x,c.y);\n   return float2(ang_hq, rad_hq);\n}\n\nfloat2 uv_polar_logarithmic(float2 domain, float2 center, int fins, float log_factor, float2 coord){\n   float2 polar = uv_polar(domain, center);\n   return float2(polar.x*fins+coord.x, log_factor*log(polar.y) + coord.y);\n}\n\nfloat2 uv_moebius_transformation(float2 domain, float2 zeroPoint, float2 infinityPoint,float zoom){\n   return complex_div((domain - zeroPoint)*zoom, domain - infinityPoint)+0.5;\n}\n\nfloat2 uv_bipolar_logarithmic(float2 domain, float2 northPole, float2 southPole, int fins, float log_factor, float2 coord){\n   float2 help_uv = uv_moebius_transformation(domain, northPole, southPole, 1);\n   return uv_polar_logarithmic(help_uv,0.5,fins,log_factor,coord)*float2(M_INV_PI_2,1);\n}\n\nfloat2 uv_scale(float2 domain, float2 center, float2 scale){\n   return center + (domain-center)*scale;\n}\nfloat2 uv_lens_half_sphere(float2 domain, float2 position, float radius, float refractivity){\n   float2 polar = uv_polar(domain, position);\n   float cone = saturate(1-polar.y/radius);\n   float halfsphere = sqrt(1-pow(cone-1,2));\n   float w = atan2(1-cone,halfsphere);\n   float refrac_w = w-asin(sin(w)/refractivity);\n   float refrac_d = 1-cone - sin(refrac_w)*halfsphere/cos(refrac_w);\n   float2 refrac_uv =position+float2(sin(polar.x),cos(polar.x))*refrac_d*radius;\n   bool mask =(length(domain-position)<radius);\n   return !mask*domain + \n           mask*refrac_uv;\n}\n\n/* code from Martins hardcore mix - Danke ;) */\nfloat hardcore_stars(float2 domain, float2 center, float o){\n\n   float2 uv1 = domain-center;\n   rss0.x = atan2(uv1.x, uv1.y)/3.1416;\n   rss0.y = .003/(length (uv1));\n   rss = float2 (rss0.x+q1/3,rss0.y+time+o);\n   rss = mul(rss,float2x2(.7,.7,-.7,.7));\n   float noise = (tex2D(sampler_pw_noise_lq,rss/32)-.5 >= 0);\n   tmp = abs(frac(rss*8)-.5);\n   float3 dots = saturate(.04/length(tmp)) *noise;\n   rss = float2 (rss0.x,rss0.y+(time+o)/4);\n   rss = mul(rss,float2x2(.7,.7,-.7,.7));\n   noise = (tex2D(sampler_pw_noise_lq,rss/32)-.5 >= 0);\n   tmp = abs(frac(rss*8)-.5);\n   dots += saturate(.02/length(tmp)) * noise;\n   dots *= saturate(.2/abs(rss0.y));\n   return dots*dots;\nreturn 0;\n}\n\n\n\n\n\n\nshader_body\n{\nuv = 0.5 + (uv-0.5)*aspect.wz;\ntime *= 0.4;\n\nfloat2 pole1 =float2(0.1,0.5);\nfloat2 pole2 =float2(0.9,0.5);\n\nfloat stars = hardcore_stars(uv,pole1,0) + hardcore_stars(uv,pole2,2);\n\nuv = uv_bipolar_logarithmic(uv, pole1, pole2, 2, 0.3, float2(q26,q27)*float2(8,1));\nuv = 0.5 + (1.0 - abs( frac( uv * 0.5 ) * 2 - 1.0 )-0.5)*0.98; // Eo.S. mirror code with cutted borders\nuv = uv.yx;\n\nfloat2 uv1 = uv;\nfloat2 d = texsize.zw*3;\nfloat3 dx = GetBlur1(uv1 + float2(1,0)*d) - GetBlur1(uv1 - float2(1,0)*d);\nfloat3 dy = GetBlur1(uv1 + float2(0,1)*d) - GetBlur1(uv1 - float2(0,1)*d);\nuv1 = uv+float2(dx.x,dy.x)*texsize.zw*32;\n     ret = GetPixel(uv1).x*float3(1,0,0)*0.5;\n\nret.x += (+dx.x - dy.x)*0.4;\nret.x = pow(ret.x,0.8)*1.2;\n\nret = lerp(ret,float3(1,1,1),GetPixel(uv1).z);\n\n//ret = lerp(ret,1-GetPixel(uv)*1.5,stars);\nret*=1.2;\nret -= 0.1;\n//MilkDrop3 Invert Mode:\nret = 1 - ret;\n//MilkDrop3 Color Mode:\nret /= float3(1.8,1.2,2.1);\n}"}