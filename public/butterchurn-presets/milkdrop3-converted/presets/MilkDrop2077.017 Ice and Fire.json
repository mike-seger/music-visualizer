{"version":2,"baseVals":{"rating":5,"gammaadj":1.14,"decay":1,"echo_zoom":1,"wave_mode":5,"additivewave":1,"wave_dots":1,"wave_thick":1,"modwavealphabyvolume":1,"darken":1,"wave_a":0.099,"wave_scale":2.952,"wave_smoothing":0.69,"modwavealphastart":0.273,"modwavealphaend":0.296,"warpanimspeed":1.459,"warpscale":2.007,"zoom":0.9999,"warp":0.01,"sx":0.9999,"wave_r":1.21,"wave_b":1.18,"wave_x":0.41,"wave_y":0.941,"ob_size":0,"ob_b":0.2,"ob_a":1,"ib_size":0,"ib_r":0,"ib_g":0,"ib_a":1,"mv_x":51.84,"mv_y":39.84,"mv_l":5.8,"mv_r":0,"mv_g":0,"mv_b":0,"mv_a":0},"shapes":[{"baseVals":{"enabled":1,"sides":40,"additive":1,"num_inst":5,"rad":0.07419,"g":1,"b":1,"g2":0,"border_r":1.22,"border_a":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['x']=(0.5+(0.225*Math.sin(div(a['time'],a['instance'])))); a['y']=(0.41+(0.35*Math.cos(div(a['time'],a['instance'])))); a['x']=(a['x']+((0.47*a['x'])*Math.sin(a['time']))); a['y']=(a['y']+((0.4*a['y'])*Math.cos(a['time']))); a['rad']=(a['rad']*a['treb_att']); a['r']=(0.5+(0.5*Math.sin((a['frame']*0.5)))); a['b']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+2.094)))); a['g']=(0.5+(0.5*Math.sin(((a['frame']*0.5)+4.188))));}());","init_eqs_eel":"","frame_eqs_eel":"//x = 0.268 + 0.268*(sin(time*1.24)*0.26 + 0.74*sin(time*0.268));\nx = 0.5 + 0.225*sin(time /instance);\ny = 0.41 + 0.35*cos(time /instance);\nx = x+ 0.47*x*sin(time);\ny = y+ 0.4*y*cos(time);\n\n\n//x = x+(0.1*q3)*sin((instance*2.4));\n//y = y+(0.1*q4)*cos((instance*2.59));\n\n\nrad = rad*treb_att;\nr = 0.5 + 0.5*sin(frame*0.5);\nb = 0.5 + 0.5*sin(frame*0.5 + 2.094);\ng = 0.5 + 0.5*sin(frame*0.5 + 4.188);\n"},{"baseVals":{"enabled":1,"sides":100,"num_inst":11,"x":0.46,"y":0.59,"rad":0.08277,"tex_zoom":0.78,"r":0.82,"g":1.19,"b":1.24,"a":1.01,"r2":0.86,"g2":1.2,"b2":1.07,"a2":0.84,"border_r":0,"border_g":0,"border_b":0},"init_eqs_str":"(function(){a['q2'] = 0; a['q3'] = 0; a['q1'] = 0; }());","frame_eqs_str":"(function(){a['x']=(0.57+((0.23*((Math.abs(equal(a['instance'], 0))>0.00001)?(1):(((Math.abs(equal(a['instance'], 2))>0.00001)?(1):(-1)))))*Math.sin((a['time']+(0.785*a['instance']))))); a['y']=(0.57+((0.33*((Math.abs(equal(a['instance'], 0))>0.00001)?(1):(((Math.abs(equal(a['instance'], 2))>0.00001)?(1):(-1)))))*Math.cos((a['time']+(0.785*a['instance']))))); a['ang']=Math.sin(a['time']); a['r']=a['q2']; a['g']=a['q3']; a['b']=a['q1']; a['r2']=a['q3']; a['g2']=a['q1']; a['b2']=a['q2'];}());","init_eqs_eel":"","frame_eqs_eel":"x = 0.57+0.23*if(equal(instance,0),1,if(equal(instance,2),1,-1))*sin(time+0.785*instance);\ny = 0.57+0.33*if(equal(instance,0),1,if(equal(instance,2),1,-1))*cos(time+0.785*instance);\nang = sin(time);\nr = q2;\ng = q3;\nb = q1;\nr2 = q3;\ng2 = q1;\nb2 = q2;"},{"baseVals":{"enabled":1,"sides":100,"textured":1,"x":0.55,"y":0.59,"rad":0.29496,"tex_zoom":1.44749,"r":1.1,"g":1.09,"b":1.23,"a":0.94,"r2":1.23,"b2":0.96,"a2":1,"border_r":1.08,"border_g":1.16,"border_b":0.77,"border_a":0},"init_eqs_str":" ","frame_eqs_str":"(function(){a['ang']=(a['ang']+Math.sin(a['time']));}());","init_eqs_eel":"","frame_eqs_eel":"ang = ang+sin(time);"},{"baseVals":{"enabled":1,"sides":100,"rad":0.20047,"tex_zoom":0.97,"r":0.83,"g":1,"b":1,"a":0.96,"r2":0.56,"g2":0.5,"b2":0.86,"border_b":0.5,"border_a":0},"init_eqs_str":"(function(){a['sounds'] = 0; a['att'] = 0; }());","frame_eqs_str":"(function(){a['sounds']=div(((a['bass']+a['treb'])+a['mid']),3); a['att']=div(((a['bass_att']+a['treb_att'])+a['mid_att']),3); a['att']=div(((a['bass_att']+a['treb_att'])+a['mid_att']),3); a['r2']=((a['r2']+(0.225*Math.sin((a['time']*5.464))))-a['bass']); a['g2']=((a['g2']+(0.25*Math.sin((a['time']*6.28))))-a['bass']); a['rad']=a['rad']; a['x']=((a['x']+(0.217*Math.cos((a['time']*2.3))))+(a['sounds']*0.1)); a['y']=(a['y']+(0.2127*Math.sin(((a['time']*3.64)+(a['sounds']*0.32)))));}());","init_eqs_eel":"","frame_eqs_eel":"sounds=(bass+treb+mid)/3;\natt=(bass_att+treb_att+mid_att)/3;\natt=(bass_att+treb_att+mid_att)/3;\nr2=r2+(0.225*sin(time*5.464))-bass;\ng2=g2+(0.25*sin(time*6.28))-bass;\n\nrad=rad;\nx=x+0.217*cos(time*2.3)+sounds*0.1;\ny=y+0.2127*sin((time*3.64)+(sounds*0.32));"}],"waves":[{"baseVals":{"smoothing":0.435,"r":0.91,"g":1.22,"b":0.86,"a":0.96,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"scaling":0.97,"smoothing":0.405,"r":1.23,"g":0.84,"b":1.04,"a":1.19,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"scaling":0.89,"smoothing":0.525,"r":0.85,"g":0.96,"b":0.87,"a":0.94,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""},{"baseVals":{"scaling":1.05,"smoothing":0.465,"r":1.14,"g":1.17,"b":1.1,"a":0.89,"enabled":0},"init_eqs_str":"","frame_eqs_str":"","point_eqs_str":"","init_eqs_eel":"","frame_eqs_eel":"","point_eqs_eel":""}],"init_eqs_str":"(function(){a['runtreb'] = 0; a['index2'] = 0; a['q25'] = 0; a['index'] = 0; a['q12'] = 0; a['q18'] = 0; a['q22'] = 0; a['q21'] = 0; a['vt'] = 0; a['q13'] = 0; a['q15'] = 0; a['q29'] = 0; a['q6'] = 0; a['movex'] = 0; a['q1'] = 0; a['dec_med'] = 0; a['q5'] = 0; a['vb'] = 0; a['trel'] = 0; a['q9'] = 0; a['pi23'] = 0; a['rott'] = 0; a['is_beat'] = 0; a['q31'] = 0; a['q23'] = 0; a['k1'] = 0; a['q24'] = 0; a['dec_slow'] = 0; a['q11'] = 0; a['q10'] = 0; a['tran'] = 0; a['atime'] = 0; a['spd'] = 0; a['q4'] = 0; a['ran'] = 0; a['q16'] = 0; a['q26'] = 0; a['p2'] = 0; a['rott_'] = 0; a['avg'] = 0; a['movez'] = 0; a['runbass'] = 0; a['q19'] = 0; a['beat'] = 0; a['q17'] = 0; a['p1'] = 0; a['peak'] = 0; a['runmids'] = 0; a['q2'] = 0; a['q27'] = 0; a['q14'] = 0; a['q3'] = 0; a['t0'] = 0; a['vvm'] = 0; a['q32'] = 0; a['vvb'] = 0; a['q7'] = 0; a['q28'] = 0; a['vm'] = 0; a['q30'] = 0; a['q20'] = 0; a['vvt'] = 0; a['q8'] = 0; a['p1']=2000; a['p2']=200; a['p3']=50;}());","frame_eqs_str":"(function(){a['vb']=((a['vb']*0.95)+(((1-a['vb'])*pow(a['bass_att'], 2))*0.02)); a['vvb']=((a['vvb']*0.95)+(((1-a['vvb'])*a['vb'])*0.01)); a['vm']=((a['vm']*0.95)+(((1-a['vm'])*pow(a['mid_att'], 2))*0.02)); a['vvm']=((a['vvm']*0.95)+(((1-a['vvm'])*a['vm'])*0.01)); a['vt']=((a['vt']*0.95)+(((1-a['vt'])*pow(a['treb_att'], 2))*0.02)); a['vvt']=((a['vvt']*0.95)+(((1-a['vvt'])*a['vt'])*0.01)); a['vvb']=Math.min(1, Math.max(0, a['vvb'])); a['vvm']=Math.min(1, Math.max(0, a['vvm'])); a['vvt']=Math.min(1, Math.max(0, a['vvt'])); a['runbass']=(a['runbass']+a['vvb']); a['runmids']=(a['runmids']+a['vvm']); a['runtreb']=(a['runtreb']+a['vvt']); a['pi23']=((4*Math.asin(-1))*0.33333333333333); a['atime']=(((a['runtreb']+a['runmids'])+a['runbass'])*0.05); a['q8']=((Math.sin((a['atime']-(0*a['pi23'])))+1)*0.5); a['q9']=((Math.sin((a['atime']-(1*a['pi23'])))+1)*0.5); a['q10']=((Math.sin((a['atime']-(2*a['pi23'])))+1)*0.5); a['vb']=((a['vb']*0.95)+(((1-a['vb'])*pow(a['bass_att'], 2))*0.02)); a['vvb']=((a['vvb']*0.95)+(((1-a['vvb'])*a['vb'])*0.01)); a['vm']=((a['vm']*0.95)+(((1-a['vm'])*pow(a['mid_att'], 2))*0.02)); a['vvm']=((a['vvm']*0.95)+(((1-a['vvm'])*a['vm'])*0.01)); a['vt']=((a['vt']*0.95)+(((1-a['vt'])*pow(a['treb_att'], 2))*0.02)); a['vvt']=((a['vvt']*0.95)+(((1-a['vvt'])*a['vt'])*0.01)); a['vvb']=Math.min(1, Math.max(0, a['vvb'])); a['vvm']=Math.min(1, Math.max(0, a['vvm'])); a['vvt']=Math.min(1, Math.max(0, a['vvt'])); a['q1']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q2']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q3']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q4']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q5']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q6']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q7']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q8']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q9']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q10']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q11']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q12']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q13']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q14']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q15']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q16']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q17']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q18']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q19']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q20']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q21']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q22']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q23']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q24']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q25']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q26']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q27']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q28']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q29']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q30']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q31']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['q32']=(((a['vvb']+a['vvm'])+a['vvt'])*10); a['dec_med']=pow(0.9, div(30,a['fps'])); a['dec_slow']=pow(0.9, div(30,a['fps'])); a['beat']=Math.max(Math.max(a['bass'], a['mid']), a['treb']); a['avg']=((a['avg']*a['dec_slow'])+(a['beat']*(1-a['dec_slow']))); a['is_beat']=(above(a['beat'], ((0.1+a['avg'])+a['peak']))*above(a['time'], (a['t0']+0.2))); a['t0']=((a['is_beat']*a['time'])+((1-a['is_beat'])*a['t0'])); a['peak']=((a['is_beat']*a['beat'])+(((1-a['is_beat'])*a['peak'])*a['dec_med'])); a['index']=mod((a['index']+a['is_beat']),16); a['index2']=mod((a['index2']+(a['is_beat']*bnot(a['index']))),5); a['monitor']=a['index2']; a['q20']=a['avg']; a['q21']=a['beat']; a['q22']=a['peak']; a['q23']=a['index']; a['q24']=((Math.sin((a['time']*0.3))*0.05)*a['is_beat']); a['q26']=((a['bass']+a['mid'])+a['treb']); a['q27']=a['index']; a['q28']=a['index2']; a['k1']=(a['is_beat']*equal(mod(a['index'],2), 0)); a['p1']=((a['k1']*(a['p1']+1))+((1-a['k1'])*a['p1'])); a['p2']=((a['dec_med']*a['p2'])+((1-a['dec_med'])*a['p1'])); a['rott_']=div((a['p2']*3.1416),4); a['rott']=(a['rott']+(div((0.2*30),a['fps'])*a['q2'])); a['q1']=Math.cos(a['rott']); a['q2']=Math.sin(a['rott']); a['q3']=-a['q2']; a['q4']=a['q1']; a['ran']=((bnot(a['q24'])*a['ran'])+(a['q24']*(Math.floor(rand(50))-24))); a['tran']=Math.tan(a['ran']); a['tran']=Math.max(a['tran'], -5); a['tran']=Math.min(a['tran'], 5); a['trel']=((a['trel']+(div((0.02*30),a['fps'])*a['tran']))+a['q24']); a['q5']=Math.cos(a['trel']); a['q6']=Math.sin(a['trel']); a['q7']=-a['q6']; a['q8']=a['q5']; a['movex']=((a['movex']*a['dec_slow'])+div(((0.1*Math.sin(a['rott']))*30),a['fps'])); a['q9']=a['movex']; a['spd']=((a['spd']*bnot(a['q24']))+(a['q26']*a['q24'])); a['movez']=(a['movez']+(div((0.005*30),a['fps'])*a['spd'])); a['q30']=a['movez']; a['mv_x']=20; a['mv_y']=15; a['mv_a']=0.1; a['mv_l']=0; a['q18']=Math.sin(div(a['time'],7)); a['q19']=Math.sin(div(a['time'],11)); a['q32']=pow(0.98, div(60,a['fps']));}());","pixel_eqs_str":"(function(){a['zoom']=0.997; a['warp']=0.1;}());","init_eqs_eel":"p1 = 2000; p2 = 200; p3=50;","frame_eqs_eel":"//martin no religion / my omniversal absence for changing the background light\nvb = vb*0.95 + (1-vb)*pow(bass_att,2)*0.02;\nvvb = vvb*0.95 + (1-vvb)*vb*0.01;\nvm = vm*0.95 + (1-vm)*pow(mid_att,2)*0.02;\nvvm = vvm*0.95 + (1-vvm)*vm*0.01;\nvt = vt*0.95 + (1-vt)*pow(treb_att,2)*0.02;\nvvt = vvt*0.95 + (1-vvt)*vt*0.01;\nvvb = min(1,max(0,vvb));\nvvm = min(1,max(0,vvm));\nvvt = min(1,max(0,vvt));\nrunbass=runbass+vvb;\nrunmids=runmids+vvm ;\nruntreb=runtreb+vvt;\npi23=4*asin(-1)*.33333333333333;\natime=(runtreb+runmids+runbass)*.05;\nq8= (sin(atime-0*pi23)+1)*.5;\nq9= (sin(atime-1*pi23)+1)*.5;\nq10=(sin(atime-2*pi23)+1)*.5;\n\n//per frame less reactive volume for all unused q vars, put before other q vars are set for cop out mashing\nvb = vb*0.95 + (1-vb)*pow(bass_att,2)*0.02;\nvvb = vvb*0.95 + (1-vvb)*vb*0.01;\nvm = vm*0.95 + (1-vm)*pow(mid_att,2)*0.02;\nvvm = vvm*0.95 + (1-vvm)*vm*0.01;\nvt = vt*0.95 + (1-vt)*pow(treb_att,2)*0.02;\nvvt = vvt*0.95 + (1-vvt)*vt*0.01;\nvvb = min(1,max(0,vvb));\nvvm = min(1,max(0,vvm));\nvvt = min(1,max(0,vvt));\nq1   = (vvb+vvm+vvt)*10;\nq2   = (vvb+vvm+vvt)*10;\nq3   = (vvb+vvm+vvt)*10;\nq4   = (vvb+vvm+vvt)*10;\nq5   = (vvb+vvm+vvt)*10;\nq6   = (vvb+vvm+vvt)*10;\nq7   = (vvb+vvm+vvt)*10;\nq8   = (vvb+vvm+vvt)*10;\nq9   = (vvb+vvm+vvt)*10;\nq10  = (vvb+vvm+vvt)*10;\nq11  = (vvb+vvm+vvt)*10;\nq12  = (vvb+vvm+vvt)*10;\nq13  = (vvb+vvm+vvt)*10;\nq14  = (vvb+vvm+vvt)*10;\nq15  = (vvb+vvm+vvt)*10;\nq16  = (vvb+vvm+vvt)*10;\nq17  = (vvb+vvm+vvt)*10;\nq18  = (vvb+vvm+vvt)*10;\nq19  = (vvb+vvm+vvt)*10;\nq20  = (vvb+vvm+vvt)*10;\nq21  = (vvb+vvm+vvt)*10;\nq22  = (vvb+vvm+vvt)*10;\nq23  = (vvb+vvm+vvt)*10;\nq24  = (vvb+vvm+vvt)*10;\nq25  = (vvb+vvm+vvt)*10;\nq26  = (vvb+vvm+vvt)*10;\nq27  = (vvb+vvm+vvt)*10;\nq28  = (vvb+vvm+vvt)*10;\nq29  = (vvb+vvm+vvt)*10;\nq30  = (vvb+vvm+vvt)*10;\nq31  = (vvb+vvm+vvt)*10;\nq32  = (vvb+vvm+vvt)*10;\n\ndec_med = pow (0.9, 30/fps);\ndec_slow = pow (0.9, 30/fps);\nbeat = max (max (bass, mid), treb); \navg = avg*dec_slow + beat*(1-dec_slow);\nis_beat = above(beat, .1+avg+peak) * above (time, t0+.2);\nt0 = is_beat*time + (1-is_beat)*t0;\npeak = is_beat * beat + (1-is_beat)*peak*dec_med;\nindex = (index + is_beat) %16;\nindex2 = (index2 + is_beat*bnot(index))%5;\nmonitor = index2;\n\nq20 = avg;\nq21 = beat;\nq22 = peak;\nq23 = index;\nq24 = sin(time*.3)*.05*is_beat;\nq26 = bass + mid + treb;\nq27 = index;\nq28 = index2;\n\nk1 =  is_beat*equal(index%2,0);\np1 =  k1*(p1+1) + (1-k1)*p1;\np2 = dec_med * p2+ (1-dec_med)*p1;\nrott_ = p2 * 3.1416/4;\n\nrott =  rott +  .2*30/fps*q2;\n\n\nq1 = cos(rott);\nq2 = sin(rott);\nq3 = -q2;\nq4 = q1;\n\nran = bnot(q24)*ran + q24 * (int(rand(50))-24);\ntran = tan(ran);\ntran = max(tran,-5);\ntran = min(tran,5);\n\ntrel = trel + .02*30/fps*tran+q24;\nq5 = cos(trel);\nq6 = sin(trel);\nq7 = -q6;\nq8 = q5;\n\nmovex = movex*dec_slow + .1*sin(rott)*30/fps;\nq9 = movex;\n\nspd = spd*bnot(q24) + q26*q24;\nmovez = movez + .005*30/fps*spd;\nq30 = movez;\n//q30 = .3* (sin(time/45) + 1.5);\n\nmv_x = 20;\nmv_y = 15;\nmv_a = .1;\nmv_l = 0;\n\nq18 = sin(time/7);\nq19 = sin(time/11);\n\nq32 = pow(0.98, 60/fps); //fade","pixel_eqs_eel":"zoom = 0.997;\nwarp = .1;","warp":"shader_body\n{\n    // PAINTERLY EFFECT:\n    vec2 t = 0.005 + 0.045*clamp(vec2(bass,treb)-1, 0.0, 1.0);\n\n   uv += texture(sampler_noise_hq, rand_frame.xy + uv*3.3*texsize.xy*texsize_noise_hq.zw).xyz*texsize.zw*6;\n    \nvec2 uv2 = uv;\n    vec2 delta2 = texsize.zw*vec2(1,1);\n    vec3 blurry_color = texture( sampler_main, \n        mix(uv,uv_orig,-1) + delta2 ).xyz;\n    vec2 v = (blurry_color.xy-0.27) * t;\n      //uv2 += v;\n      // instead, add a rotated version:\n      uv2.x -= v.x*q1 + v.y*q3;\n      uv2.y += v.x*q2 - v.y*q1;\n\n    // sample previous frame\n    ret =texture( sampler_main, uv2 ).xyz;\n\n    // darken over time\n    ret -= 0.004;    \n}","comp":"float _pow(float b,float e){return pow(b,e);}\nvec2  _pow(vec2  b,float e){return pow(b,vec2(e));}\nvec3  _pow(vec3  b,float e){return pow(b,vec3(e));}\nvec4  _pow(vec4  b,float e){return pow(b,vec4(e));}\nshader_body\n{\n\nvec2 uv2 = uv;\nif(uv2.x >= 0.5) {uv2.x = 1-uv2.x;}\nif(uv2.y >= 0.5) {uv2.y = 1-uv2.y;}\n\n//float cs = cos(0.25*3.14159);\n//float sn = sin(0.25*3.14159);\n//vec2 uv3 = uv2;\n//uv2.x = uv3.x * cs - uv3.y * sn;\n//uv2.y = uv3.x * sn + uv3.y * cs;\n\nuv.x=uv2.x;\nuv.y=uv2.y;\n\n\n    vec2 d = texsize.zw;\n    vec3 dx = ( texture(sampler_main, uv+vec2(1,0)*d).xyz-texture(sampler_main, uv-vec2(1,0)*d).xyz );\n    vec3 dy = ( texture(sampler_main, uv+vec2(0,1)*d).xyz-texture(sampler_main, uv-vec2(0,1)*d).xyz );\nvec2 dz = vec2(dx.y,dy.y)*3;\n\nd = texsize.zw*2;\ndx = ( 2*((texture(sampler_blur1, uv+vec2(1,0)*d).xyz * scale1) + bias1)-2*((texture(sampler_blur1, uv-vec2(1,0)*d).xyz * scale1) + bias1) )*0.5;\ndy = ( 2*((texture(sampler_blur1, uv+vec2(0,1)*d).xyz * scale1) + bias1)-2*((texture(sampler_blur1, uv-vec2(0,1)*d).xyz * scale1) + bias1) )*0.5;\n\ndz +=vec2(dx.y,dy.y);\n\nvec3 bg = _pow(length(dz)*1.8+0,0.7) + ((texture(sampler_blur2, uv).xyz * scale2) + bias2).y*0.4-0.1;\n\nret =bg*vec3(6.3,1.5,.2);\nret =mix(ret,vec3(0.4,0.2,0),texture(sampler_main, uv + vec2(dx.x,dy.x)*texsize.zw*18).xyz.x*6);\nret =mix(ret,1,texture(sampler_main, uv).xyz.z);\n\n//ret =texture(sampler_main, uv).xyz;\n}","warp_hlsl":"shader_body\n{\n    // PAINTERLY EFFECT:\n    float2 t = 0.005 + 0.045*saturate(float2(bass,treb)-1);\n\n   uv += tex2D(sampler_noise_hq, rand_frame.xy + uv*3.3*texsize.xy*texsize_noise_hq.zw)*texsize.zw*6;\n    \nfloat2 uv2 = uv;\n    float2 delta2 = texsize.zw*float2(1,1);\n    float3 blurry_color = tex2D( sampler_main, \n        lerp(uv,uv_orig,-1) + delta2 ).xyz;\n    float2 v = (blurry_color.xy-0.27) * t;\n      //uv2 += v;\n      // instead, add a rotated version:\n      uv2.x -= v.x*q1 + v.y*q3;\n      uv2.y += v.x*q2 - v.y*q1;\n\n    // sample previous frame\n    ret = tex2D( sampler_main, uv2 ).xyz;\n\n    // darken over time\n    ret -= 0.004;    \n}","comp_hlsl":"shader_body\n{\n\nfloat2 uv2 = uv;\nif(uv2.x >= 0.5) {uv2.x = 1-uv2.x;}\nif(uv2.y >= 0.5) {uv2.y = 1-uv2.y;}\n\n//float1 cs = cos(0.25*3.14159);\n//float1 sn = sin(0.25*3.14159);\n//float2 uv3 = uv2;\n//uv2.x = uv3.x * cs - uv3.y * sn;\n//uv2.y = uv3.x * sn + uv3.y * cs;\n\nuv.x=uv2.x;\nuv.y=uv2.y;\n\n\n    float2 d = texsize.zw;\n    float3 dx = ( GetPixel(uv+float2(1,0)*d)-GetPixel(uv-float2(1,0)*d) );\n    float3 dy = ( GetPixel(uv+float2(0,1)*d)-GetPixel(uv-float2(0,1)*d) );\nfloat2 dz = float2(dx.y,dy.y)*3;\n\nd = texsize.zw*2;\ndx = ( 2*GetBlur1(uv+float2(1,0)*d)-2*GetBlur1(uv-float2(1,0)*d) )*0.5;\ndy = ( 2*GetBlur1(uv+float2(0,1)*d)-2*GetBlur1(uv-float2(0,1)*d) )*0.5;\n\ndz +=float2(dx.y,dy.y);\n\nfloat3 bg = pow(length(dz)*1.8+0,0.7) + GetBlur2(uv).y*0.4-0.1;\n\nret = bg*float3(6.3,1.5,.2);\nret = lerp(ret,float3(0.4,0.2,0),GetPixel(uv + float2(dx.x,dy.x)*texsize.zw*18).x*6);\nret = lerp(ret,1,GetPixel(uv).z);\n\n//ret = GetPixel(uv);\n}"}